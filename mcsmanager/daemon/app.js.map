{"version":3,"file":"app.js","mappings":"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AC,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;AAC1D,CAAC;;;;;;;;ACxID;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://mcsmanager-daemon/./src/app.ts","webpack://mcsmanager-daemon/./src/common/compress.ts","webpack://mcsmanager-daemon/./src/common/string_cache.ts","webpack://mcsmanager-daemon/./src/common/system_storage.ts","webpack://mcsmanager-daemon/./src/const.ts","webpack://mcsmanager-daemon/./src/entity/commands/base/command.ts","webpack://mcsmanager-daemon/./src/entity/commands/base/command_parser.ts","webpack://mcsmanager-daemon/./src/entity/commands/dispatcher.ts","webpack://mcsmanager-daemon/./src/entity/commands/docker/docker_pty_resize.ts","webpack://mcsmanager-daemon/./src/entity/commands/docker/docker_pull.ts","webpack://mcsmanager-daemon/./src/entity/commands/docker/docker_start.ts","webpack://mcsmanager-daemon/./src/entity/commands/docker/docker_takeover.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_command.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_install.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_kill.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_restart.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_start.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_stop.ts","webpack://mcsmanager-daemon/./src/entity/commands/general/general_update.ts","webpack://mcsmanager-daemon/./src/entity/commands/minecraft/mc_ping.ts","webpack://mcsmanager-daemon/./src/entity/commands/nullfunc.ts","webpack://mcsmanager-daemon/./src/entity/commands/process_info.ts","webpack://mcsmanager-daemon/./src/entity/commands/pty/pty_resize.ts","webpack://mcsmanager-daemon/./src/entity/commands/pty/pty_start.ts","webpack://mcsmanager-daemon/./src/entity/commands/start.ts","webpack://mcsmanager-daemon/./src/entity/commands/steam/rcon_command.ts","webpack://mcsmanager-daemon/./src/entity/commands/task/docker_stats.ts","webpack://mcsmanager-daemon/./src/entity/commands/task/mc_players.ts","webpack://mcsmanager-daemon/./src/entity/commands/task/time.ts","webpack://mcsmanager-daemon/./src/entity/config.ts","webpack://mcsmanager-daemon/./src/entity/ctx.ts","webpack://mcsmanager-daemon/./src/entity/file_writer.ts","webpack://mcsmanager-daemon/./src/entity/instance/Instance_config.ts","webpack://mcsmanager-daemon/./src/entity/instance/instance.ts","webpack://mcsmanager-daemon/./src/entity/instance/life_cycle.ts","webpack://mcsmanager-daemon/./src/entity/instance/preset.ts","webpack://mcsmanager-daemon/./src/entity/instance/process_config.ts","webpack://mcsmanager-daemon/./src/i18n/index.ts","webpack://mcsmanager-daemon/./src/middlewares/precheck.ts","webpack://mcsmanager-daemon/./src/routers/Instance_router.ts","webpack://mcsmanager-daemon/./src/routers/auth_router.ts","webpack://mcsmanager-daemon/./src/routers/environment_router.ts","webpack://mcsmanager-daemon/./src/routers/file_router.ts","webpack://mcsmanager-daemon/./src/routers/http_router.ts","webpack://mcsmanager-daemon/./src/routers/info_router.ts","webpack://mcsmanager-daemon/./src/routers/instance_event_router.ts","webpack://mcsmanager-daemon/./src/routers/passport_router.ts","webpack://mcsmanager-daemon/./src/routers/schedule_router.ts","webpack://mcsmanager-daemon/./src/routers/stream_router.ts","webpack://mcsmanager-daemon/./src/service/async_task_service/index.ts","webpack://mcsmanager-daemon/./src/service/async_task_service/quick_install.ts","webpack://mcsmanager-daemon/./src/service/dependencies.ts","webpack://mcsmanager-daemon/./src/service/docker_process_service.ts","webpack://mcsmanager-daemon/./src/service/docker_service.ts","webpack://mcsmanager-daemon/./src/service/file_router_service.ts","webpack://mcsmanager-daemon/./src/service/http.ts","webpack://mcsmanager-daemon/./src/service/instance_update_action.ts","webpack://mcsmanager-daemon/./src/service/log.ts","webpack://mcsmanager-daemon/./src/service/mission_passport.ts","webpack://mcsmanager-daemon/./src/service/protocol.ts","webpack://mcsmanager-daemon/./src/service/router.ts","webpack://mcsmanager-daemon/./src/service/seven_zip_service.ts","webpack://mcsmanager-daemon/./src/service/system_file.ts","webpack://mcsmanager-daemon/./src/service/system_instance.ts","webpack://mcsmanager-daemon/./src/service/system_instance_control.ts","webpack://mcsmanager-daemon/./src/service/system_visual_data.ts","webpack://mcsmanager-daemon/./src/service/takeover_container.ts","webpack://mcsmanager-daemon/./src/service/upload_manager.ts","webpack://mcsmanager-daemon/./src/service/version.ts","webpack://mcsmanager-daemon/./src/service/version_adapter.ts","webpack://mcsmanager-daemon/./src/tools/filepath.ts","webpack://mcsmanager-daemon/./src/tools/steam_cmd.ts","webpack://mcsmanager-daemon/./src/tools/system_user.ts","webpack://mcsmanager-daemon/./src/tools/time.ts","webpack://mcsmanager-daemon/./src/utils/speed_limit.ts","webpack://mcsmanager-daemon/external commonjs \"@iarna/toml\"","webpack://mcsmanager-daemon/external commonjs \"@koa/router\"","webpack://mcsmanager-daemon/external commonjs \"axios\"","webpack://mcsmanager-daemon/external commonjs \"dockerode\"","webpack://mcsmanager-daemon/external commonjs \"events\"","webpack://mcsmanager-daemon/external commonjs \"fs-extra\"","webpack://mcsmanager-daemon/external commonjs \"i18next\"","webpack://mcsmanager-daemon/external commonjs \"iconv-lite\"","webpack://mcsmanager-daemon/external commonjs \"koa\"","webpack://mcsmanager-daemon/external commonjs \"koa-body\"","webpack://mcsmanager-daemon/external commonjs \"koa-send\"","webpack://mcsmanager-daemon/external commonjs \"log4js\"","webpack://mcsmanager-daemon/external commonjs \"mcsmanager-common\"","webpack://mcsmanager-daemon/external commonjs \"node-schedule\"","webpack://mcsmanager-daemon/external commonjs \"pidusage\"","webpack://mcsmanager-daemon/external commonjs \"proper-lockfile\"","webpack://mcsmanager-daemon/external commonjs \"properties\"","webpack://mcsmanager-daemon/external commonjs \"rcon-srcds\"","webpack://mcsmanager-daemon/external commonjs \"socket.io\"","webpack://mcsmanager-daemon/external commonjs \"uuid\"","webpack://mcsmanager-daemon/external commonjs \"yaml\"","webpack://mcsmanager-daemon/external node-commonjs \"child_process\"","webpack://mcsmanager-daemon/external node-commonjs \"crypto\"","webpack://mcsmanager-daemon/external node-commonjs \"fs\"","webpack://mcsmanager-daemon/external node-commonjs \"fs/promises\"","webpack://mcsmanager-daemon/external node-commonjs \"http\"","webpack://mcsmanager-daemon/external node-commonjs \"node:crypto\"","webpack://mcsmanager-daemon/external node-commonjs \"node:stream\"","webpack://mcsmanager-daemon/external node-commonjs \"os\"","webpack://mcsmanager-daemon/external node-commonjs \"path\"","webpack://mcsmanager-daemon/external node-commonjs \"readline\"","webpack://mcsmanager-daemon/external node-commonjs \"stream\"","webpack://mcsmanager-daemon/external node-commonjs \"util\"","webpack://mcsmanager-daemon/webpack/bootstrap","webpack://mcsmanager-daemon/webpack/before-startup","webpack://mcsmanager-daemon/webpack/startup","webpack://mcsmanager-daemon/webpack/after-startup"],"sourcesContent":["import fs from \"fs-extra\";\nimport http from \"http\";\nimport { removeTrail } from \"mcsmanager-common\";\nimport { Server, Socket } from \"socket.io\";\nimport { GOLANG_ZIP_PATH, LOCAL_PRESET_LANG_PATH, PTY_PATH } from \"./const\";\nimport { globalConfiguration } from \"./entity/config\";\nimport { $t, i18next } from \"./i18n\";\nimport \"./service/async_task_service\";\nimport \"./service/async_task_service/quick_install\";\nimport { checkDependencies } from \"./service/dependencies\";\nimport * as koa from \"./service/http\";\nimport logger from \"./service/log\";\nimport * as protocol from \"./service/protocol\";\nimport * as router from \"./service/router\";\nimport InstanceSubsystem from \"./service/system_instance\";\nimport \"./service/system_visual_data\";\nimport uploadManager from \"./service/upload_manager\";\nimport { getVersion, initVersionManager } from \"./service/version\";\nimport versionAdapter from \"./service/version_adapter\";\n\ninitVersionManager();\nconst VERSION = getVersion();\n\nconsole.log(`\n______  _______________________  ___                                         \n___   |/  /_  ____/_  ___/__   |/  /_____ _____________ _______ _____________\n__  /|_/ /_  /    _____ \\\\__  /|_/ /_  __ \\`/_  __ \\\\  __ \\`/_  __ \\`/  _ \\\\_  ___/\n_  /  / / / /___  ____/ /_  /  / / / /_/ /_  / / / /_/ /_  /_/ //  __/  /    \n/_/  /_/  \\\\____/  /____/ /_/  /_/  \\\\__,_/ /_/ /_/\\\\__,_/ _\\\\__, / \\\\___//_/     \n                                                        /____/               \n________                                                                     \n___  __ \\\\_____ ____________ ________________                                 \n__  / / /  __ \\`/  _ \\\\_  __ \\`__ \\\\  __ \\\\_  __ \\\\                                \n_  /_/ // /_/ //  __/  / / / / / /_/ /  / / /                                \n/_____/ \\\\__,_/ \\\\___//_/ /_/ /_/\\\\____//_/ /_/                                 \n                                                                             \n\n + Copyright ${new Date().getFullYear()} MCSManager Dev <https://github.com/MCSManager>\n + Version ${VERSION}\n`);\n\n// Initialize the global configuration service\nglobalConfiguration.load();\nconst config = globalConfiguration.config;\n\n// Detect whether the configuration file is from an older version and update it if so.\nversionAdapter.detectConfig();\n\ncheckDependencies();\n\n// Set language\nif (fs.existsSync(LOCAL_PRESET_LANG_PATH)) {\n  i18next.changeLanguage(fs.readFileSync(LOCAL_PRESET_LANG_PATH, \"utf-8\"));\n} else {\n  const lang = config.language || \"en_us\";\n  logger.info(`LANGUAGE: ${lang}`);\n  i18next.changeLanguage(lang);\n}\nlogger.info($t(\"TXT_CODE_app.welcome\"));\n\n// Initialize HTTP service\nconst koaApp = koa.initKoa();\n\n// Listen for Koa errors\nkoaApp.on(\"error\", (error) => {\n  // Block all Koa framework error\n  // When Koa is attacked by a short connection flood, it is easy for error messages to swipe the screen, which may indirectly affect the operation of some applications\n});\n\nconst httpServer = http.createServer(koaApp.callback());\nhttpServer.on(\"error\", (err) => {\n  logger.error($t(\"TXT_CODE_app.httpSetupError\"));\n  logger.error(err);\n  process.exit(1);\n});\nhttpServer.listen(config.port, config.ip);\n\n// Initialize Websocket service to HTTP service\nconst io = new Server(httpServer, {\n  serveClient: false,\n  pingInterval: 1000 * 20,\n  pingTimeout: 1000 * 10,\n  cookie: false,\n  path: removeTrail(config.prefix, \"/\") + \"/socket.io\",\n  cors: {\n    origin: \"*\",\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n  },\n  maxHttpBufferSize: 1e8\n});\n\n// Initialize application instance system\ntry {\n  InstanceSubsystem.loadInstances();\n  logger.info($t(\"TXT_CODE_app.instanceLoad\", { n: InstanceSubsystem.getInstances().length }));\n} catch (err) {\n  logger.error($t(\"TXT_CODE_app.instanceLoadError\"), err);\n  process.exit(-1);\n}\n\n(function initCompressModule() {\n  try {\n    fs.chmodSync(GOLANG_ZIP_PATH, 0o755);\n    fs.chmodSync(PTY_PATH, 0o755);\n  } catch (error: any) {\n    logger.error(error?.message);\n    logger.error($t(\"TXT_CODE_a8b245fa\"));\n  }\n})();\n\n// Initialize Websocket server\nio.on(\"connection\", (socket: Socket) => {\n  protocol.addGlobalSocket(socket);\n  router.navigation(socket);\n\n  socket.on(\"error\", (err) => {\n    logger.error(\"Connection(): Socket.io Error:\", err);\n  });\n\n  socket.on(\"disconnect\", () => {\n    protocol.delGlobalSocket(socket);\n    for (const name of socket.eventNames()) socket.removeAllListeners(name);\n  });\n});\n\nprocess.on(\"uncaughtException\", function (err) {\n  logger.error(`Error: UncaughtException:`, err);\n});\n\nprocess.on(\"unhandledRejection\", (reason, p) => {\n  logger.error(`Error: UnhandledRejection:`, reason, p);\n});\n\nlogger.info(\"----------------------------\");\nlogger.info($t(\"TXT_CODE_app.started\"));\nlogger.info($t(\"TXT_CODE_app.doc\"));\nlogger.info($t(\"TXT_CODE_app.addr\", { port: config.port }));\nlogger.info($t(\"TXT_CODE_app.configPathTip\", { path: \"\" }));\nlogger.info($t(\"TXT_CODE_app.password\", { key: config.key }));\nlogger.info($t(\"TXT_CODE_app.passwordTip\"));\nlogger.info($t(\"TXT_CODE_app.exitTip\"));\nlogger.info(\"----------------------------\");\nconsole.log(\"\");\n\nlet isExiting = false;\nasync function listenExitSig(signal: string, isForce = true) {\n  if (isExiting) {\n    logger.warn($t(\"TXT_CODE_6f862823\"));\n    return;\n  }\n  try {\n    logger.warn($t(\"TXT_CODE_4ffdc91d\", { signal }));\n    isExiting = true;\n    await InstanceSubsystem.exit(isForce);\n    await uploadManager.exit();\n    logger.info($t(\"TXT_CODE_dff680b7\"));\n    process.exit(0);\n  } catch (err) {\n    logger.error(err);\n    process.exit(-1);\n  }\n}\n\n// Listen for close process signals\n[\"SIGTERM\", \"SIGINT\", \"SIGQUIT\"].forEach(function (sig) {\n  process.on(sig, async () => {\n    await listenExitSig(sig);\n  });\n});\n\nprocess.stdin.on(\"data\", (v) => {\n  const command = v.toString().replace(\"\\n\", \"\").replace(\"\\r\", \"\").trim().toLowerCase();\n  if (command === \"exit\") listenExitSig(\"exit\");\n});\n","import { exec } from \"child_process\";\nimport fs from \"fs-extra\";\nimport { t } from \"i18next\";\nimport { ProcessWrapper } from \"mcsmanager-common\";\nimport path from \"path\";\nimport { promisify } from \"util\";\nimport { GOLANG_ZIP_PATH, SEVEN_ZIP_PATH, ZIP_TIMEOUT_SECONDS } from \"../const\";\nimport { $t } from \"../i18n\";\nimport logger from \"../service/log\";\nimport {\n  check7zipStatus,\n  getFileExtension,\n  isMultiVolume,\n  isZipFormat\n} from \"../service/seven_zip_service\";\n\nconst execPromise = promisify(exec);\n\nconst COMPRESS_ERROR_MSG = {\n  invalidName: t(\"TXT_CODE_3aa9f36\"),\n  exitErr: t(\"TXT_CODE_2be83d36\"),\n  startErr: t(\"TXT_CODE_37d839a4\"),\n  timeoutErr: t(\"TXT_CODE_15c07350\")\n};\n\nfunction checkFileName(fileName: string) {\n  const disableList = ['\"', \"'\", \"?\", \"|\", \"&\"];\n  for (const iterator of disableList) {\n    if (fileName.includes(iterator)) return false;\n  }\n  return true;\n}\n\nexport async function compress(\n  sourceZip: string,\n  files: string[],\n  fileCode?: string\n): Promise<boolean> {\n  if (!checkFileName(sourceZip) || files.some((v) => !checkFileName(v)))\n    throw new Error(COMPRESS_ERROR_MSG.invalidName);\n  return await useZip(sourceZip, files, fileCode);\n}\n\nexport async function decompress(\n  zipPath: string,\n  dest: string,\n  fileCode?: string\n): Promise<boolean> {\n  if (!checkFileName(zipPath) || !checkFileName(dest))\n    throw new Error(COMPRESS_ERROR_MSG.invalidName);\n\n  if (!check7zipStatus()) {\n    if (!isZipFormat(zipPath)) {\n      const fileExt = getFileExtension(zipPath);\n      throw new Error($t(\"TXT_CODE_69c42450\", { fileExt: fileExt }));\n    }\n\n    if (isMultiVolume(zipPath)) {\n      throw new Error($t(\"TXT_CODE_91d066aa\"));\n    }\n\n    try {\n      return await useUnzip(zipPath, dest, fileCode || \"utf-8\");\n    } catch (error: any) {\n      logger.error($t(\"TXT_CODE_842929d0\", { message: error.message }));\n      throw new Error(\n        $t(\"TXT_CODE_f0512848\", {\n          message: error?.message\n        })\n      );\n    }\n  } else {\n    return await use7zip(zipPath, dest);\n  }\n}\n\n/**\n * Decompress using 7zip\n */\nasync function use7zip(sourceZip: string, destDir: string): Promise<boolean> {\n  try {\n    const sourceDir = path.dirname(sourceZip);\n    const normalizedDest = path.normalize(destDir);\n    const normalizedSource = path.normalize(sourceDir);\n\n    let command: string;\n    let workingDir: string;\n\n    // if (normalizedDest === normalizedSource) {\n    //   command = `\"${SEVEN_ZIP_PATH}\" x \"${sourceZip}\" -aoa`;\n    //   workingDir = sourceDir;\n    //   logger.info($t(\"TXT_CODE_fe2435a0\", { command }));\n    // } else {\n    await fs.ensureDir(destDir);\n    command = `\"${SEVEN_ZIP_PATH}\" x \"${sourceZip}\" \"-o${destDir}\" -aoa`;\n    workingDir = sourceDir;\n    logger.info($t(\"TXT_CODE_35d2ee7a\", { command }));\n    // }\n\n    const { stdout, stderr } = await execPromise(command, {\n      cwd: workingDir,\n      timeout: ZIP_TIMEOUT_SECONDS * 1000\n    });\n\n    const hasErrors =\n      stdout.includes(\"ERRORS:\") ||\n      stdout.includes(\"ERROR:\") ||\n      stdout.includes(\"Open Errors:\") ||\n      stdout.includes(\"Missing volume\") ||\n      stdout.includes(\"Data Error\") ||\n      stdout.includes(\"Archives with Errors:\");\n\n    if (hasErrors) {\n      const errorLines = stdout\n        .split(\"\\n\")\n        .filter(\n          (line) =>\n            line.includes(\"ERROR\") ||\n            line.includes(\"Missing volume\") ||\n            line.includes(\"Data Error\") ||\n            line.includes(\"Open Errors\") ||\n            line.includes(\"Archives with Errors\")\n        );\n\n      let cleanErrorMsg: string;\n      if (stdout.includes(\"Missing volume\")) {\n        const volumeMatch = stdout.match(/Missing volume\\s*:\\s*([^\\s\\n]+)/);\n        if (volumeMatch) {\n          cleanErrorMsg = $t(\"TXT_CODE_c0401ba7\", { file: volumeMatch[1] });\n        } else {\n          cleanErrorMsg = $t(\"TXT_CODE_908a4ace\");\n        }\n      } else if (stdout.includes(\"Data Error\")) {\n        cleanErrorMsg = $t(\"TXT_CODE_b1ef1d4a\");\n      } else if (stdout.includes(\"Open Errors\")) {\n        cleanErrorMsg = $t(\"TXT_CODE_5778848e\");\n      } else {\n        const firstError = errorLines[0]?.trim() || $t(\"TXT_CODE_11ecd5a9\");\n        cleanErrorMsg = firstError.length > 100 ? firstError.substring(0, 100) + \"...\" : firstError;\n      }\n\n      logger.error($t(\"TXT_CODE_cacd8840\", { message: cleanErrorMsg }));\n      throw new Error($t(\"TXT_CODE_ec7fc405\", { message: cleanErrorMsg }));\n    }\n\n    if (stderr && stderr.trim()) {\n      logger.warn($t(\"TXT_CODE_8a9c6364\", { warning: stderr }));\n    }\n\n    if (stdout.includes(\"Everything is Ok\")) {\n      logger.info($t(\"TXT_CODE_e96a91cd\"));\n    } else {\n      const resultLines = stdout\n        .split(\"\\n\")\n        .filter((line) => line.trim())\n        .slice(-3);\n      logger.info($t(\"TXT_CODE_143db7d9\", { result: resultLines.join(\"; \") }));\n    }\n    return true;\n  } catch (error: any) {\n    let simpleErrorMsg: string;\n    if (error.message.includes(\"Missing volume\")) {\n      const volumeMatch = error.message.match(/Missing volume\\s*:\\s*([^\\s\\n]+)/);\n      simpleErrorMsg = volumeMatch\n        ? $t(\"TXT_CODE_c0401ba7\", { file: volumeMatch[1] })\n        : $t(\"TXT_CODE_908a4ace\");\n    } else if (error.message.includes(\"timeout\")) {\n      simpleErrorMsg = $t(\"TXT_CODE_1d1ec400\");\n    } else if (error.message.includes(\"ENOENT\")) {\n      simpleErrorMsg = $t(\"TXT_CODE_a0ede210\");\n    } else if (error.message.includes(\"Command failed\")) {\n      simpleErrorMsg = $t(\"TXT_CODE_4fb3fad1\");\n    } else {\n      simpleErrorMsg = $t(\"TXT_CODE_f460677f\");\n    }\n\n    logger.error(\n      $t(\"TXT_CODE_1b688710\", {\n        message: simpleErrorMsg,\n        details: error.message.substring(0, 200)\n      })\n    );\n    throw new Error($t(\"TXT_CODE_ec7fc405\", { message: simpleErrorMsg }));\n  }\n}\n\n// ./file-zip -mode 2 --zipPath aaa.zip --DistDirPath 123412124 --code GBK\nasync function useUnzip(sourceZip: string, destDir: string, code = \"utf-8\"): Promise<boolean> {\n  const params = [\n    \"--mode=2\",\n    `--zipPath=${path.basename(sourceZip)}`,\n    `--distDirPath=${path.normalize(destDir)}`,\n    `--code=${code}`\n  ];\n  logger.info(`Function useUnzip(): Command: ${GOLANG_ZIP_PATH} ${params.join(\" \")}`);\n  const subProcess = new ProcessWrapper(\n    GOLANG_ZIP_PATH,\n    params,\n    path.dirname(sourceZip),\n    ZIP_TIMEOUT_SECONDS,\n    code\n  );\n  subProcess.setErrMsg(COMPRESS_ERROR_MSG);\n  return subProcess.start();\n}\n\n// ./file-zip -mode 1 --file main.go --file file-zip --file 123 --file README.md --zipPath aaabb.zip\nasync function useZip(distZip: string, files: string[], code = \"utf-8\"): Promise<boolean> {\n  if (!files || files.length == 0) throw new Error(t(\"TXT_CODE_2038ec2c\"));\n  const params = [\"--mode=1\", `--code=${code}`, `--zipPath=${path.basename(distZip)}`];\n  files.forEach((v) => {\n    params.push(`--file=${path.basename(v)}`);\n  });\n  logger.info(\n    `Function useZip(): Command: ${GOLANG_ZIP_PATH} ${params.join(\" \")}, CWD: ${path.dirname(\n      distZip\n    )}`\n  );\n  const subProcess = new ProcessWrapper(\n    GOLANG_ZIP_PATH,\n    params,\n    path.dirname(distZip),\n    ZIP_TIMEOUT_SECONDS,\n    code\n  );\n  subProcess.setErrMsg(COMPRESS_ERROR_MSG);\n  return subProcess.start();\n}\n","/**\n * A circular buffer is an array-based data structure that enables element addition and overwrite operations with O(1) time complexity,\n * making it highly suitable for high-frequency push operations and the need to remove the oldest data.\n * Additionally, its memory usage is fixed and does not grow dynamically,\n * meeting the requirements for high efficiency and low memory consumption.\n */\nexport class CircularBuffer<T> {\n  private capacity: number;\n  private buffer: T[];\n  private head: number;\n  private tail: number;\n  private size: number;\n  private deleted: boolean;\n\n  constructor(capacity: number) {\n    if (capacity <= 0) {\n      throw new Error(\"Capacity must be a positive integer\");\n    }\n    this.capacity = capacity;\n    this.buffer = new Array(capacity);\n    this.head = 0;\n    this.tail = 0;\n    this.size = 0;\n    this.deleted = false;\n  }\n\n  pushLog(str: string): void {\n    const SIZE = 256;\n    if (str.length > SIZE) {\n      for (let i = 0, len = str.length; i < len; i += SIZE) {\n        this.push(str.substring(i, i + SIZE) as T);\n      }\n    } else {\n      this.push(str as T);\n    }\n  }\n\n  push(item: T): void {\n    if (this.size === this.capacity) {\n      this.buffer[this.tail] = item;\n      this.head = (this.head + 1) % this.capacity;\n      this.tail = (this.tail + 1) % this.capacity;\n      this.deleted = true;\n    } else {\n      this.buffer[this.tail] = item;\n      this.tail = (this.tail + 1) % this.capacity;\n      this.size++;\n    }\n  }\n\n  getCache() {\n    const result: T[] = [];\n    let index = this.head;\n    for (let i = 0; i < this.size; i++) {\n      result.push(this.buffer[index]);\n      index = (index + 1) % this.capacity;\n    }\n    const wasDeleted = this.deleted;\n\n    this.head = 0;\n    this.tail = 0;\n    this.size = 0;\n    this.deleted = false;\n\n    return {\n      items: result,\n      wasDeleted\n    };\n  }\n}\n","import { StorageSubsystem } from \"mcsmanager-common\";\nexport default new StorageSubsystem();\n","import os from \"os\";\nimport path from \"path\";\n\nfunction loadSteamCmdPath() {\n  let targetPath = path.normalize(\n    path.join(\n      process.cwd(),\n      \"lib\",\n      os.platform() === \"win32\" ? \"steamcmd.exe\" : `steamcmd_${os.arch()}`\n    )\n  );\n  return targetPath;\n}\n\nconst SYS_INFO = `${os.platform()}_${os.arch()}${os.platform() === \"win32\" ? \".exe\" : \"\"}`;\nconst ptyName = `pty_${SYS_INFO}`;\nconst frpcName = `frpc_${SYS_INFO}`;\nconst PTY_PATH = path.normalize(path.join(process.cwd(), \"lib\", ptyName));\nconst FRPC_PATH = path.normalize(path.join(process.cwd(), \"lib\", frpcName));\nconst FILENAME_BLACKLIST = [\"\\\\\", \"/\", \".\", \"'\", '\"', \"?\", \"*\", \"<\", \">\"];\nconst LOCAL_PRESET_LANG_PATH = path.normalize(path.join(process.cwd(), \"language\"));\nconst IGNORE = \"[IGNORE_LOG]\";\nconst SYSTEM_TYPE = os.platform();\nconst ZIP_TIMEOUT_SECONDS = 60 * 40;\nconst GOLANG_ZIP_NAME = `file_zip_${SYSTEM_TYPE}_${os.arch()}${\n  SYSTEM_TYPE === \"win32\" ? \".exe\" : \"\"\n}`;\nconst GOLANG_ZIP_PATH = path.normalize(path.join(process.cwd(), \"lib\", GOLANG_ZIP_NAME));\nconst STEAM_CMD_PATH = loadSteamCmdPath();\nconst WINDOWS_STEAM_CMD_URL = \"https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip\";\n\nconst SEVEN_ZIP_NAME = `7z_${os.platform()}_${os.arch()}${os.platform() === \"win32\" ? \".exe\" : \"\"}`;\nconst SEVEN_ZIP_PATH = path.normalize(path.join(process.cwd(), \"lib\", SEVEN_ZIP_NAME));\n\nexport {\n  FILENAME_BLACKLIST,\n  FRPC_PATH,\n  GOLANG_ZIP_PATH,\n  IGNORE,\n  LOCAL_PRESET_LANG_PATH,\n  PTY_PATH,\n  SEVEN_ZIP_NAME,\n  SEVEN_ZIP_PATH,\n  STEAM_CMD_PATH,\n  SYSTEM_TYPE,\n  WINDOWS_STEAM_CMD_URL,\n  ZIP_TIMEOUT_SECONDS\n};\n","import Instance from \"../../instance/instance\";\nimport { IExecutable } from \"../../instance/preset\";\n\nexport default class InstanceCommand implements IExecutable<Instance> {\n  constructor(public info?: string) {}\n  async exec(instance: Instance): Promise<any> {}\n  async stop(instance: Instance) {}\n}\n","import { $t } from \"../../../i18n\";\n\nexport function commandStringToArray(cmd: string) {\n  const QUOTES_KEY = \"{quotes}\";\n  let start = 0;\n  let len = cmd.length;\n  const cmdArray: string[] = [];\n  function _analyze() {\n    for (let index = start; index < len; index++) {\n      const ch = cmd[index];\n      if (ch === \" \") {\n        findSpace(index);\n        start++;\n        continue;\n      }\n      if (ch === '\"') {\n        index = findQuotes(index);\n      }\n      if (index + 1 >= len) {\n        findEnd();\n        break;\n      }\n    }\n  }\n\n  function findEnd() {\n    return cmdArray.push(cmd.slice(start));\n  }\n\n  function findSpace(endPoint: number) {\n    if (endPoint != start) {\n      const elem = cmd.slice(start, endPoint);\n      start = endPoint;\n      return cmdArray.push(elem);\n    }\n  }\n\n  function findQuotes(p: number) {\n    for (let index = p + 1; index < len; index++) {\n      const ch = cmd[index];\n      if (ch === '\"') return index;\n    }\n    throw new Error($t(\"TXT_CODE_command.quotes\"));\n  }\n\n  _analyze();\n\n  if (cmdArray.length == 0) {\n    return [];\n  }\n\n  for (const index in cmdArray) {\n    const element = cmdArray[index];\n    if (element[0] === '\"' && element[element.length - 1] === '\"')\n      cmdArray[index] = element.slice(1, element.length - 1);\n    while (cmdArray[index].indexOf(QUOTES_KEY) != -1)\n      cmdArray[index] = cmdArray[index].replace(QUOTES_KEY, '\"');\n  }\n\n  return cmdArray;\n}\n","import Instance from \"../instance/instance\";\nimport InstanceCommand from \"./base/command\";\nimport NullCommand from \"./nullfunc\";\nimport GeneralStartCommand from \"./general/general_start\";\nimport GeneralStopCommand from \"./general/general_stop\";\nimport GeneralKillCommand from \"./general/general_kill\";\nimport GeneralSendCommand from \"./general/general_command\";\nimport GeneralRestartCommand from \"./general/general_restart\";\nimport DockerStartCommand from \"./docker/docker_start\";\nimport TimeCheck from \"./task/time\";\nimport GeneralUpdateCommand from \"./general/general_update\";\nimport PtyStartCommand from \"./pty/pty_start\";\nimport RconCommand from \"./steam/rcon_command\";\nimport DockerResizeCommand from \"./docker/docker_pty_resize\";\nimport PtyResizeCommand from \"./pty/pty_resize\";\nimport GeneralInstallCommand from \"./general/general_install\";\nimport PingJavaMinecraftServerCommand from \"./minecraft/mc_ping\";\nimport PingMinecraftServerTask from \"./task/mc_players\";\nimport DockerStatsTask from \"./task/docker_stats\";\n\n// If you add a new \"Preset\", Please add the definition here.\nexport type IPresetCommand =\n  | \"start\"\n  | \"stop\"\n  | \"restart\"\n  | \"kill\"\n  | \"update\"\n  | \"refreshPlayers\"\n  | \"command\"\n  | \"resize\"\n  | \"install\";\n\n// Instance function dispatcher\n// Dispatch and assign different functions according to different types\nexport default class FunctionDispatcher extends InstanceCommand {\n  constructor() {\n    super(\"FunctionDispatcher\");\n  }\n\n  async exec(instance: Instance) {\n    // initialize all modules\n    instance.lifeCycleTaskManager.clearLifeCycleTask();\n    instance.clearPreset();\n\n    // the component that the instance must mount\n    instance.lifeCycleTaskManager.registerLifeCycleTask(new TimeCheck());\n\n    // Instance general preset capabilities\n    instance.setPreset(\"command\", new GeneralSendCommand());\n    instance.setPreset(\"stop\", new GeneralStopCommand());\n    instance.setPreset(\"kill\", new GeneralKillCommand());\n    instance.setPreset(\"restart\", new GeneralRestartCommand());\n    instance.setPreset(\"update\", new GeneralUpdateCommand());\n    instance.setPreset(\"refreshPlayers\", new NullCommand());\n    instance.setPreset(\"install\", new GeneralInstallCommand());\n\n    // Preset the basic operation mode according to the instance startup type\n    if (!instance.config.processType || instance.config.processType === \"general\") {\n      instance.setPreset(\"start\", new GeneralStartCommand());\n    }\n\n    // Enable emulated terminal mode\n    if (instance.config.terminalOption.pty && instance.config.processType === \"general\") {\n      instance.setPreset(\"start\", new PtyStartCommand());\n      instance.setPreset(\"resize\", new PtyResizeCommand());\n    }\n    // Whether to enable Docker PTY mode\n    if (instance.config.processType === \"docker\") {\n      instance.setPreset(\"start\", new DockerStartCommand());\n      instance.setPreset(\"resize\", new DockerResizeCommand());\n      instance.lifeCycleTaskManager.registerLifeCycleTask(new DockerStatsTask());\n    }\n    if (instance.config.enableRcon) {\n      instance.setPreset(\"command\", new RconCommand());\n    }\n\n    // Minecraft Ping\n    if (instance.config.type.includes(Instance.TYPE_MINECRAFT_JAVA)) {\n      instance.setPreset(\"refreshPlayers\", new PingJavaMinecraftServerCommand());\n      instance.lifeCycleTaskManager.registerLifeCycleTask(new PingMinecraftServerTask());\n    }\n  }\n}\n","import Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\nimport { DockerProcessAdapter } from \"../../../service/docker_process_service\";\n\nexport default class DockerResizeCommand extends InstanceCommand {\n  constructor() {\n    super(\"ResizeTTY\");\n  }\n\n  async exec(instance: Instance): Promise<any> {\n    const dockerProcess = instance?.process as Partial<DockerProcessAdapter>;\n    if (typeof dockerProcess?.container?.resize === \"function\") {\n      const { w, h } = instance.computeTerminalSize();\n      await dockerProcess?.container?.resize({\n        h,\n        w\n      });\n    }\n  }\n}\n","import Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\nimport { t } from \"i18next\";\nimport { DefaultDocker } from \"../../../service/docker_service\";\n\nexport async function checkImage(name: string) {\n  const docker = new DefaultDocker();\n  try {\n    const image = docker.getImage(name);\n    const info = await image.inspect();\n    return info.Size > 0 ? true : false;\n  } catch (error: any) {\n    return false;\n  }\n}\n\nexport default class DockerPullCommand extends InstanceCommand {\n  constructor() {\n    super(\"DockerPullCommand\");\n  }\n\n  private stopFlag = false;\n\n  private stopped(instance: Instance) {\n    this.stopFlag = true;\n    instance.asynchronousTask = undefined;\n  }\n\n  private awaitImageDone(instance: Instance, name: string) {\n    return new Promise((resolve, reject) => {\n      let count = 0;\n      const task = setInterval(async () => {\n        count++;\n        instance.println(\"CONTAINER\", t(\"TXT_CODE_977cb449\"));\n        if (await checkImage(name)) {\n          clearInterval(task);\n          resolve(true);\n        }\n        if (count >= 20 * 15) {\n          clearInterval(task);\n          reject(new Error(t(\"TXT_CODE_9cae6f92\")));\n        }\n        if (this.stopFlag) {\n          clearInterval(task);\n          reject(new Error(t(\"TXT_CODE_361a79c6\")));\n        }\n      }, 3 * 1000);\n    });\n  }\n\n  async exec(instance: Instance) {\n    const imageName = instance.config.docker.image;\n    if (!imageName) throw new Error(t(\"TXT_CODE_17be5f70\"));\n    const cachedStartCount = instance.startCount;\n    // If the image exists, there is no need to pull again.\n    if (await checkImage(imageName)) return;\n\n    try {\n      const docker = new DefaultDocker();\n      instance.println(\"CONTAINER\", t(\"TXT_CODE_2fa46b8c\") + imageName);\n      instance.asynchronousTask = this;\n\n      await docker.pull(imageName, {});\n\n      await this.awaitImageDone(instance, imageName);\n      if (cachedStartCount !== instance.startCount) return;\n      instance.println(\"CONTAINER\", t(\"TXT_CODE_c68b0bef\"));\n    } catch (err: any) {\n      if (cachedStartCount !== instance.startCount) return;\n      throw new Error([t(\"TXT_CODE_db37b7f9\"), err?.message].join(\"\\n\"));\n    } finally {\n      this.stopped(instance);\n    }\n  }\n\n  async stop(instance: Instance): Promise<void> {\n    this.stopped(instance);\n  }\n}\n","import fs from \"fs-extra\";\nimport { $t } from \"../../../i18n\";\nimport {\n  DockerProcessAdapter,\n  SetupDockerContainer,\n  StartupDockerProcessError\n} from \"../../../service/docker_process_service\";\nimport logger from \"../../../service/log\";\nimport Instance from \"../../instance/instance\";\nimport AbsStartCommand from \"../start\";\n\nexport default class DockerStartCommand extends AbsStartCommand {\n  protected async createProcess(instance: Instance) {\n    if (!instance.hasCwdPath() || !instance.config.ie || !instance.config.oe)\n      throw new StartupDockerProcessError($t(\"TXT_CODE_a6424dcc\"));\n    if (!fs.existsSync(instance.absoluteCwdPath())) fs.mkdirpSync(instance.absoluteCwdPath());\n\n    // Docker docks to the process adapter\n    const processAdapter = new DockerProcessAdapter(new SetupDockerContainer(instance));\n    await processAdapter.start({\n      isTty: instance.config.terminalOption.pty,\n      w: instance.config.terminalOption.ptyWindowCol,\n      h: instance.config.terminalOption.ptyWindowRow\n    });\n\n    instance.started(processAdapter);\n    instance.println(\"INFO\", $t(\"TXT_CODE_b50ffba8\"));\n    logger.info(\n      $t(\"TXT_CODE_instance.successful\", {\n        v: `${instance.config.nickname} ${instance.instanceUuid}`\n      })\n    );\n  }\n}\n","import { $t } from \"../../../i18n\";\nimport Instance from \"../../instance/instance\";\nimport logger from \"../../../service/log\";\nimport {\n  DockerProcessAdapter,\n  SetupDockerContainer,\n  StartupDockerProcessError\n} from \"../../../service/docker_process_service\";\nimport AbsStartCommand from \"../start\";\nimport { DefaultDocker } from \"../../../service/docker_service\";\nimport Docker from \"dockerode\";\n\nexport default class DockerTakeoverCommand extends AbsStartCommand {\n  constructor(private containerInfo: Docker.ContainerInfo) {\n    super();\n  }\n\n  protected async createProcess(instance: Instance) {\n    // Docker docks to the process adapter\n    const processAdapter = new DockerProcessAdapter(new SetupDockerContainer(instance));\n    try {\n      const docker = new DefaultDocker();\n      const container = docker.getContainer(this.containerInfo.Id);\n      if (this.containerInfo.State == \"paused\") {\n        await container.unpause();\n      }\n      await processAdapter.start(\n        {\n          isTty: instance.config.terminalOption.pty,\n          w: instance.config.terminalOption.ptyWindowCol,\n          h: instance.config.terminalOption.ptyWindowRow\n        },\n        container\n      );\n    } catch (e) {\n      logger.error(e);\n      logger.error(\"uuid:\", instance.instanceUuid);\n      logger.error(\"container:\", this.containerInfo.Id);\n      throw new StartupDockerProcessError($t(\"TXT_CODE_786c22bd\"));\n    }\n\n    instance.started(processAdapter);\n    logger.info(\n      $t(\"TXT_CODE_instance.successful\", {\n        v: `${instance.config.nickname} ${instance.instanceUuid}`\n      })\n    );\n  }\n}\n","import { $t } from \"../../../i18n\";\n\nimport Instance from \"../../instance/instance\";\nimport { encode } from \"iconv-lite\";\nimport InstanceCommand from \"../base/command\";\n\nexport const CTRL_C = \"\\x03\";\n\nexport function isExitCommand(instance: Instance, buf: any) {\n  if (String(buf).toLowerCase() === \"^c\" && instance.process) {\n    if (instance.config.terminalOption.pty || instance.config.docker.image) {\n      instance.process.write(CTRL_C);\n      instance.process.write(instance.getCrlfValue());\n    } else {\n      instance.process.kill(\"SIGINT\");\n    }\n    return true;\n  }\n  if (buf == CTRL_C) {\n    instance.process?.write(CTRL_C);\n    return true;\n  }\n  return false;\n}\n\nexport default class GeneralSendCommand extends InstanceCommand {\n  constructor() {\n    super(\"SendCommand\");\n  }\n\n  async exec(instance: Instance, buf?: any): Promise<any> {\n    if (isExitCommand(instance, buf)) return;\n\n    // The server shutdown command needs to send a command, but before the server shutdown command is executed, the status will be set to the shutdown state.\n    // So here the command can only be executed by whether the process exists or not\n    if (instance?.process) {\n      instance.process.write(encode(buf, instance.config.ie));\n      instance.process.write(instance.getCrlfValue());\n    } else {\n      instance.failure(new Error($t(\"TXT_CODE_command.instanceNotOpen\")));\n    }\n  }\n}\n","import fs from \"fs-extra\";\nimport { $t } from \"../../../i18n\";\nimport { QuickInstallTask } from \"../../../service/async_task_service/quick_install\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\n\nexport default class GeneralInstallCommand extends InstanceCommand {\n  private installTask?: QuickInstallTask;\n\n  constructor() {\n    super(\"GeneralInstallCommand\");\n  }\n\n  private stopped(instance: Instance) {\n    instance.asynchronousTask = undefined;\n    instance.setLock(false);\n    instance.status(Instance.STATUS_STOP);\n  }\n\n  async exec(instance: Instance, params?: IQuickStartPackages) {\n    if (instance.status() !== Instance.STATUS_STOP)\n      return instance.failure(new Error($t(\"TXT_CODE_general_update.statusErr_notStop\")));\n    if (instance.asynchronousTask)\n      return instance.failure(new Error($t(\"TXT_CODE_general_update.statusErr_otherProgress\")));\n    if (!params) throw new Error(\"GeneralInstallCommand: No params\");\n    try {\n      instance.setLock(true);\n      instance.status(Instance.STATUS_BUSY);\n      instance.println($t(\"TXT_CODE_1704ea49\"), $t(\"TXT_CODE_cbc235ad\"));\n      if (instance.hasCwdPath()) {\n        await fs.remove(instance.absoluteCwdPath());\n        await fs.mkdirs(instance.absoluteCwdPath());\n      }\n      instance.println($t(\"TXT_CODE_1704ea49\"), $t(\"TXT_CODE_906c5d6a\"));\n      this.installTask = new QuickInstallTask(\n        instance.config.nickname,\n        params.targetLink,\n        params.setupInfo,\n        instance\n      );\n      instance.asynchronousTask = this;\n      instance.println($t(\"TXT_CODE_1704ea49\"), $t(\"TXT_CODE_b9ca022b\"));\n      await this.installTask?.start();\n      await this.installTask?.wait();\n    } catch (err: any) {\n      instance.println(\n        $t(\"TXT_CODE_general_update.update\"),\n        $t(\"TXT_CODE_general_update.error\", { err })\n      );\n    } finally {\n      this.stopped(instance);\n    }\n  }\n\n  async stop(instance: Instance): Promise<void> {\n    instance.println(\n      $t(\"TXT_CODE_general_update.update\"),\n      $t(\"TXT_CODE_general_update.killProcess\")\n    );\n    this.stopped(instance);\n    await this.installTask?.stop();\n    this.installTask = undefined;\n  }\n}\n","import { t } from \"i18next\";\nimport { sleep } from \"../../../tools/time\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\n\nexport default class GeneralKillCommand extends InstanceCommand {\n  constructor() {\n    super(\"KillCommand\");\n  }\n\n  async exec(instance: Instance) {\n    if (instance.status() === Instance.STATUS_STOP) return;\n\n    // The program must run for more than 6 seconds before it can be forced to stop!\n    const waitTime = instance.startTimestamp + 6 * 1000 - Date.now();\n    if (instance.startTimestamp && waitTime > 0) {\n      await sleep(waitTime);\n    }\n\n    instance.ignoreEventTaskOnce();\n\n    const task = instance?.asynchronousTask;\n    if (task && typeof task.stop === \"function\") {\n      task.stop(instance).catch((err) => {\n        instance.println(\n          \"ERROR\",\n          `Instance ${instance.config.nickname} asynchronousTask stop failed: ${err}`\n        );\n      });\n    }\n\n    if (instance.process) {\n      try {\n        await instance.process.kill(\"SIGKILL\");\n      } catch (err) {\n        instance.println(\n          \"ERROR\",\n          `Instance ${instance.config.nickname} process kill failed: ${err}`\n        );\n      }\n    }\n  }\n}\n","import { $t } from \"../../../i18n\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\n\nexport default class GeneralRestartCommand extends InstanceCommand {\n  constructor() {\n    super(\"GeneralRestartCommand\");\n  }\n\n  async exec(instance: Instance) {\n    try {\n      instance.ignoreEventTaskOnce();\n      instance.println(\"INFO\", $t(\"TXT_CODE_restart.start\"));\n      instance.setLock(true);\n      await instance.execPreset(\"stop\");\n      const startCount = instance.startCount;\n      // Check the instance status every second,\n      // if the instance status is stopped, restart the server immediately\n      const task = setInterval(async () => {\n        try {\n          if (startCount !== instance.startCount) {\n            throw new Error($t(\"TXT_CODE_restart.error1\"));\n          }\n          if (\n            instance.status() !== Instance.STATUS_STOPPING &&\n            instance.status() !== Instance.STATUS_STOP\n          ) {\n            throw new Error($t(\"TXT_CODE_restart.error2\"));\n          }\n          if (instance.status() === Instance.STATUS_STOP) {\n            instance.println(\"INFO\", $t(\"TXT_CODE_restart.restarting\"));\n            instance.setLock(false);\n            clearInterval(task);\n            await instance.execPreset(\"start\");\n          }\n        } catch (error: any) {\n          clearInterval(task);\n          instance.setLock(false);\n          instance.failure(error);\n        }\n      }, 1000);\n    } catch (error: any) {\n      instance.setLock(false);\n      instance.failure(error);\n    }\n  }\n}\n","import { ChildProcess, spawn } from \"child_process\";\nimport EventEmitter from \"events\";\nimport fs from \"fs-extra\";\nimport { killProcess } from \"mcsmanager-common\";\nimport { $t } from \"../../../i18n\";\nimport logger from \"../../../service/log\";\nimport Instance from \"../../instance/instance\";\nimport { IInstanceProcess } from \"../../instance/interface\";\nimport { commandStringToArray } from \"../base/command_parser\";\nimport AbsStartCommand from \"../start\";\nimport { getRunAsUserParams } from \"../../../tools/system_user\";\n\n// Error exception at startup\nclass StartupError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\n// Docker process adapter\nclass ProcessAdapter extends EventEmitter implements IInstanceProcess {\n  pid?: number | string;\n\n  constructor(private process: ChildProcess) {\n    super();\n    this.pid = this.process.pid;\n    process.stdout?.on(\"data\", (text) => this.emit(\"data\", text));\n    process.stderr?.on(\"data\", (text) => this.emit(\"data\", text));\n    process.on(\"exit\", (code) => this.emit(\"exit\", code));\n  }\n\n  public write(data?: string) {\n    return this.process.stdin?.write(data);\n  }\n\n  public kill(s?: any) {\n    if (this.pid) return killProcess(this.pid, this.process, s);\n  }\n\n  public async destroy() {\n    // remove all dynamically added event listeners\n    for (const n of this.eventNames()) this.removeAllListeners(n);\n    if (this.process.stdout)\n      for (const eventName of this.process.stdout.eventNames())\n        this.process.stdout.removeAllListeners(eventName);\n    if (this.process.stderr)\n      for (const eventName of this.process.stderr.eventNames())\n        this.process.stderr.removeAllListeners(eventName);\n    if (this.process)\n      for (const eventName of this.process.eventNames()) this.process.removeAllListeners(eventName);\n    this.process?.stdout?.destroy();\n    this.process?.stderr?.destroy();\n    if (this.process?.exitCode === null) {\n      this.process.kill(\"SIGTERM\");\n      this.process.kill(\"SIGKILL\");\n    }\n  }\n}\n\nexport default class GeneralStartCommand extends AbsStartCommand {\n  async createProcess(instance: Instance, source = \"\") {\n    if (\n      (!instance.config.startCommand && instance.config.processType === \"general\") ||\n      !instance.hasCwdPath() ||\n      !instance.config.ie ||\n      !instance.config.oe\n    )\n      throw new StartupError($t(\"TXT_CODE_general_start.instanceConfigErr\"));\n    if (!fs.existsSync(instance.absoluteCwdPath())) fs.mkdirpSync(instance.absoluteCwdPath());\n\n    // command parsing\n    const tmpStartCmd = instance.parseTextParams(instance.config.startCommand);\n    const commandList = commandStringToArray(tmpStartCmd);\n    const commandExeFile = commandList[0];\n    const commandParameters = commandList.slice(1);\n    if (commandList.length === 0) {\n      throw new StartupError($t(\"TXT_CODE_general_start.cmdEmpty\"));\n    }\n\n    const runAsConfig = await getRunAsUserParams(instance);\n\n    logger.info(\"----------------\");\n    logger.info($t(\"TXT_CODE_general_start.startInstance\", { source: source }));\n    logger.info($t(\"TXT_CODE_general_start.instanceUuid\", { uuid: instance.instanceUuid }));\n    logger.info($t(\"TXT_CODE_general_start.startCmd\", { cmdList: JSON.stringify(commandList) }));\n    logger.info($t(\"TXT_CODE_general_start.cwd\", { cwd: instance.absoluteCwdPath() }));\n    logger.info($t(\"TXT_CODE_general_start.runAs\", { user: runAsConfig.runAsName }));\n    logger.info(\"----------------\");\n\n    if (runAsConfig.isEnableRunAs) {\n      instance.println(\"INFO\", $t(\"TXT_CODE_ba09da46\", { name: runAsConfig.runAsName }));\n    }\n\n    // create child process\n    const subProcess = spawn(commandExeFile, commandParameters, {\n      ...runAsConfig,\n      cwd: instance.absoluteCwdPath(),\n      stdio: \"pipe\",\n      windowsHide: true,\n      env: instance.generateEnv(),\n      // Do not detach the child process;\n      // otherwise, an abnormal exit of the parent process may cause the child process to continue running,\n      // leading to an abnormal instance state.\n      detached: false\n    });\n\n    // child process creation result check\n    if (!subProcess || !subProcess.pid) {\n      instance.println(\n        \"ERROR\",\n        $t(\"TXT_CODE_general_start.pidErr\", {\n          startCommand: instance.config.startCommand,\n          commandExeFile: commandExeFile,\n          commandParameters: JSON.stringify(commandParameters)\n        })\n      );\n      throw new StartupError($t(\"TXT_CODE_general_start.startErr\"));\n    }\n\n    // create process adapter\n    const processAdapter = new ProcessAdapter(subProcess);\n\n    // generate open event\n    instance.started(processAdapter);\n    logger.info(\n      $t(\"TXT_CODE_general_start.startSuccess\", {\n        instanceUuid: instance.instanceUuid,\n        pid: subProcess.pid\n      })\n    );\n    instance.println(\"INFO\", $t(\"TXT_CODE_general_start.startOrdinaryTerminal\"));\n    instance.println(\"INFO\", $t(\"TXT_CODE_b50ffba8\"));\n  }\n}\n","import { $t } from \"../../../i18n\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\n\nexport default class GeneralStopCommand extends InstanceCommand {\n  constructor() {\n    super(\"StopCommand\");\n  }\n\n  async exec(instance: Instance) {\n    const stopCommand = instance.config.stopCommand;\n    if (instance.status() === Instance.STATUS_STOP || !instance.process)\n      return instance.failure(new Error($t(\"TXT_CODE_general_stop.notRunning\")));\n\n    instance.status(Instance.STATUS_STOPPING);\n    instance.ignoreEventTaskOnce();\n\n    const stopCommandList = stopCommand.split(\"\\n\");\n    for (const stopCommand of stopCommandList) {\n      await instance.execPreset(\"command\", stopCommand);\n    }\n\n    instance.print(\"\\n\");\n    instance.println(\"INFO\", $t(\"TXT_CODE_pty_stop.execCmd\", { stopCommand: `\\n${stopCommand}` }));\n\n    const cacheStartCount = instance.startCount;\n\n    // If the instance is still in the stopped state after 10 minutes, restore the state\n    setTimeout(() => {\n      if (\n        instance.status() === Instance.STATUS_STOPPING &&\n        instance.startCount === cacheStartCount\n      ) {\n        instance.println(\"ERROR\", $t(\"TXT_CODE_general_stop.stopErr\"));\n        instance.status(Instance.STATUS_RUNNING);\n      }\n    }, 1000 * 60 * 10);\n\n    return instance;\n  }\n}\n","import { $t } from \"../../../i18n\";\nimport { InstanceUpdateAction } from \"../../../service/instance_update_action\";\nimport logger from \"../../../service/log\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\n\nexport default class GeneralUpdateCommand extends InstanceCommand {\n  private updateTask?: InstanceUpdateAction;\n\n  constructor() {\n    super(\"GeneralUpdateCommand\");\n  }\n\n  private stopped(instance: Instance) {\n    instance.asynchronousTask = undefined;\n    instance.setLock(false);\n    instance.status(Instance.STATUS_STOP);\n  }\n\n  async exec(instance: Instance) {\n    if (instance.status() !== Instance.STATUS_STOP && instance.status() !== Instance.STATUS_BUSY)\n      return instance.failure(new Error($t(\"TXT_CODE_general_update.statusErr_notStop\")));\n    if (instance.asynchronousTask)\n      return instance.failure(new Error($t(\"TXT_CODE_general_update.statusErr_otherProgress\")));\n\n    try {\n      instance.setLock(true);\n      instance.asynchronousTask = this;\n      instance.status(Instance.STATUS_BUSY);\n\n      this.updateTask = new InstanceUpdateAction(instance);\n      await this.updateTask?.start();\n      await this.updateTask?.wait();\n    } catch (err: any) {\n      instance.println(\n        $t(\"TXT_CODE_general_update.update\"),\n        $t(\"TXT_CODE_general_update.error\", { err: err })\n      );\n    } finally {\n      this.stopped(instance);\n    }\n  }\n\n  async stop(instance: Instance): Promise<void> {\n    instance.asynchronousTask = undefined;\n    logger.info(\n      $t(\"TXT_CODE_general_update.terminateUpdate\", { instanceUuid: instance.instanceUuid })\n    );\n    instance.println(\n      $t(\"TXT_CODE_general_update.update\"),\n      $t(\"TXT_CODE_general_update.terminateUpdate\", { instanceUuid: instance.instanceUuid })\n    );\n    instance.println(\n      $t(\"TXT_CODE_general_update.update\"),\n      $t(\"TXT_CODE_general_update.killProcess\")\n    );\n    await this.updateTask?.stop();\n    this.updateTask = undefined;\n  }\n}\n","import Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\nimport { MCServerStatus, toNumber } from \"mcsmanager-common\";\n\nexport default class PingJavaMinecraftServerCommand extends InstanceCommand {\n  constructor() {\n    super(\"PingJavaMinecraftServerCommand\");\n  }\n\n  async exec(instance: Instance) {\n    const host = instance.config.pingConfig.ip || \"localhost\";\n    try {\n      if (instance.config.pingConfig.port) {\n        const result = await new MCServerStatus(instance.config.pingConfig.port, host).getStatus();\n        if (result.online) {\n          instance.info.mcPingOnline = true;\n          instance.info.currentPlayers = toNumber(result.current_players) ?? 0;\n          instance.info.maxPlayers = toNumber(result.max_players) ?? 0;\n          instance.info.version = result.version;\n          instance.info.latency = toNumber(result.latency) ?? 0;\n        } else {\n          instance.resetPingInfo();\n        }\n        return result;\n      }\n    } catch (error) {\n      instance.resetPingInfo();\n      // ignore error\n    }\n    return null;\n  }\n}\n","import InstanceCommand from \"./base/command\";\n\nexport default class NullCommand extends InstanceCommand {\n  constructor() {\n    super(\"NullCommand\");\n  }\n  async exec() {\n    // Do nothing.....\n  }\n}\n","import { ProcessConfig } from \"../instance/process_config\";\nimport pidusage from \"pidusage\";\nimport InstanceCommand from \"./base/command\";\nimport Instance from \"../instance/instance\";\n\nexport default class ProcessInfoCommand extends InstanceCommand {\n  constructor() {\n    super(\"ProcessInfo\");\n  }\n  async exec(instance: Instance): Promise<Object> {\n    let info: any = {\n      cpu: 0, // percentage (from 0 to 100*vcore)\n      memory: 0, // bytes\n      ppid: 0, // PPID\n      pid: 0, // PID\n      ctime: 0, // ms user + system time\n      elapsed: 0, // ms since the start of the process\n      timestamp: 0 // ms since epoch\n    };\n    if (instance.process && instance.process.pid) {\n      info = await pidusage(instance.process.pid);\n    }\n    return info;\n  }\n}\n","import Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\nimport { GoPtyProcessAdapter } from \"./pty_start\";\n\nexport default class PtyResizeCommand extends InstanceCommand {\n  constructor() {\n    super(\"ResizeTTY\");\n  }\n\n  async exec(instance: Instance): Promise<any> {\n    const pty = instance.process as Partial<GoPtyProcessAdapter>;\n    if (typeof pty?.resize === \"function\") {\n      const { w, h } = instance.computeTerminalSize();\n      pty?.resize(w, h);\n    }\n  }\n}\n","import { ChildProcess, ChildProcessWithoutNullStreams, spawn } from \"child_process\";\nimport EventEmitter from \"events\";\nimport fs from \"fs-extra\";\nimport { killProcess } from \"mcsmanager-common\";\nimport os from \"os\";\nimport path from \"path\";\nimport readline from \"readline\";\nimport { Writable } from \"stream\";\nimport { v4 } from \"uuid\";\nimport { PTY_PATH } from \"../../../const\";\nimport { $t } from \"../../../i18n\";\nimport logger from \"../../../service/log\";\nimport Instance from \"../../instance/instance\";\nimport { IInstanceProcess } from \"../../instance/interface\";\nimport { commandStringToArray } from \"../base/command_parser\";\nimport FunctionDispatcher from \"../dispatcher\";\nimport AbsStartCommand from \"../start\";\nimport { getRunAsUserParams } from \"../../../tools/system_user\";\n\ninterface IPtySubProcessCfg {\n  pid: number;\n}\n\n// Error exception at startup\nclass StartupError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\nconst GO_PTY_MSG_TYPE = {\n  RESIZE: 0x04\n};\n\n// process adapter\nexport class GoPtyProcessAdapter extends EventEmitter implements IInstanceProcess {\n  private pipeClient?: Writable;\n\n  constructor(\n    private readonly process: ChildProcess,\n    public readonly pid: number,\n    public readonly pipeName: string\n  ) {\n    super();\n    process.stdout?.on(\"data\", (text) => this.emit(\"data\", text));\n    process.stderr?.on(\"data\", (text) => this.emit(\"data\", text));\n    process.on(\"exit\", (code) => this.emit(\"exit\", code));\n    this.initNamedPipe();\n  }\n\n  private async initNamedPipe() {\n    try {\n      const fd = await fs.open(this.pipeName, \"w\");\n      const writePipe = fs.createWriteStream(\"\", { fd });\n      writePipe.on(\"close\", () => {});\n      writePipe.on(\"end\", () => {});\n      writePipe.on(\"error\", (err) => {\n        logger.error(\"Pipe error:\", this.pipeName, err);\n      });\n      this.pipeClient = writePipe;\n    } catch (error) {\n      throw new Error(\n        $t(\"TXT_CODE_9d1d244f\", {\n          pipeName: error\n        })\n      );\n    }\n  }\n\n  public resize(w: number, h: number) {\n    const MAX_W = 900;\n    if (w > MAX_W) w = MAX_W;\n    if (h > MAX_W) h = MAX_W;\n    const resizeStruct = JSON.stringify({ width: Number(w), height: Number(h) });\n    const len = resizeStruct.length;\n    const lenBuff = Buffer.alloc(2);\n    lenBuff.writeInt16BE(len, 0);\n    const buf = Buffer.from([GO_PTY_MSG_TYPE.RESIZE, ...lenBuff, ...Buffer.from(resizeStruct)]);\n    this.writeToNamedPipe(buf);\n  }\n\n  public writeToNamedPipe(data: Buffer) {\n    this.pipeClient?.write(data);\n  }\n\n  public write(data?: string) {\n    return this.process.stdin?.write(data);\n  }\n\n  public kill(s?: any) {\n    return killProcess(this.pid, this.process, s);\n  }\n\n  public async destroy() {\n    for (const n of this.eventNames()) this.removeAllListeners(n);\n    if (this.process.stdout)\n      for (const eventName of this.process.stdout.eventNames())\n        this.process.stdout.removeAllListeners(eventName);\n    if (this.process.stderr)\n      for (const eventName of this.process.stderr.eventNames())\n        this.process.stderr.removeAllListeners(eventName);\n    if (this.process)\n      for (const eventName of this.process.eventNames())\n        this.process.stdout?.removeAllListeners(eventName);\n    if (this.pipeClient)\n      for (const eventName of this.pipeClient.eventNames())\n        this.pipeClient.removeAllListeners(eventName);\n    this.pipeClient?.destroy();\n    this.process?.stdout?.destroy();\n    this.process?.stderr?.destroy();\n    if (this.process?.exitCode === null) {\n      this.process.kill(\"SIGTERM\");\n      this.process.kill(\"SIGKILL\");\n    }\n    fs.remove(this.pipeName, (err) => {});\n  }\n}\n\nexport default class PtyStartCommand extends AbsStartCommand {\n  readPtySubProcessConfig(subProcess: ChildProcessWithoutNullStreams): Promise<IPtySubProcessCfg> {\n    return new Promise((r, j) => {\n      const errConfig = {\n        pid: 0\n      };\n      const rl = readline.createInterface({\n        input: subProcess.stdout,\n        crlfDelay: Infinity\n      });\n      rl.on(\"line\", (line = \"\") => {\n        try {\n          rl.removeAllListeners();\n          const cfg = JSON.parse(line) as IPtySubProcessCfg;\n          if (cfg.pid == null) throw new Error(\"Error\");\n          r(cfg);\n        } catch (error: any) {\n          r(errConfig);\n        }\n      });\n      setTimeout(() => {\n        r(errConfig);\n      }, 1000 * 3);\n    });\n  }\n\n  async createProcess(instance: Instance) {\n    if (\n      !instance.config.startCommand ||\n      !instance.hasCwdPath() ||\n      !instance.config.ie ||\n      !instance.config.oe\n    )\n      throw new StartupError($t(\"TXT_CODE_pty_start.cmdErr\"));\n    if (!fs.existsSync(instance.absoluteCwdPath())) fs.mkdirpSync(instance.absoluteCwdPath());\n    if (!path.isAbsolute(path.normalize(instance.absoluteCwdPath())))\n      throw new StartupError($t(\"TXT_CODE_pty_start.mustAbsolutePath\"));\n\n    // PTY mode correctness check\n    logger.info($t(\"TXT_CODE_pty_start.startPty\", { source: \"\" }));\n    let checkPtyEnv = true;\n\n    if (!fs.existsSync(PTY_PATH)) {\n      instance.println(\"ERROR\", $t(\"TXT_CODE_pty_start.startErr\"));\n      checkPtyEnv = false;\n    }\n\n    if (checkPtyEnv === false) {\n      instance.config.terminalOption.pty = false;\n      await instance.forceExec(new FunctionDispatcher());\n      await instance.execPreset(\"start\");\n      return;\n    }\n\n    // Set the startup state & increase the number of startups\n    instance.status(Instance.STATUS_STARTING);\n    instance.startCount++;\n\n    // command parsing\n    let commandList: string[] = [];\n    const tmpStarCmd = instance.parseTextParams(instance.config.startCommand);\n    if (os.platform() === \"win32\") {\n      // windows: cmd.exe /c {{startCommand}}\n      commandList = [tmpStarCmd];\n    } else {\n      // other\n      commandList = commandStringToArray(tmpStarCmd);\n    }\n\n    if (commandList.length === 0)\n      return instance.failure(new StartupError($t(\"TXT_CODE_pty_start.cmdEmpty\")));\n\n    const pipeId = v4();\n    const pipeLinuxDir = \"/tmp/mcsmanager-instance-pipe\";\n    if (!fs.existsSync(pipeLinuxDir)) fs.mkdirsSync(pipeLinuxDir);\n    let pipeName = `${pipeLinuxDir}/pipe-${pipeId}`;\n    if (os.platform() === \"win32\") {\n      pipeName = `\\\\\\\\.\\\\pipe\\\\mcsmanager-${pipeId}`;\n    }\n\n    const runAsConfig = await getRunAsUserParams(instance);\n\n    // Prepare PTY parameters\n    const ptyParameter = [\n      \"-size\",\n      `${instance.config.terminalOption.ptyWindowCol},${instance.config.terminalOption.ptyWindowRow}`,\n      \"-coder\",\n      instance.config.oe,\n      \"-dir\",\n      instance.absoluteCwdPath(),\n      \"-fifo\",\n      pipeName,\n      \"-cmd\",\n      JSON.stringify(commandList)\n    ];\n\n    logger.info(\"----------------\");\n    logger.info($t(\"TXT_CODE_pty_start.sourceRequest\", { source: \"\" }));\n    logger.info($t(\"TXT_CODE_pty_start.instanceUuid\", { instanceUuid: instance.instanceUuid }));\n    logger.info($t(\"TXT_CODE_pty_start.startCmd\", { cmd: commandList.join(\" \") }));\n    logger.info($t(\"TXT_CODE_pty_start.ptyPath\", { path: PTY_PATH }));\n    logger.info($t(\"TXT_CODE_pty_start.ptyParams\", { param: ptyParameter.join(\" \") }));\n    logger.info($t(\"TXT_CODE_pty_start.ptyCwd\", { cwd: instance.absoluteCwdPath() }));\n    logger.info($t(\"TXT_CODE_general_start.runAs\", { user: runAsConfig.runAsName }));\n    logger.info(\"----------------\");\n\n    if (runAsConfig.isEnableRunAs) {\n      instance.println(\"INFO\", $t(\"TXT_CODE_ba09da46\", { name: runAsConfig.runAsName }));\n    }\n\n    // create pty child process\n    const subProcess = spawn(PTY_PATH, ptyParameter, {\n      ...runAsConfig,\n      cwd: path.dirname(PTY_PATH),\n      stdio: \"pipe\",\n      windowsHide: true,\n      env: instance.generateEnv(),\n      // Do not detach the child process;\n      // otherwise, an abnormal exit of the parent process may cause the child process to continue running,\n      // leading to an abnormal instance state.\n      detached: false\n    });\n\n    // pty child process creation result check\n    if (!subProcess || !subProcess.pid) {\n      instance.println(\n        \"ERROR\",\n        $t(\"TXT_CODE_pty_start.pidErr\", {\n          startCommand: instance.config.startCommand,\n          path: PTY_PATH,\n          params: JSON.stringify(ptyParameter)\n        })\n      );\n      throw new StartupError($t(\"TXT_CODE_pty_start.instanceStartErr\"));\n    }\n\n    // create process adapter\n    const ptySubProcessCfg = await this.readPtySubProcessConfig(subProcess);\n    const processAdapter = new GoPtyProcessAdapter(subProcess, ptySubProcessCfg.pid, pipeName);\n\n    if (subProcess.exitCode !== null || processAdapter.pid == null || processAdapter.pid === 0) {\n      instance.println(\n        \"ERROR\",\n        $t(\"TXT_CODE_pty_start.pidErr\", {\n          startCommand: instance.config.startCommand,\n          path: PTY_PATH,\n          params: JSON.stringify(ptyParameter)\n        })\n      );\n      throw new StartupError($t(\"TXT_CODE_pty_start.instanceStartErr\"));\n    }\n\n    // generate open event\n    instance.started(processAdapter);\n\n    logger.info(\n      $t(\"TXT_CODE_pty_start.startSuccess\", {\n        instanceUuid: instance.instanceUuid,\n        pid: ptySubProcessCfg.pid\n      })\n    );\n    instance.println(\"INFO\", $t(\"TXT_CODE_pty_start.startEmulatedTerminal\"));\n    instance.println(\"INFO\", $t(\"TXT_CODE_b50ffba8\"));\n  }\n}\n","import { $t } from \"../../i18n\";\nimport Instance from \"../instance/instance\";\nimport InstanceCommand from \"./base/command\";\n\nexport class StartupError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\nexport default abstract class AbsStartCommand extends InstanceCommand {\n  private async sleep() {\n    return new Promise((ok) => {\n      setTimeout(ok, 1000 * 2);\n    });\n  }\n\n  async exec(instance: Instance) {\n    if (instance.status() !== Instance.STATUS_STOP)\n      return instance.failure(new StartupError($t(\"TXT_CODE_start.instanceNotDown\")));\n\n    try {\n      instance.setLock(true);\n      instance.status(Instance.STATUS_STARTING);\n      instance.startCount++;\n\n      instance.startTimestamp = Date.now();\n\n      if (instance.config.endTime) {\n        const endTime = instance.config.endTime;\n        if (endTime) {\n          if (endTime <= instance.startTimestamp) {\n            throw new Error($t(\"TXT_CODE_start.instanceMaturity\"));\n          }\n        }\n      }\n\n      instance.println(\"INFO\", $t(\"TXT_CODE_start.startInstance\"));\n\n      // prevent the dead-loop from starting\n      await this.sleep();\n\n      return await this.createProcess(instance);\n    } catch (error: any) {\n      instance.execPreset(\"kill\");\n      instance.releaseResources();\n      instance.status(Instance.STATUS_STOP);\n      instance.failure(error);\n    } finally {\n      instance.setLock(false);\n    }\n  }\n\n  protected abstract createProcess(instance: Instance): Promise<void>;\n}\n","import { t } from \"i18next\";\nimport Instance from \"../../instance/instance\";\nimport InstanceCommand from \"../base/command\";\nimport Rcon from \"rcon-srcds\";\nimport { isExitCommand } from \"../general/general_command\";\n\nasync function sendRconCommand(instance: Instance, command: string) {\n  const targetIp = instance.config.rconIp || \"localhost\";\n  const rconServer = new Rcon({\n    port: instance.config.rconPort,\n    host: targetIp,\n    encoding: \"utf8\",\n    timeout: 1000 * 6\n  });\n  await rconServer.authenticate(instance.config.rconPassword);\n  if (!rconServer.isAuthenticated()) {\n    throw new Error(t(\"TXT_CODE_1b1b2934\"));\n  }\n  return new Promise((resolve, reject) => {\n    let hasResult = false;\n    setTimeout(() => {\n      if (!hasResult) {\n        rconServer.disconnect().catch(() => {});\n        instance.print(`[RCON] ${t(\"TXT_CODE_386f2d66\")}\\n`);\n        resolve(\"\");\n      }\n    }, 1000 * 10);\n    rconServer\n      .execute(command)\n      .then((res) => {\n        hasResult = true;\n        instance.print(`[RCON] ${res}\\n`);\n        rconServer.disconnect().catch(() => {});\n        resolve(res);\n      })\n      .catch((err) => {\n        reject(err);\n      });\n    instance.print(`[RCON] <<< ${command}\\n`);\n  });\n}\n\nexport default class RconCommand extends InstanceCommand {\n  constructor(public readonly cmd?: string) {\n    super(\"RconSendCommand\");\n  }\n\n  async exec(instance: Instance, text?: string): Promise<any> {\n    if (isExitCommand(instance, text)) return;\n    try {\n      if (text || this.cmd) {\n        await sendRconCommand(instance, String(text ?? this.cmd));\n      }\n    } catch (error: any) {\n      instance.println(\"RCON ERROR\", error?.message || error);\n    }\n  }\n}\n","import Dockerode from \"dockerode\";\nimport { DefaultDocker } from \"../../../service/docker_service\";\nimport Instance from \"../../instance/instance\";\nimport { ILifeCycleTask } from \"../../instance/life_cycle\";\n\nexport default class DockerStatsTask implements ILifeCycleTask {\n  private static defaultDocker = new DefaultDocker();\n\n  public status: number = 0;\n  public name: string = \"DockerStats\";\n  private task: NodeJS.Timeout | null = null;\n  private lastStatsMap: Map<string, { [key: string]: number | undefined; timestamp: number }> =\n    new Map();\n\n  private calculateRealTimeRate<T extends Record<string, number | undefined>>(\n    currentValues: T,\n    statsName: string\n  ): T {\n    const currentTimestamp = Date.now();\n    const result = {} as T;\n    const lastStats = this.lastStatsMap.get(statsName);\n\n    if (lastStats) {\n      const timeDelta = (currentTimestamp - lastStats.timestamp) / 1000;\n\n      if (timeDelta > 0) {\n        for (const key in currentValues) {\n          const currentValue = currentValues[key];\n          const lastValue = lastStats[key];\n\n          if (currentValue !== undefined && lastValue !== undefined) {\n            result[key] = Math.max(0, (currentValue - lastValue) / timeDelta) as T[Extract<\n              keyof T,\n              string\n            >];\n          }\n        }\n      }\n    }\n\n    this.lastStatsMap.set(statsName, {\n      ...currentValues,\n      timestamp: currentTimestamp\n    });\n\n    return result;\n  }\n\n  private getNetworkInterface(stats: Dockerode.NetworkStats) {\n    let networkInterface = stats?.[\"eth0\"];\n    if (!networkInterface) {\n      for (const key in stats.networks) {\n        if (key.startsWith(\"eth\")) {\n          networkInterface = stats[key];\n          break;\n        }\n      }\n    }\n    if (!networkInterface) {\n      const networkKeys = Object.keys(stats.networks).filter((v) => !v.startsWith(\"lo0\"));\n      networkInterface = stats[networkKeys?.[0]] ?? undefined;\n    }\n\n    const currentValues = {\n      rxBytes: networkInterface?.rx_bytes ?? undefined,\n      txBytes: networkInterface?.tx_bytes ?? undefined\n    };\n\n    return this.calculateRealTimeRate(currentValues, \"network\");\n  }\n\n  private getCpuUsage(stats: Dockerode.ContainerStats) {\n    if (!stats?.cpu_stats?.cpu_usage) return undefined;\n    const cpuDelta =\n      stats.cpu_stats.cpu_usage.total_usage - stats.precpu_stats.cpu_usage.total_usage;\n    const systemCpuDelta = stats.cpu_stats.system_cpu_usage - stats.precpu_stats.system_cpu_usage;\n    let numberCpus = 1;\n    if (Array.isArray(stats.cpu_stats.cpu_usage.percpu_usage)) {\n      numberCpus = stats.cpu_stats.cpu_usage.percpu_usage.length;\n    } else if (typeof stats.cpu_stats.online_cpus === \"number\") {\n      numberCpus = stats.cpu_stats.online_cpus;\n    }\n    if (systemCpuDelta > 0 && cpuDelta > 0) {\n      return Math.ceil((cpuDelta / systemCpuDelta) * numberCpus * 100.0);\n    }\n    return 0;\n  }\n\n  async updateStats(containerId: string, instance: Instance) {\n    try {\n      const container = DockerStatsTask.defaultDocker.getContainer(containerId);\n      const stats = await container.stats({ stream: false });\n      const { rxBytes, txBytes } = this.getNetworkInterface(stats.networks);\n\n      const memoryUsage = stats.memory_stats.usage - (stats.memory_stats.stats.cache ?? 0);\n      const memoryUsagePercent = Math.ceil((memoryUsage / stats.memory_stats.limit) * 100);\n\n      const result = {\n        cpuUsage: this.getCpuUsage(stats),\n        rxBytes,\n        txBytes,\n        memoryUsagePercent,\n        memoryUsage,\n        memoryLimit: stats.memory_stats.limit\n      };\n      instance.info = { ...instance.info, ...result };\n    } catch (error) {\n      // ignore error\n    }\n  }\n\n  async start(instance: Instance) {\n    const containerId = String(instance.process?.pid ?? \"\");\n    if (!containerId) return;\n    if (!instance.config.docker?.image || instance.config.processType !== \"docker\") return;\n    this.task = setInterval(() => {\n      this.updateStats(containerId, instance);\n    }, 4000);\n  }\n\n  async stop(instance: Instance) {\n    if (this.task) {\n      clearInterval(this.task);\n      this.task = null;\n    }\n    this.lastStatsMap.clear();\n    instance.info = {\n      ...instance.info,\n      cpuUsage: undefined,\n      rxBytes: undefined,\n      txBytes: undefined,\n      memoryUsagePercent: undefined,\n      readBytes: undefined,\n      writeBytes: undefined\n    };\n  }\n}\n","import { ILifeCycleTask } from \"../../instance/life_cycle\";\nimport Instance from \"../../instance/instance\";\nimport { MCServerStatus } from \"mcsmanager-common\";\n\n// When the instance is running, continue to check the expiration time\nexport default class PingMinecraftServerTask implements ILifeCycleTask {\n  public status: number = 0;\n  public name: string = \"TimeCheck\";\n\n  private task?: NodeJS.Timeout;\n\n  async start(instance: Instance) {\n    this.task = setInterval(() => {\n      instance.execPreset(\"refreshPlayers\");\n    }, 1000 * 60);\n  }\n\n  async stop(instance: Instance) {\n    instance.resetPingInfo();\n    clearInterval(this.task);\n    this.task = undefined;\n  }\n}\n","import { ILifeCycleTask } from \"../../instance/life_cycle\";\nimport Instance from \"../../instance/instance\";\n\n// When the instance is running, continue to check the expiration time\nexport default class TimeCheck implements ILifeCycleTask {\n  public status: number = 0;\n  public name: string = \"TimeCheck\";\n\n  private task: any = null;\n\n  async start(instance: Instance) {\n    this.task = setInterval(async () => {\n      if (instance.config.endTime) {\n        const endTime = instance.config.endTime;\n        if (endTime) {\n          const currentTime = Date.now();\n          if (endTime <= currentTime) {\n            // Expired, execute the end process command\n            await instance.execPreset(\"kill\");\n            clearInterval(this.task);\n          }\n        }\n      }\n    }, 1000 * 60 * 60);\n  }\n\n  async stop(instance: Instance) {\n    clearInterval(this.task);\n  }\n}\n","import { v4 } from \"uuid\";\nimport StorageSubsystem from \"../common/system_storage\";\n\nfunction builderPassword() {\n  const a = `${v4().replace(/\\-/gim, \"\")}`;\n  const b = a.slice(0, a.length / 2 - 1);\n  const c = `${v4().replace(/\\-/gim, \"\")}`;\n  return b + c;\n}\n\n// @Entity\nclass Config {\n  public version = 2;\n  public ip = \"\";\n  public port = 24444;\n  public prefix = \"\";\n  public key = builderPassword();\n  public maxFileTask = 2;\n  public maxZipFileSize = 200;\n  public language = \"en_us\";\n  public defaultInstancePath = \"\";\n  public allocatablePortRange = [10010, 65500];\n  public currentAllocatablePort = 10010;\n  public portAssignInterval = 5;\n\n  // default: Unlimited, if set 40 => (40 packets * 64KB)/s => 2.5MB/s\n  public uploadSpeedRate = 0;\n  // default: Unlimited, if set 32 => (32 packets * 64KB)/s => 2MB/s\n  public downloadSpeedRate = 0;\n}\n\n// daemon configuration class\nclass GlobalConfiguration {\n  public config = new Config();\n  private static readonly ID = \"global\";\n\n  load() {\n    let config: Config = StorageSubsystem.load(\"Config\", Config, GlobalConfiguration.ID);\n    if (config == null) {\n      config = new Config();\n      StorageSubsystem.store(\"Config\", GlobalConfiguration.ID, config);\n    }\n    this.config = config;\n  }\n\n  store() {\n    StorageSubsystem.store(\"Config\", GlobalConfiguration.ID, this.config);\n  }\n}\n\nclass GlobalEnv {\n  public fileTaskCount = 0;\n}\n\nconst globalConfiguration = new GlobalConfiguration();\nconst globalEnv = new GlobalEnv();\n\nexport { Config, globalConfiguration, globalEnv };\n","import { Socket } from \"socket.io\";\n\nexport default class RouterContext {\n  constructor(\n    public uuid: string | null,\n    public socket: Socket,\n    public session?: any,\n    public event?: string\n  ) {}\n\n  public response(data: any) {\n    return this;\n  }\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport * as lockfile from \"proper-lockfile\";\nimport logger from \"../service/log\";\nimport FileManager from \"../service/system_file\";\nimport uploadManager from \"../service/upload_manager\";\n\ntype ChunkRange = { start: number; end: number };\n\nexport default class FileWriter {\n  readonly path: string;\n  id?: string;\n  private releaseLock?: () => Promise<void>;\n  private fd: number | null = null;\n  readonly received: ChunkRange[] = [];\n  lastUpdate: number = Date.now();\n\n  constructor(\n    private cwd: string,\n    private filename: string,\n    public readonly size: number,\n    private unzip: boolean,\n    private zipCode: string,\n    filePath: string\n  ) {\n    if (!FileManager.checkFileName(path.basename(this.filename)))\n      throw new Error(\"Access denied: Malformed file name\");\n\n    this.path = filePath;\n  }\n\n  static async getPath(cwd: string, dir: string, filename: string, overwrite: boolean) {\n    const fileManager = new FileManager(cwd);\n\n    const ext = path.extname(filename);\n    const basename = path.basename(filename, ext);\n\n    let tempFileSaveName = basename + ext;\n    let counter = 1;\n\n    const checkFile = async (name: string) => {\n      const absolutePath = fileManager.toAbsolutePath(path.normalize(path.join(dir, name)));\n      const isLock = await lockfile\n        .check(absolutePath)\n        .then((isLock) => isLock)\n        .catch(() => false);\n      const isAccess = await fs\n        .access(absolutePath)\n        .then(() => true)\n        .catch(() => false);\n      return isAccess && !isLock && !overwrite;\n    };\n\n    while (await checkFile(tempFileSaveName)) {\n      if (counter == 1) {\n        tempFileSaveName = `${basename}-copy${ext}`;\n      } else {\n        tempFileSaveName = `${basename}-copy-${counter}${ext}`;\n      }\n      counter++;\n      if (counter > 100) {\n        throw new Error(\"Access denied: File name already exists!\");\n      }\n    }\n\n    const fileSaveRelativePath = path.normalize(path.join(dir, tempFileSaveName));\n\n    if (!fileManager.checkPath(fileSaveRelativePath))\n      throw new Error(\"Access denied: Invalid destination\");\n\n    return fileManager.toAbsolutePath(fileSaveRelativePath);\n  }\n\n  async init() {\n    if (this.fd != null) return;\n    let locked = false;\n    try {\n      if (lockfile.checkSync(this.path)) locked = true;\n    } catch {}\n    if (locked) {\n      throw new Error(\"File is locked\");\n    }\n    try {\n      this.fd = await fs.open(this.path, \"w+\");\n      this.releaseLock = await lockfile.lock(this.path);\n      await fs.ftruncate(this.fd, this.size);\n    } catch (e) {\n      if (typeof this.releaseLock === \"function\") await this.releaseLock();\n      this.releaseLock = undefined;\n      throw e;\n    }\n  }\n\n  async write(offset: number, chunk: Buffer) {\n    this.lastUpdate = Date.now();\n    if (offset + chunk.length > this.size) throw new Error(\"Write exceeds file size limit\");\n    if (this.fd === null) throw new Error(\"File is not opened\");\n    await fs.write(this.fd, chunk, 0, chunk.length, offset);\n\n    this.addWrittenRange(offset, offset + chunk.length);\n    if (this.isFullyCovered()) {\n      this.done().catch((e) => {\n        logger.error(\"Error completing file upload:\", e);\n      }); // async\n    }\n  }\n\n  async done() {\n    if (this.fd != null) {\n      await fs.close(this.fd);\n      this.fd = null;\n      await this.releaseLock!();\n    }\n\n    if (this.id != null) {\n      uploadManager.delete(this.id);\n    }\n\n    logger.info(\"Browser Uploaded File:\", this.path);\n\n    if (this.unzip) {\n      const instanceFiles = new FileManager(this.cwd);\n      await instanceFiles.unzip(this.path, \".\", this.zipCode);\n      logger.info(\"File unzipped:\", this.path);\n    }\n  }\n\n  async stop() {\n    if (this.fd != null) {\n      await fs.close(this.fd);\n      this.fd = null;\n      await this.releaseLock!();\n    }\n    if (this.id != null) {\n      uploadManager.delete(this.id);\n    }\n    await fs.remove(this.path);\n    logger.info(\"Browser Upload Task Stopped:\", this.path);\n  }\n\n  private addWrittenRange(start: number, end: number): void {\n    if (start > end) return;\n\n    let i = 0;\n    let ranges = this.received;\n    while (i < ranges.length && ranges[i].end < start - 1) i++;\n\n    let mergeStart = start,\n      mergeEnd = end;\n    let removeCount = 0;\n\n    while (i + removeCount < ranges.length && ranges[i + removeCount].start <= end + 1) {\n      mergeStart = Math.min(mergeStart, ranges[i + removeCount].start);\n      mergeEnd = Math.max(mergeEnd, ranges[i + removeCount].end);\n      removeCount++;\n    }\n\n    ranges.splice(i, removeCount, { start: mergeStart, end: mergeEnd });\n  }\n\n  private isFullyCovered(): boolean {\n    return (\n      this.received.length === 1 &&\n      this.received[0].start === 0 &&\n      this.received[0].end === this.size\n    );\n  }\n\n  private readStreamToHash(\n    filePath: string,\n    hash: any,\n    options?: { start: number; end: number }\n  ): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const stream = fs.createReadStream(filePath, options);\n      stream.on(\"data\", (chunk) => hash.update(chunk));\n      stream.on(\"end\", resolve);\n      stream.on(\"error\", reject);\n    });\n  }\n}\n","import os from \"os\";\nimport Instance from \"./instance\";\n\ninterface IActionCommand {\n  name: string;\n  command: string;\n}\n\ntype ProcessType = \"general\" | \"docker\";\n\n// @Entity\nexport default class InstanceConfig implements IGlobalInstanceConfig {\n  public nickname = \"Undefined\";\n  public startCommand = \"\";\n  public stopCommand = \"^C\";\n  public cwd = \".\";\n  public ie = \"utf-8\";\n  public oe = \"utf-8\";\n  public createDatetime = Date.now();\n  public lastDatetime = Date.now();\n  public type = Instance.TYPE_UNIVERSAL;\n  public tag: string[] = [];\n  public endTime: number = 0;\n  public fileCode: string = \"utf-8\";\n  public processType: ProcessType = \"general\";\n  public updateCommand: string = \"\";\n  public runAs: string = \"\";\n  public crlf = os.platform() === \"win32\" ? 2 : 1; // 1: \\n  2: \\r\\n\n  public category = 0;\n  public basePort = 0;\n\n  // Steam RCON protocol\n  public enableRcon = false;\n  public rconPassword = \"\";\n  public rconPort = 0;\n  public rconIp = \"\";\n\n  // custom command list\n  public actionCommandList: IActionCommand[] = [];\n\n  // terminal option\n  public terminalOption = {\n    haveColor: false,\n    pty: true,\n    ptyWindowCol: 164,\n    ptyWindowRow: 40\n  };\n\n  // Event task\n  public eventTask = {\n    autoStart: false,\n    autoRestart: false,\n    ignore: false\n  };\n\n  // Extend\n  public docker: IGlobalInstanceDockerConfig = {\n    containerName: \"\",\n    image: \"\",\n    ports: [],\n    extraVolumes: [],\n    memory: 0,\n    memorySwap: undefined,\n    memorySwappiness: undefined,\n    networkMode: \"bridge\",\n    networkAliases: [],\n    cpusetCpus: \"\",\n    cpuUsage: 0,\n    maxSpace: 0,\n    io: 0,\n    network: 0,\n    workingDir: \"/workspace/\",\n    env: [],\n    changeWorkdir: true\n  };\n\n  public pingConfig = {\n    ip: \"\",\n    port: 25565,\n    type: 1\n  };\n\n  public extraServiceConfig = {\n    openFrpTunnelId: \"\",\n    openFrpToken: \"\"\n  };\n}\n","import { randomUUID } from \"crypto\";\nimport { EventEmitter } from \"events\";\nimport { t } from \"i18next\";\nimport iconv from \"iconv-lite\";\nimport { configureEntityParams } from \"mcsmanager-common\";\nimport path from \"path\";\nimport { CircularBuffer } from \"../../common/string_cache\";\nimport StorageSubsystem from \"../../common/system_storage\";\nimport { STEAM_CMD_PATH } from \"../../const\";\nimport { $t } from \"../../i18n\";\nimport logger from \"../../service/log\";\nimport InstanceCommand from \"../commands/base/command\";\nimport FunctionDispatcher, { IPresetCommand } from \"../commands/dispatcher\";\nimport { OpenFrp } from \"../commands/task/openfrp\";\nimport { globalConfiguration } from \"../config\";\nimport InstanceConfig from \"./Instance_config\";\nimport { IInstanceProcess } from \"./interface\";\nimport { LifeCycleTaskManager } from \"./life_cycle\";\nimport { IExecutable, PresetCommandManager } from \"./preset\";\n\ninterface IInstanceInfo {\n  mcPingOnline: boolean;\n  currentPlayers: number;\n  maxPlayers: number;\n  version: string;\n  fileLock: number;\n  playersChart: { value: string }[];\n  openFrpStatus: boolean;\n  latency: number;\n  cpuUsage?: number;\n  memoryUsagePercent?: number;\n  rxBytes?: number;\n  txBytes?: number;\n  readBytes?: number;\n  writeBytes?: number;\n  memoryUsage?: number;\n  memoryLimit?: number;\n  allocatedPorts?: { host: number; container: number; protocol: string }[];\n}\n\ninterface IWatcherInfo {\n  terminalSize: {\n    w: number;\n    h: number;\n  };\n}\n\nconst TERM_TEXT_YELLOW = \"\\x1B[0;33;1m\";\nconst TERM_TEXT_GOLD = \"\\x1B[0;33m\"; // Gold §6\nconst TERM_RESET = \"\\x1B[0m\";\nconst IGNORE_TEXT = [\n  \"\\n\\n\",\n  TERM_TEXT_GOLD,\n  \"[MCSMANAGER] \",\n  TERM_RESET,\n  TERM_TEXT_YELLOW,\n  t(\"TXT_CODE_c5ed896f\"),\n  TERM_RESET,\n  \"\\n\\n\"\n].join(\"\");\n\nexport default class Instance extends EventEmitter {\n  public static readonly STATUS_BUSY = -1;\n  public static readonly STATUS_STOP = 0;\n  public static readonly STATUS_STOPPING = 1;\n  public static readonly STATUS_STARTING = 2;\n  public static readonly STATUS_RUNNING = 3;\n\n  public static readonly TYPE_UNIVERSAL = \"universal\";\n  public static readonly TYPE_MINECRAFT_JAVA = \"minecraft/java\";\n  public static readonly TYPE_MINECRAFT_BEDROCK = \"minecraft/bedrock\";\n\n  public instanceStatus: number = Instance.STATUS_STOP;\n  public instanceUuid: string = \"\";\n  public lock: boolean = false;\n  public startCount: number = 0;\n  public startTimestamp: number = 0;\n  public asynchronousTask?: IExecutable | null;\n  public openFrp?: OpenFrp;\n\n  public readonly lifeCycleTaskManager = new LifeCycleTaskManager(this);\n  public readonly presetCommandManager = new PresetCommandManager(this);\n\n  public config: InstanceConfig;\n\n  public info: IInstanceInfo = {\n    mcPingOnline: false,\n    currentPlayers: 0,\n    maxPlayers: 0,\n    version: \"\",\n    fileLock: 0,\n    playersChart: [],\n    openFrpStatus: false,\n    latency: 0,\n    allocatedPorts: []\n  };\n\n  public watchers: Map<string, IWatcherInfo> = new Map();\n\n  public process?: IInstanceProcess;\n\n  private outputLoopTask?: NodeJS.Timeout;\n  private outputBuffer = new CircularBuffer<string>(64);\n\n  // When initializing an instance, the instance must be initialized through uuid and configuration class, otherwise the instance will be unavailable\n  constructor(instanceUuid: string, config: InstanceConfig) {\n    super();\n\n    if (!instanceUuid || !config) throw new Error($t(\"TXT_CODE_instanceConf.initInstanceErr\"));\n\n    // Basic information\n    this.instanceStatus = Instance.STATUS_STOP;\n    this.instanceUuid = instanceUuid;\n\n    // Action lock\n    this.lock = false;\n\n    this.config = config;\n\n    this.process = undefined;\n    this.startCount = 0;\n  }\n\n  isStoppedOrBusy() {\n    return [Instance.STATUS_STOP, Instance.STATUS_BUSY].includes(this.status());\n  }\n\n  // Pass in instance configuration, loosely and dynamically set configuration items for instance parameters\n  parameters(cfg: any, persistence = true) {\n    // If the instance type changes, default commands and lifecycle events must be reset\n    if (cfg?.type && cfg?.type != this.config.type) {\n      if (!this.isStoppedOrBusy())\n        throw new Error($t(\"TXT_CODE_instanceConf.cantModifyInstanceType\"));\n      configureEntityParams(this.config, cfg, \"type\", String);\n      this.forceExec(new FunctionDispatcher());\n    }\n\n    if (cfg?.enableRcon != null && cfg?.enableRcon !== this.config.enableRcon) {\n      if (!this.isStoppedOrBusy()) throw new Error($t(\"TXT_CODE_bdfa3457\"));\n      configureEntityParams(this.config, cfg, \"enableRcon\", Boolean);\n      this.forceExec(new FunctionDispatcher());\n    }\n\n    if (cfg?.processType && cfg?.processType !== this.config.processType) {\n      if (!this.isStoppedOrBusy())\n        throw new Error($t(\"TXT_CODE_instanceConf.cantModifyProcessType\"));\n      configureEntityParams(this.config, cfg, \"processType\", String);\n      this.forceExec(new FunctionDispatcher());\n    }\n\n    // If the terminal type is changed, the default command must be reset\n    if (\n      cfg?.terminalOption?.pty != null &&\n      cfg?.terminalOption?.pty !== this.config.terminalOption.pty\n    ) {\n      if (!this.isStoppedOrBusy()) throw new Error($t(\"TXT_CODE_instanceConf.cantModifyPtyModel\"));\n      configureEntityParams(this.config.terminalOption, cfg.terminalOption, \"pty\", Boolean);\n      this.forceExec(new FunctionDispatcher());\n    }\n\n    // Only allow some configuration items to be modified when the server is stopped\n    if (this.isStoppedOrBusy() && cfg.terminalOption) {\n      configureEntityParams(this.config.terminalOption, cfg.terminalOption, \"ptyWindowCol\", Number);\n      configureEntityParams(this.config.terminalOption, cfg.terminalOption, \"ptyWindowRow\", Number);\n    }\n\n    if (cfg.tag instanceof Array) {\n      cfg.tag = cfg.tag.map((tag: any) => String(tag).trim());\n      this.config.tag = cfg.tag;\n    }\n\n    if (cfg?.extraServiceConfig) {\n      configureEntityParams(\n        this.config.extraServiceConfig,\n        cfg.extraServiceConfig,\n        \"isOpenFrp\",\n        Boolean\n      );\n      configureEntityParams(\n        this.config.extraServiceConfig,\n        cfg.extraServiceConfig,\n        \"openFrpToken\",\n        String\n      );\n      configureEntityParams(\n        this.config.extraServiceConfig,\n        cfg.extraServiceConfig,\n        \"openFrpTunnelId\",\n        String\n      );\n    }\n\n    configureEntityParams(this.config, cfg, \"nickname\", String);\n    configureEntityParams(this.config, cfg, \"startCommand\", String);\n    configureEntityParams(this.config, cfg, \"stopCommand\", String);\n    configureEntityParams(this.config, cfg, \"updateCommand\", String);\n    configureEntityParams(this.config, cfg, \"runAs\", String);\n    configureEntityParams(this.config, cfg, \"cwd\", String);\n    configureEntityParams(this.config, cfg, \"ie\", String);\n    configureEntityParams(this.config, cfg, \"oe\", String);\n    configureEntityParams(this.config, cfg, \"crlf\", Number);\n    configureEntityParams(this.config, cfg, \"endTime\", Number);\n    configureEntityParams(this.config, cfg, \"fileCode\", String);\n    configureEntityParams(this.config, cfg, \"rconPassword\", String);\n    configureEntityParams(this.config, cfg, \"rconPort\", Number);\n    configureEntityParams(this.config, cfg, \"rconIp\", String);\n    configureEntityParams(this.config, cfg, \"category\", Number);\n\n    if (cfg.docker) {\n      configureEntityParams(this.config.docker, cfg.docker, \"containerName\", String);\n      configureEntityParams(this.config.docker, cfg.docker, \"image\", String);\n      configureEntityParams(this.config.docker, cfg.docker, \"memory\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"ports\");\n      configureEntityParams(this.config.docker, cfg.docker, \"extraVolumes\");\n      configureEntityParams(this.config.docker, cfg.docker, \"maxSpace\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"io\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"network\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"networkMode\", String);\n      configureEntityParams(this.config.docker, cfg.docker, \"networkAliases\");\n      configureEntityParams(this.config.docker, cfg.docker, \"cpusetCpus\", String);\n      configureEntityParams(this.config.docker, cfg.docker, \"cpuUsage\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"env\");\n      configureEntityParams(this.config.docker, cfg.docker, \"workingDir\", String);\n      configureEntityParams(this.config.docker, cfg.docker, \"changeWorkdir\", Boolean);\n      configureEntityParams(this.config.docker, cfg.docker, \"memorySwappiness\", Number);\n      configureEntityParams(this.config.docker, cfg.docker, \"memorySwap\", Number);\n    }\n    if (cfg.pingConfig) {\n      configureEntityParams(this.config.pingConfig, cfg.pingConfig, \"ip\", String);\n      configureEntityParams(this.config.pingConfig, cfg.pingConfig, \"port\", Number);\n      configureEntityParams(this.config.pingConfig, cfg.pingConfig, \"type\", Number);\n    }\n    if (cfg.eventTask) {\n      configureEntityParams(this.config.eventTask, cfg.eventTask, \"autoStart\", Boolean);\n      configureEntityParams(this.config.eventTask, cfg.eventTask, \"autoRestart\", Boolean);\n      configureEntityParams(this.config.eventTask, cfg.eventTask, \"ignore\", Boolean);\n    }\n    if (cfg.terminalOption) {\n      configureEntityParams(this.config.terminalOption, cfg.terminalOption, \"haveColor\", Boolean);\n    }\n\n    if (persistence) {\n      if (!this.config.basePort) this.allocatePort(this.config);\n      StorageSubsystem.store(\"InstanceConfig\", this.instanceUuid, this.config);\n    }\n  }\n\n  allocatePort(cfg: InstanceConfig) {\n    const globalCfg = globalConfiguration.config;\n    const [minPort, maxPort] = globalCfg.allocatablePortRange;\n\n    cfg.basePort = globalCfg.currentAllocatablePort;\n    globalCfg.currentAllocatablePort += globalCfg.portAssignInterval;\n\n    if (globalCfg.currentAllocatablePort > maxPort) {\n      globalCfg.currentAllocatablePort = minPort;\n    }\n\n    // Avoid port overlap with Daemon.\n    if (\n      cfg.basePort <= globalCfg.port &&\n      cfg.basePort + globalCfg.portAssignInterval >= globalCfg.port\n    ) {\n      cfg.basePort = globalCfg.port + 1;\n      globalCfg.currentAllocatablePort = cfg.basePort + globalCfg.portAssignInterval;\n    }\n\n    globalConfiguration.store();\n  }\n\n  resetConfigWithoutDocker() {\n    const newDockerCfg: IGlobalInstanceConfig[\"docker\"] = JSON.parse(\n      JSON.stringify(this.config.docker)\n    );\n\n    const extendDockerCfg = newDockerCfg as any;\n\n    if (!extendDockerCfg?.isResetDockerCfg) {\n      // Delete some environment configurations specific to a certain image\n      // to avoid the newly generated configurations from having an adverse impact on new images.\n      delete newDockerCfg.image;\n      delete newDockerCfg.env;\n      delete newDockerCfg.ports;\n      delete newDockerCfg.workingDir;\n      delete newDockerCfg.changeWorkdir;\n      delete newDockerCfg.containerName;\n\n      // Reset some configurations\n      this.config.updateCommand = \"\";\n      this.config.startCommand = \"\";\n      this.config.stopCommand = \"^C\";\n      this.config.type = Instance.TYPE_UNIVERSAL;\n    }\n\n    this.config.docker = newDockerCfg;\n  }\n\n  setLock(bool: boolean) {\n    if (this.lock === true && bool === true) {\n      throw new Error($t(\"TXT_CODE_ca030197\"));\n    }\n    this.lock = bool;\n  }\n\n  // force the command to execute\n  async forceExec(command: InstanceCommand) {\n    return await command.exec(this);\n  }\n\n  // set instance state or get state\n  status(v?: number) {\n    if (v != null) this.instanceStatus = v;\n    return this.instanceStatus;\n  }\n\n  // function that must be executed after the instance starts\n  // Trigger the open event and bind the data and exit events, etc.\n  started(process: IInstanceProcess) {\n    this.config.lastDatetime = Date.now();\n    const outputCode = this.config.terminalOption.pty ? \"utf-8\" : this.config.oe;\n    process.on(\"data\", (text: any) => {\n      this.pushOutput(iconv.decode(text, outputCode));\n    });\n    process.on(\"exit\", (code: number) => this.stopped(code));\n    this.process = process;\n    this.instanceStatus = Instance.STATUS_RUNNING;\n    this.emit(\"open\", this);\n\n    // start all lifecycle tasks\n    this.lifeCycleTaskManager.execLifeCycleTask(1);\n    this.startOutputLoop();\n  }\n\n  // If the instance performs any operation exception, it must throw an exception through this function\n  // trigger failure event\n  failure(error: Error) {\n    this.emit(\"failure\", error);\n    this.println(\"ERROR\", error.message ?? String(error));\n    throw error;\n  }\n\n  // function that must be executed after the instance has been closed\n  // trigger exit event\n  stopped(code = 0) {\n    this.println(\"INFO\", $t(\"TXT_CODE_70ce6fbb\"));\n    this.releaseResources();\n    if (this.instanceStatus != Instance.STATUS_STOP) {\n      this.instanceStatus = Instance.STATUS_STOP;\n      this.startTimestamp = 0;\n      this.emit(\"exit\", code);\n      StorageSubsystem.store(\"InstanceConfig\", this.instanceUuid, this.config);\n    }\n\n    // Close all lifecycle tasks\n    this.stopOutputLoop();\n    this.lifeCycleTaskManager.execLifeCycleTask(0);\n\n    // If automatic restart is enabled, the startup operation is performed immediately\n    if (!this.config.eventTask.ignore && this.config.eventTask.autoRestart) {\n      this.execPreset(\"start\")\n        .then(() => {\n          this.println($t(\"TXT_CODE_instanceConf.info\"), $t(\"TXT_CODE_instanceConf.autoRestart\"));\n        })\n        .catch((err) => {\n          this.println(\n            $t(\"TXT_CODE_instanceConf.error\"),\n            $t(\"TXT_CODE_instanceConf.autoRestartErr\", { err: err })\n          );\n        });\n    }\n\n    this.config.eventTask.ignore = false;\n\n    // Turn off the warning immediately after startup, usually the startup command is written incorrectly\n    const currentTimestamp = new Date().getTime();\n    const startThreshold = 2 * 1000;\n    if (currentTimestamp - this.startTimestamp < startThreshold) {\n      this.println(\"ERROR\", $t(\"TXT_CODE_aae2918f\"));\n    }\n  }\n\n  ignoreEventTaskOnce() {\n    if (this.config.eventTask) this.config.eventTask.ignore = true;\n  }\n\n  // custom output method, formatting\n  println(level: string, text: string) {\n    const str = `[${level}] ${text}\\n`;\n    this.emit(\"data\", str);\n  }\n\n  // custom output method\n  print(data: any) {\n    this.emit(\"data\", data);\n  }\n\n  // Release resources (mainly release process-related resources)\n  releaseResources() {\n    try {\n      this.process?.destroy();\n    } catch (error: any) {\n      logger.error(`Instance ${this.instanceUuid}, Release resources error: ${error}`);\n    } finally {\n      this.process = undefined;\n    }\n    this.resetInstanceRuntimeInfo();\n  }\n\n  resetInstanceRuntimeInfo() {\n    this.info = {\n      mcPingOnline: false,\n      currentPlayers: 0,\n      maxPlayers: 0,\n      version: \"\",\n      fileLock: 0,\n      playersChart: [],\n      openFrpStatus: false,\n      latency: 0,\n      allocatedPorts: this.info.allocatedPorts ?? []\n    };\n  }\n\n  // destroy this instance\n  destroy() {\n    if (this.process && this.process.pid) {\n      this.process.kill(\"SIGKILL\");\n    }\n    this.process = undefined;\n  }\n\n  fullTime() {\n    const date = new Date();\n    return date.toLocaleDateString() + \" \" + date.getHours() + \":\" + date.getMinutes();\n  }\n\n  hasCwdPath() {\n    return !!this.config.cwd;\n  }\n\n  absoluteCwdPath() {\n    if (!this.config || !this.config.cwd) throw new Error(\"Instance config error, cwd is Null!\");\n    if (path.isAbsolute(this.config.cwd)) return path.normalize(this.config.cwd);\n    return path.normalize(path.join(process.cwd(), this.config.cwd));\n  }\n\n  // execute the preset command action\n  async execPreset(action: IPresetCommand, p?: any) {\n    if (this.presetCommandManager) {\n      return await this.presetCommandManager.execPreset(action, p);\n    }\n    throw new Error(`Preset Manager does not exist`);\n  }\n\n  setPreset(action: IPresetCommand, cmd: InstanceCommand) {\n    this.presetCommandManager.setPreset(action, cmd);\n  }\n\n  getPreset(action: IPresetCommand) {\n    return this.presetCommandManager.getPreset(action);\n  }\n\n  clearPreset() {\n    this.presetCommandManager.clearPreset();\n  }\n\n  computeTerminalSize() {\n    let minW = this.config.terminalOption.ptyWindowCol;\n    let minH = this.config.terminalOption.ptyWindowRow;\n    for (const iterator of this.watchers.values()) {\n      const { w, h } = iterator.terminalSize;\n      if (w && h) {\n        if (w < minW) minW = w;\n        if (h < minH) minH = h;\n      }\n    }\n    return {\n      w: minW,\n      h: minH\n    };\n  }\n\n  public resetPingInfo() {\n    this.info.mcPingOnline = false;\n    this.info.currentPlayers = 0;\n    this.info.maxPlayers = 0;\n    this.info.version = \"\";\n    this.info.latency = 0;\n  }\n\n  public parseTextParams(text: string) {\n    if (typeof text !== \"string\") return \"\";\n    text = text.replace(/\\{mcsm_workspace\\}/gim, this.absoluteCwdPath());\n    text = text.replace(/\\{mcsm_cwd\\}/gim, this.absoluteCwdPath());\n    text = text.replace(/\\{mcsm_instance_id\\}/gim, this.instanceUuid);\n    text = text.replace(/\\{mcsm_uuid\\}/gim, this.instanceUuid);\n    text = text.replace(/\\{mcsm_random\\}/gim, randomUUID());\n    const ports = Array.from(\n      { length: globalConfiguration.config.portAssignInterval || 1 },\n      (_, index) => index + 1\n    );\n    const basePort = Number(this.config.basePort);\n    ports.forEach((portOffset) => {\n      const placeholder = `\\\\{mcsm_port${portOffset}\\\\}`;\n      const replacement = String(basePort + portOffset);\n      text = text.replace(new RegExp(placeholder, \"gim\"), replacement);\n    });\n    text = text.replace(/\\{mcsm_run_as\\}/gim, this.config.runAs);\n    text = text.replace(/\\{mcsm_steamcmd\\}/gim, STEAM_CMD_PATH);\n    return text;\n  }\n\n  public getCrlfValue(): string {\n    return this.config.crlf === 2 ? \"\\r\\n\" : \"\\n\";\n  }\n\n  public generateEnv() {\n    let env = process.env;\n    if (this.config.runAs) {\n      env = {\n        ...env,\n        USER: this.config.runAs ?? \"\",\n        HOME: this.config.runAs ? `/home/${this.config.runAs}` : \"\",\n        LOGNAME: this.config.runAs ?? \"\"\n      };\n    }\n    return env;\n  }\n\n  private pushOutput(data: string) {\n    this.outputBuffer.pushLog(data);\n  }\n\n  private startOutputLoop() {\n    this.stopOutputLoop();\n    this.outputLoopTask = setInterval(() => {\n      const { items, wasDeleted } = this.outputBuffer.getCache();\n      if (!items.length) return;\n      if (wasDeleted) items.unshift(IGNORE_TEXT);\n      this.emit(\"data\", items.join(\"\"));\n    }, 50);\n  }\n\n  private stopOutputLoop() {\n    if (this.outputLoopTask) clearInterval(this.outputLoopTask);\n    this.outputLoopTask = undefined;\n  }\n}\n","import Instance from \"./instance\";\n\nexport interface ILifeCycleTask {\n  name: string; // task name\n  status: number; // Running status, the default is 0, the task manager will automatically change\n  start: (instance: Instance) => Promise<void>;\n  stop: (instance: Instance) => Promise<void>;\n}\n\nexport class LifeCycleTaskManager {\n  // list of life cycle tasks\n  public readonly lifeCycleTask: ILifeCycleTask[] = [];\n\n  constructor(private self: any) {}\n\n  registerLifeCycleTask(task: ILifeCycleTask) {\n    this.lifeCycleTask.push(task);\n  }\n\n  execLifeCycleTask(type: 1 | 0) {\n    if (type == 1) {\n      this.lifeCycleTask.forEach((v) => {\n        if (v.status === 0) v.start(this.self);\n        v.status = 1;\n      });\n    } else {\n      this.lifeCycleTask.forEach((v) => {\n        if (v.status === 1) v.stop(this.self);\n        v.status = 0;\n      });\n    }\n  }\n\n  clearLifeCycleTask() {\n    this.execLifeCycleTask(0);\n    this.lifeCycleTask.splice(0, this.lifeCycleTask.length);\n  }\n}\n","import { $t } from \"../../i18n\";\nimport { IPresetCommand } from \"../commands/dispatcher\";\nexport interface IExecutable<T = any> {\n  exec: (a: T, b?: any) => Promise<any>;\n  stop?: (a: T) => Promise<void>;\n}\n\nexport class PresetCommandManager {\n  public readonly preset = new Map<IPresetCommand, IExecutable<any>>();\n\n  constructor(private self: any) {}\n\n  setPreset(action: IPresetCommand, cmd: IExecutable) {\n    this.preset.set(action, cmd);\n  }\n\n  getPreset(action: IPresetCommand) {\n    return this.preset.get(action);\n  }\n\n  async execPreset(action: IPresetCommand, p?: any) {\n    const cmd = this.preset.get(action);\n    if (!cmd) throw new Error($t(\"TXT_CODE_preset.actionErr\", { action: action }));\n    return await cmd.exec(this.self, p);\n  }\n\n  clearPreset() {\n    this.preset.clear();\n  }\n}\n","import { $t } from \"../../i18n\";\nimport yaml from \"yaml\";\nimport toml from \"@iarna/toml\";\nimport properties from \"properties\";\nimport path from \"path\";\nimport fs from \"fs-extra\";\n\nconst CONFIG_FILE_ENCODE = \"utf-8\";\n\nexport interface IProcessConfig {\n  fileName: string;\n  path: string;\n  type: string;\n  info: string | null;\n  redirect: string;\n  from?: string;\n  fromLink?: string | null;\n}\n\nexport class ProcessConfig {\n  constructor(public iProcessConfig: IProcessConfig) {\n    iProcessConfig.path = path.normalize(iProcessConfig.path);\n  }\n\n  // Automatically parse the local file according to the type and return the configuration object\n  read(): any {\n    const text = fs.readFileSync(this.iProcessConfig.path, { encoding: CONFIG_FILE_ENCODE });\n    if (this.iProcessConfig.type === \"yml\") {\n      return yaml.parse(text);\n    }\n    if (this.iProcessConfig.type == \"toml\") {\n      return toml.parse(text);\n    }\n    if (this.iProcessConfig.type === \"properties\") {\n      return properties.parse(text);\n    }\n    if (this.iProcessConfig.type === \"json\") {\n      return JSON.parse(text);\n    }\n    if (this.iProcessConfig.type === \"txt\") {\n      return text;\n    }\n  }\n\n  // Automatically save to the local configuration file according to the parameter object\n  write(object: Object | toml.JsonMap) {\n    let text = \"\";\n    if (this.iProcessConfig.type === \"yml\") {\n      text = yaml.stringify(object);\n    }\n    if (this.iProcessConfig.type === \"toml\") {\n      text = toml.stringify(<toml.JsonMap>object);\n    }\n    if (this.iProcessConfig.type === \"properties\") {\n      text = properties.stringify(object, {\n        unicode: true\n      });\n      text = text.replace(/ = /gim, \"=\");\n      if (this.iProcessConfig.fileName == \"server.properties\") {\n        text = text.replace(/\\\\\\\\u/gim, \"\\\\u\");\n      }\n    }\n    if (this.iProcessConfig.type === \"json\") {\n      text = JSON.stringify(object, null, 4);\n    }\n    if (this.iProcessConfig.type === \"txt\") {\n      text = object.toString();\n    }\n    if (!text && this.iProcessConfig.type !== \"txt\")\n      throw new Error($t(\"TXT_CODE_process_config.writEmpty\"));\n    fs.writeFileSync(this.iProcessConfig.path, text, { encoding: CONFIG_FILE_ENCODE });\n  }\n\n  exists() {\n    return fs.existsSync(this.iProcessConfig.path);\n  }\n}\n","// I18n init configuration (Daemon)\n// If you want to add the language of your own country, you need to add the code here.\n\nimport i18next from \"i18next\";\n\nimport zh_cn from \"@languages/zh_CN.json\";\nimport en_us from \"@languages/en_US.json\";\nimport zh_tw from \"@languages/zh_TW.json\";\nimport ja_JP from \"@languages/ja_JP.json\";\nimport es_ES from \"@languages/es_ES.json\";\nimport fr_FR from \"@languages/fr_FR.json\";\nimport ru_RU from \"@languages/ru_RU.json\";\nimport ko_KR from \"@languages/ko_KR.json\";\nimport de_DE from \"@languages/de_DE.json\";\nimport pt_BR from \"@languages/pt_BR.json\";\nimport th_TH from \"@languages/th_TH.json\";\n\ni18next.init({\n  interpolation: {\n    escapeValue: false\n  },\n  lng: \"en_us\",\n  fallbackLng: \"en_us\",\n  resources: {\n    en_us: {\n      translation: en_us\n    },\n    zh_cn: {\n      translation: zh_cn\n    },\n    zh_tw: {\n      translation: zh_tw\n    },\n    ja_jp: {\n      translation: ja_JP\n    },\n    es_es: {\n      translation: es_ES\n    },\n    fr_fr: {\n      translation: fr_FR\n    },\n    ru_ru: {\n      translation: ru_RU\n    },\n    ko_kr: {\n      translation: ko_KR\n    },\n    de_de: {\n      translation: de_DE\n    },\n    pt_br: {\n      translation: pt_BR\n    },\n    th_th: {\n      translation: th_TH\n    }\n  }\n});\n\n// alias\nconst $t = i18next.t;\n\nexport { $t, i18next };\n","import { Context } from \"koa\";\nimport { globalConfiguration } from \"../entity/config\";\nimport logger from \"../service/log\";\nimport { missionPassport } from \"../service/mission_passport\";\nimport uploadManager from \"../service/upload_manager\";\nimport { proxyIncomingMessage } from \"../utils/speed_limit\";\n\nexport function isUploadRequest(ctx: Context) {\n  const headers = ctx.request?.headers;\n  const contentType = headers?.[\"content-type\"] ?? \"\";\n  return contentType.toLowerCase().includes(\"multipart\");\n}\n\n/**\n * Prevent users from performing unrestricted file uploads using koa-body,\n * occupying machine disk space.\n */\nexport async function uploadFileCheckMiddleware(ctx: Context, next: () => Promise<void>) {\n  try {\n    const isMultipart = isUploadRequest(ctx);\n    const error = new Error(\"Access denied: Invalid multipart request!\");\n\n    if (isMultipart) {\n      let uploadKey = \"\";\n\n      // For all file upload interfaces, the last path in the URL must be the upload key.\n      const fullUrl = ctx.origin + ctx.url;\n      const urlObj = new URL(fullUrl);\n      const pathSegments = urlObj.pathname.trim().split(\"/\").filter(Boolean);\n      uploadKey = pathSegments[pathSegments.length - 1] || \"\";\n\n      const pieceWriter = uploadManager.get(uploadKey);\n      const uploadMission = missionPassport.getMission(uploadKey, \"upload\");\n\n      if (pieceWriter || uploadMission) {\n        return await next();\n      } else {\n        throw error;\n      }\n    }\n    return await next();\n  } catch (e: any) {\n    logger.error(\"uploadFileCheckMiddleware error: \" + e?.message);\n    throw e;\n  }\n}\n\nexport async function uploadSpeedLimitMiddleware(ctx: Context, next: () => Promise<void>) {\n  const isUpload = isUploadRequest(ctx);\n  if (isUpload) {\n    const rate = Number(globalConfiguration.config.uploadSpeedRate) || 0;\n    if (rate <= 0) return await next();\n    const incomingMessage = proxyIncomingMessage(ctx.req, rate);\n    ctx.req = incomingMessage;\n  }\n  return await next();\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport Instance from \"../entity/instance/instance\";\nimport { $t } from \"../i18n\";\nimport logger from \"../service/log\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\nimport InstanceSubsystem from \"../service/system_instance\";\n\nimport { arrayUnique, toNumber } from \"mcsmanager-common\";\nimport ProcessInfoCommand from \"../entity/commands/process_info\";\nimport { ProcessConfig } from \"../entity/instance/process_config\";\nimport { TaskCenter } from \"../service/async_task_service\";\nimport { createQuickInstallTask, QuickInstallTask } from \"../service/async_task_service/quick_install\";\nimport { IInstanceDetail, IJson } from \"../service/interfaces\";\nimport FileManager from \"../service/system_file\";\n\n// Some instances operate router authentication middleware\nrouterApp.use((event, ctx, data, next) => {\n  if (event === \"instance/new\" && data) return next();\n  if (event === \"instance/overview\") return next();\n  if (event === \"instance/select\") return next();\n  if (event === \"instance/asynchronous\") return next();\n  if (event === \"instance/query_asynchronous\") return next();\n  if (event === \"instance/stop_asynchronous\") return next();\n  if (event.startsWith(\"instance\")) {\n    if (data.instanceUuids) return next();\n    const instanceUuid = data.instanceUuid;\n    if (!InstanceSubsystem.exists(instanceUuid)) {\n      return protocol.error(ctx, event, {\n        instanceUuid: instanceUuid,\n        err: `The operation failed, the instance ${instanceUuid} does not exist.`\n      });\n    }\n  }\n  next();\n});\n\n// Get the list of instances of this daemon (query)\nrouterApp.on(\"instance/select\", (ctx, data) => {\n  const page = toNumber(data.page) ?? 1;\n  const pageSize = toNumber(data.pageSize) ?? 1;\n  const condition = data.condition;\n  const targetTag = data.condition.tag;\n  const overview: IInstanceDetail[] = [];\n  // keyword condition query\n  const queryWrapper = InstanceSubsystem.getQueryMapWrapper();\n  const allTags: string[] = [];\n\n  let searchTags: string[] = [];\n  if (targetTag instanceof Array && targetTag.length > 0) {\n    searchTags = targetTag.map((v) => String(v).trim());\n  }\n\n  let result = queryWrapper.select<Instance>((v) => {\n    if (v.config.tag) allTags.push(...v.config.tag);\n    if (InstanceSubsystem.isGlobalInstance(v)) return false;\n    if (\n      condition.instanceName &&\n      !v.config.nickname.toLowerCase().includes(condition.instanceName.toLowerCase())\n    )\n      return false;\n    if (condition.status && v.instanceStatus !== Number(condition.status)) return false;\n\n    if (searchTags.length > 0) {\n      const myTags = v.config.tag || [];\n      const res = myTags.filter((v) => searchTags.includes(v));\n      if (res.length === 0 || res.length !== searchTags.length) return false;\n    }\n    return true;\n  });\n  // sort first by status， then by nickname\n  result.sort((a, b) => {\n    if (a.status() !== b.status()) {\n      return b.status() - a.status();\n    }\n    return a.config.nickname >= b.config.nickname ? 1 : -1;\n  });\n  // paging function\n  const pageResult = queryWrapper.page<Instance>(result, page, pageSize);\n  // filter unwanted data\n  pageResult.data.forEach((instance) => {\n    overview.push({\n      instanceUuid: instance.instanceUuid,\n      started: instance.startCount,\n      status: instance.status(),\n      config: instance.config,\n      info: instance.info\n    });\n  });\n\n\n  protocol.response(ctx, {\n    page: pageResult.page,\n    pageSize: pageResult.pageSize,\n    maxPage: pageResult.maxPage,\n    allTags: arrayUnique(allTags).slice(0, 60),\n    data: overview\n  });\n});\n\n// Get an overview of this daemon instance\nrouterApp.on(\"instance/overview\", (ctx) => {\n  const overview: IInstanceDetail[] = [];\n  InstanceSubsystem.getInstances().forEach((instance) => {\n    overview.push({\n      instanceUuid: instance.instanceUuid,\n      started: instance.startCount,\n      status: instance.status(),\n      config: instance.config,\n      info: instance.info\n    });\n  });\n\n  protocol.msg(ctx, \"instance/overview\", overview);\n});\n\n// Get an overview of some instances of this daemon\nrouterApp.on(\"instance/section\", (ctx, data) => {\n  const instanceUuids = data.instanceUuids as string[];\n  const overview: IInstanceDetail[] = [];\n  InstanceSubsystem.getInstances().forEach((instance) => {\n    instanceUuids.forEach((targetUuid) => {\n      if (targetUuid === instance.instanceUuid) {\n        overview.push({\n          instanceUuid: instance.instanceUuid,\n          started: instance.startCount,\n          status: instance.status(),\n          config: instance.config,\n          info: instance.info\n        });\n      }\n    });\n  });\n  protocol.msg(ctx, \"instance/section\", overview);\n});\n\n// View details of a single instance\nrouterApp.on(\"instance/detail\", async (ctx, data) => {\n  try {\n    const instanceUuid = data.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    let processInfo = null;\n    let space = 0;\n    try {\n      // Parts that may be wrong due to file permissions, avoid affecting the acquisition of the entire configuration\n      processInfo = await instance.forceExec(new ProcessInfoCommand());\n    } catch (err: any) { }\n    protocol.msg(ctx, \"instance/detail\", {\n      instanceUuid: instance.instanceUuid,\n      started: instance.startCount,\n      status: instance.status(),\n      config: instance.config,\n      info: instance.info,\n      space,\n      processInfo\n    });\n  } catch (err: any) {\n    protocol.error(ctx, \"instance/detail\", { err: err.message });\n  }\n});\n\n// create a new application instance\nrouterApp.on(\"instance/new\", (ctx, data) => {\n  const config = data;\n  try {\n    const newInstance = InstanceSubsystem.createInstance(config);\n    protocol.msg(ctx, \"instance/new\", {\n      instanceUuid: newInstance.instanceUuid,\n      config: newInstance.config,\n      nickname: newInstance.config.nickname\n    });\n  } catch (err: any) {\n    protocol.error(ctx, \"instance/new\", { instanceUuid: null, err: err.message });\n  }\n});\n\n// update instance data\nrouterApp.on(\"instance/update\", (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  const config = data.config;\n  try {\n    InstanceSubsystem.getInstance(instanceUuid)?.parameters(config);\n    protocol.msg(ctx, \"instance/update\", { instanceUuid });\n  } catch (err: any) {\n    protocol.error(ctx, \"instance/update\", { instanceUuid: instanceUuid, err: err.message });\n  }\n});\n\n// Request to forward all IO data of an instance\nrouterApp.on(\"instance/forward\", (ctx, data) => {\n  const targetInstanceUuid = data.instanceUuid;\n  const isforward: boolean = data.forward;\n  try {\n    // InstanceSubsystem.getInstance(targetInstanceUuid);\n    if (isforward) {\n      logger.info(\n        $t(\"TXT_CODE_Instance_router.requestIO\", {\n          id: ctx.socket.id,\n          targetInstanceUuid: targetInstanceUuid\n        })\n      );\n      InstanceSubsystem.forward(targetInstanceUuid, ctx.socket);\n    } else {\n      logger.info(\n        $t(\"TXT_CODE_Instance_router.cancelIO\", {\n          id: ctx.socket.id,\n          targetInstanceUuid: targetInstanceUuid\n        })\n      );\n      InstanceSubsystem.stopForward(targetInstanceUuid, ctx.socket);\n    }\n    protocol.msg(ctx, \"instance/forward\", { instanceUuid: targetInstanceUuid });\n  } catch (err: any) {\n    protocol.error(ctx, \"instance/forward\", { instanceUuid: targetInstanceUuid, err: err.message });\n  }\n});\n\n// open the instance\nrouterApp.on(\"instance/open\", async (ctx, data) => {\n  const disableResponse = data.disableResponse;\n  const instances = [];\n  for (const instanceUuid of data.instanceUuids) {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    instances.push({\n      instanceUuid: instanceUuid,\n      nickname: instance?.config.nickname\n    });\n    try {\n      if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n      await instance.execPreset(\"start\");\n      if (!disableResponse) protocol.msg(ctx, \"instance/open\", { instanceUuid, instances });\n    } catch (err: any) {\n      if (!disableResponse) {\n        logger.error(\n          $t(\"TXT_CODE_Instance_router.openInstanceErr\", { instanceUuid: instanceUuid }),\n          err\n        );\n        protocol.error(ctx, \"instance/open\", {\n          instanceUuid: instanceUuid,\n          nickname: instance?.config.nickname,\n          err: err.message\n        });\n      }\n    }\n  }\n});\n\n// close the instance\nrouterApp.on(\"instance/stop\", async (ctx, data) => {\n  const disableResponse = data.disableResponse;\n  const instances = [];\n  for (const instanceUuid of data.instanceUuids) {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    instances.push({\n      instanceUuid: instanceUuid,\n      nickname: instance?.config.nickname\n    });\n    try {\n      if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n      await instance.execPreset(\"stop\");\n      //Note: Removing this reply will cause the front-end response to be slow, because the front-end will wait for the panel-side message to be forwarded\n      if (!disableResponse) protocol.msg(ctx, \"instance/stop\", { instanceUuid, instances });\n    } catch (err: any) {\n      if (!disableResponse)\n        protocol.error(ctx, \"instance/stop\", {\n          instanceUuid: instanceUuid,\n          nickname: instance?.config.nickname,\n          err: err.message\n        });\n    }\n  }\n});\n\n// restart the instance\nrouterApp.on(\"instance/restart\", async (ctx, data) => {\n  const disableResponse = data.disableResponse;\n  const instances = [];\n  for (const instanceUuid of data.instanceUuids) {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    instances.push({\n      instanceUuid: instanceUuid,\n      nickname: instance?.config.nickname\n    });\n    try {\n      if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n      await instance.execPreset(\"restart\");\n      if (!disableResponse) protocol.msg(ctx, \"instance/restart\", { instanceUuid, instances });\n    } catch (err: any) {\n      if (!disableResponse)\n        protocol.error(ctx, \"instance/restart\", {\n          instanceUuid: instanceUuid,\n          nickname: instance?.config.nickname,\n          err: err.message\n        });\n    }\n  }\n});\n\n// terminate instance method\nrouterApp.on(\"instance/kill\", async (ctx, data) => {\n  const disableResponse = data.disableResponse;\n  const instances = [];\n  for (const instanceUuid of data.instanceUuids) {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    instances.push({\n      instanceUuid: instanceUuid,\n      nickname: instance?.config.nickname\n    });\n    if (!instance) continue;\n    try {\n      await instance.execPreset(\"kill\");\n      if (!disableResponse) protocol.msg(ctx, \"instance/kill\", { instanceUuid, instances });\n    } catch (err: any) {\n      if (!disableResponse)\n        protocol.error(ctx, \"instance/kill\", {\n          instanceUuid: instanceUuid,\n          nickname: instance?.config.nickname,\n          err: err.message\n        });\n    }\n  }\n});\n\n// Send a command to the application instance\nrouterApp.on(\"instance/command\", async (ctx, data) => {\n  const disableResponse = data.disableResponse;\n  const instanceUuid = data.instanceUuid;\n  const command = data.command || \"\";\n  const instance = InstanceSubsystem.getInstance(instanceUuid);\n  try {\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    await instance.execPreset(\"command\", command);\n    if (!disableResponse) protocol.msg(ctx, \"instance/command\", { instanceUuid });\n  } catch (err: any) {\n    if (!disableResponse)\n      protocol.error(ctx, \"instance/command\", { instanceUuid: instanceUuid, err: err.message });\n  }\n});\n\n// delete instance\nrouterApp.on(\"instance/delete\", (ctx, data) => {\n  const instanceUuids = data.instanceUuids;\n  const deleteFile = data.deleteFile;\n  const instances = [];\n  for (const instanceUuid of instanceUuids) {\n    try {\n      const instance = InstanceSubsystem.getInstance(instanceUuid);\n      if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n      instances.push({\n        instanceUuid: instance.instanceUuid,\n        nickname: instance.config.nickname\n      });\n      InstanceSubsystem.removeInstance(instanceUuid, deleteFile);\n    } catch (err: any) { }\n  }\n  protocol.msg(ctx, \"instance/delete\", { instanceUuids, instances });\n});\n\n// perform complex asynchronous tasks\nrouterApp.on(\"instance/asynchronous\", (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  const taskName = data.taskName;\n  const parameter = data.parameter;\n  const instance = InstanceSubsystem.getInstance(instanceUuid);\n\n  logger.info(\n    $t(\"TXT_CODE_Instance_router.performTasks\", {\n      id: ctx.socket.id,\n      uuid: instanceUuid,\n      taskName: taskName\n    })\n  );\n\n  // Install instance via preset package\n  if (taskName === \"install_instance\" && instance) {\n    instance\n      .execPreset(\"install\", parameter)\n      .then(() => { })\n      .catch((err) => {\n        logger.error(\n          $t(\"TXT_CODE_Instance_router.performTasksErr\", {\n            uuid: instance.instanceUuid,\n            taskName: taskName,\n            nickname: instance.config.nickname,\n            err: err\n          })\n        );\n      });\n  }\n\n  // Instance software update via Command\n  if (taskName === \"update\" && instance) {\n    instance\n      .execPreset(\"update\", parameter)\n      .then(() => { })\n      .catch((err) => {\n        logger.error(\n          $t(\"TXT_CODE_Instance_router.performTasksErr\", {\n            uuid: instance.instanceUuid,\n            taskName: taskName,\n            nickname: instance.config.nickname,\n            err: err\n          })\n        );\n      });\n  }\n\n  // Quick install Minecraft server task\n  // Why not use the \".execPreset(\"install\", parameter)\" that already exists in Instance?\n  // Because the instance has not yet been created at this stage.\n  if (taskName === \"quick_install\") {\n    const newInstanceName = String(parameter.newInstanceName);\n    const targetLink = String(parameter.targetLink);\n    logger.info(`Quick install: Name: ${newInstanceName} | Download: ${targetLink}`);\n    const task = createQuickInstallTask(targetLink, newInstanceName, parameter.setupInfo);\n    return protocol.response(ctx, task.toObject());\n  }\n\n  protocol.response(ctx, true);\n});\n\n// Terminate the execution of complex asynchronous tasks\nrouterApp.on(\"instance/stop_asynchronous\", (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  const { taskId } = data.parameter;\n  const instance = InstanceSubsystem.getInstance(instanceUuid);\n\n  // Multi-instance async task\n  if (taskId && typeof taskId === \"string\") {\n    const task = TaskCenter.getTask(taskId);\n    if (!task) throw new Error(`Async Task ID: ${taskId} does not exist`);\n    task.stop();\n    return protocol.response(ctx, true);\n  }\n\n  // Singleton async task\n  const task = instance?.asynchronousTask;\n  if (task && task.stop) {\n    task\n      .stop(instance)\n      .then(() => { })\n      .catch((err) => { });\n  } else {\n    return protocol.error(\n      ctx,\n      \"instance/stop_asynchronous\",\n      $t(\"TXT_CODE_Instance_router.taskEmpty\")\n    );\n  }\n\n  protocol.response(ctx, true);\n});\n\n// Query async task status\nrouterApp.on(\"instance/query_asynchronous\", (ctx, data) => {\n  const taskId = data.parameter.taskId as string | undefined;\n  const taskName = data.taskName as string;\n  const taskNameTypeMap: IJson<string> = {\n    quick_install: QuickInstallTask.TYPE\n  };\n  const type = String(taskNameTypeMap[taskName] || QuickInstallTask.TYPE);\n  if (!taskId) {\n    const result = [];\n    for (const task of TaskCenter.getTasks(type)) {\n      result.push({\n        taskId: task.taskId,\n        status: task.status(),\n        detail: task.toObject()\n      });\n    }\n    protocol.response(ctx, result);\n  } else {\n    const task = TaskCenter.getTask(String(taskId));\n    if (task)\n      protocol.response(ctx, {\n        taskId: task.taskId,\n        status: task.status(),\n        detail: task.toObject()\n      });\n  }\n});\n\nrouterApp.on(\"instance/process_config/list\", (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  const files = data.files;\n  const result: any[] = [];\n  try {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    const fileManager = new FileManager(instance.absoluteCwdPath());\n    for (const filePath of files) {\n      if (fileManager.check(filePath)) {\n        result.push({\n          file: filePath,\n          check: true\n        });\n      }\n    }\n    protocol.response(ctx, result);\n  } catch (err: any) {\n    protocol.responseError(ctx, err);\n  }\n});\n\n// Get or update the content of the instance specified file\nrouterApp.on(\"instance/process_config/file\", (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  const fileName = data.fileName;\n  const config = data.config || null;\n  const fileType = data.type;\n  try {\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    const fileManager = new FileManager(instance.absoluteCwdPath());\n    if (!fileManager.check(fileName)) throw new Error($t(\"TXT_CODE_Instance_router.accessFileErr\"));\n    const filePath = path.normalize(path.join(instance.absoluteCwdPath(), fileName));\n    const processConfig = new ProcessConfig({\n      fileName: fileName,\n      redirect: fileName,\n      path: filePath,\n      type: fileType,\n      info: null,\n      fromLink: null\n    });\n    if (config) {\n      processConfig.write(config);\n      return protocol.response(ctx, true);\n    } else {\n      const json = processConfig.read();\n      return protocol.response(ctx, json);\n    }\n  } catch (err: any) {\n    protocol.responseError(ctx, err);\n  }\n});\n\n// Get instance terminal log\nrouterApp.on(\"instance/outputlog\", async (ctx, data) => {\n  const instanceUuid = data.instanceUuid;\n  try {\n    const filePath = path.join(InstanceSubsystem.LOG_DIR, `${instanceUuid}.log`);\n    if (fs.existsSync(filePath)) {\n      const text = await fs.readFile(filePath, { encoding: \"utf-8\" });\n      return protocol.response(ctx, text);\n    }\n    protocol.responseError(ctx, new Error($t(\"TXT_CODE_Instance_router.terminalLogNotExist\")), {\n      disablePrint: true\n    });\n  } catch (err: any) {\n    protocol.responseError(ctx, err);\n  }\n});\n","import { timingSafeEqual } from \"node:crypto\";\nimport { IGNORE } from \"../const\";\nimport { globalConfiguration } from \"../entity/config\";\nimport { $t } from \"../i18n\";\nimport logger from \"../service/log\";\nimport { LOGIN_BY_TOP_LEVEL, loginSuccessful } from \"../service/mission_passport\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\n\n// latest verification time\nconst AUTH_TIMEOUT = 6000;\n\n// Top-level authority authentication middleware (this is the first place for any authority authentication middleware)\nrouterApp.use(async (event, ctx, _, next) => {\n  const socket = ctx.socket;\n  // release all data flow controllers\n  if (event.startsWith(\"stream\")) return next();\n  // Except for the auth controller, which is publicly accessible, other business controllers must be authorized before they can be accessed\n  if (event === \"auth\") return await next();\n  if (!ctx.session) throw new Error(\"Session does not exist in authentication middleware.\");\n  if (\n    timingSafeEqual(\n      Uint8Array.from(ctx.session.key as string),\n      Uint8Array.from(globalConfiguration.config.key)\n    ) &&\n    ctx.session.type === LOGIN_BY_TOP_LEVEL &&\n    ctx.session.login &&\n    ctx.session.id\n  ) {\n    return await next();\n  }\n  logger.warn(\n    $t(\"TXT_CODE_auth_router.notAccess\", {\n      id: socket.id,\n      address: socket.handshake.address,\n      event: event\n    })\n  );\n  return protocol.error(ctx, \"error\", IGNORE, {\n    disablePrint: true\n  });\n});\n\n// authentication controller\nrouterApp.on(\"auth\", (ctx, data) => {\n  try {\n    if (\n      timingSafeEqual(\n        Uint8Array.from(String(data)),\n        Uint8Array.from(globalConfiguration.config.key)\n      )\n    ) {\n      // The authentication is passed, and the registered session is a trusted session\n      logger.info(\n        $t(\"TXT_CODE_auth_router.access\", {\n          id: ctx.socket.id,\n          address: ctx.socket.handshake.address\n        })\n      );\n      loginSuccessful(ctx, data);\n      protocol.msg(ctx, \"auth\", true);\n    } else {\n      protocol.msg(ctx, \"auth\", false);\n    }\n  } catch (e) {\n    protocol.msg(ctx, \"auth\", false);\n  }\n});\n\n// Connected event for timeout authentication close\nrouterApp.on(\"connection\", (ctx) => {\n  const session = ctx.session;\n  setTimeout(() => {\n    if (!session.login) {\n      ctx.socket.disconnect();\n      logger.info(\n        $t(\"TXT_CODE_auth_router.disconnect\", {\n          id: ctx.socket.id,\n          address: ctx.socket.handshake.address\n        })\n      );\n    }\n  }, AUTH_TIMEOUT);\n});\n","import { $t } from \"../i18n\";\nimport { DockerManager } from \"../service/docker_service\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\nimport * as fs from \"fs-extra\";\nimport path from \"path\";\nimport { v4 } from \"uuid\";\nimport logger from \"../service/log\";\nimport os from \"os\";\n\n// Get the image list of this system\nrouterApp.on(\"environment/images\", async (ctx, data) => {\n  try {\n    const docker = new DockerManager().getDocker();\n    const result = await docker.listImages();\n    protocol.response(ctx, result);\n  } catch (error: any) {\n    protocol.responseError(ctx, $t(\"TXT_CODE_environment_router.dockerInfoErr\"));\n  }\n});\n\n// Get the list of containers in this system\nrouterApp.on(\"environment/containers\", async (ctx, data) => {\n  try {\n    const docker = new DockerManager().getDocker();\n    const result = await docker.listContainers();\n    protocol.response(ctx, result);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Get the network list of this system\nrouterApp.on(\"environment/networkModes\", async (ctx, data) => {\n  try {\n    const docker = new DockerManager().getDocker();\n    const result = await docker.listNetworks();\n    protocol.response(ctx, result);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// create image\nrouterApp.on(\"environment/new_image\", async (ctx, data) => {\n  try {\n    const dockerFileText = data.dockerFile;\n    const name = data.name;\n    const tag = data.tag;\n    // Initialize the image file directory and Dockerfile\n    const uuid = v4();\n    const dockerFileDir = path.normalize(path.join(process.cwd(), \"tmp\", uuid));\n    if (!fs.existsSync(dockerFileDir)) fs.mkdirsSync(dockerFileDir);\n\n    // write to DockerFile\n    const dockerFilepath = path.normalize(path.join(dockerFileDir, \"Dockerfile\"));\n    await fs.writeFile(dockerFilepath, dockerFileText, { encoding: \"utf-8\" });\n\n    logger.info(\n      $t(\"TXT_CODE_environment_router.crateImage\", {\n        name: name,\n        tag: tag,\n        dockerFileText: dockerFileText\n      })\n    );\n\n    // pre-response\n    protocol.response(ctx, true);\n\n    // start creating\n    const dockerImageName = `${name}:${tag}`;\n    try {\n      await new DockerManager().startBuildImage(dockerFileDir, dockerImageName);\n      logger.info($t(\"TXT_CODE_environment_router.crateSuccess\", { name: name, tag: tag }));\n    } catch (error: any) {\n      logger.info(\n        $t(\"TXT_CODE_environment_router.crateErr\", { name: name, tag: tag, error: error })\n      );\n    }\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// delete image\nrouterApp.on(\"environment/del_image\", async (ctx, data) => {\n  try {\n    const imageId = data.imageId;\n    const docker = new DockerManager().getDocker();\n    const image = docker.getImage(imageId);\n    if (image) {\n      logger.info($t(\"TXT_CODE_environment_router.delImage\", { imageId: imageId }));\n      await image.remove();\n    } else {\n      throw new Error(\"Image does not exist\");\n    }\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Get the progress of all mirroring tasks\nrouterApp.on(\"environment/progress\", async (ctx) => {\n  try {\n    const data: any = {};\n    DockerManager.builderProgress.forEach((v, k) => {\n      data[k] = v;\n    });\n    protocol.response(ctx, data);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n","import os from \"os\";\nimport { globalConfiguration, globalEnv } from \"../entity/config\";\nimport Instance from \"../entity/instance/instance\";\nimport { $t } from \"../i18n\";\nimport { getFileManager, getWindowsDisks } from \"../service/file_router_service\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\nimport InstanceSubsystem from \"../service/system_instance\";\nimport uploadManager from \"../service/upload_manager\";\n\n// Some routers operate router authentication middleware\nrouterApp.use((event, ctx, data, next) => {\n  if (event.startsWith(\"file/\")) {\n    const instanceUuid = data.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    if (!instance) {\n      return protocol.error(ctx, event, {\n        instanceUuid: instanceUuid,\n        err: $t(\"TXT_CODE_file_router.instanceNotExist\", { instanceUuid: instanceUuid })\n      });\n    }\n\n    if (\n      [Instance.STATUS_BUSY, Instance.STATUS_STARTING].includes(instance.status()) &&\n      ![\"file/list\", \"file/status\"].includes(event)\n    ) {\n      return protocol.error(ctx, event, {\n        instanceUuid: instanceUuid,\n        err: $t(\"TXT_CODE_bbedcf29\")\n      });\n    }\n  }\n  next();\n});\n\n// List the files in the specified instance working directory\nrouterApp.on(\"file/list\", (ctx, data) => {\n  try {\n    const fileManager = getFileManager(data.instanceUuid);\n    const { page, pageSize, target, fileName } = data;\n    fileManager.cd(target);\n    const overview = fileManager.list(page, pageSize, fileName);\n    protocol.response(ctx, overview);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// File chmod (only Linux)\nrouterApp.on(\"file/chmod\", async (ctx, data) => {\n  try {\n    const fileManager = getFileManager(data.instanceUuid);\n    const { chmod, target, deep } = data;\n    await fileManager.chmod(target, chmod, deep);\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Query the status of the file management system\nrouterApp.on(\"file/status\", async (ctx, data) => {\n  try {\n    const instance = InstanceSubsystem.getInstance(data.instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    protocol.response(ctx, {\n      instanceFileTask: instance.info.fileLock ?? 0,\n      globalFileTask: globalEnv.fileTaskCount ?? 0,\n      platform: os.platform(),\n      isGlobalInstance: data.instanceUuid === InstanceSubsystem.GLOBAL_INSTANCE_UUID,\n      disks: getWindowsDisks()\n    });\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Create a new file\nrouterApp.on(\"file/touch\", (ctx, data) => {\n  try {\n    const target = data.target;\n    const fileManager = getFileManager(data.instanceUuid);\n    fileManager.newFile(target);\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Create a directory\nrouterApp.on(\"file/mkdir\", (ctx, data) => {\n  try {\n    const target = data.target;\n    const fileManager = getFileManager(data.instanceUuid);\n    fileManager.mkdir(target);\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// copy the file\nrouterApp.on(\"file/copy\", async (ctx, data) => {\n  try {\n    // [[\"a.txt\",\"b.txt\"],[\"cxz\",\"zzz\"]]\n    const targets = data.targets;\n    const fileManager = getFileManager(data.instanceUuid);\n    for (const target of targets) {\n      fileManager.copy(target[0], target[1]);\n    }\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// move the file\nrouterApp.on(\"file/move\", async (ctx, data) => {\n  try {\n    // [[\"a.txt\",\"b.txt\"],[\"cxz\",\"zzz\"]]\n    const targets = data.targets;\n    const fileManager = getFileManager(data.instanceUuid);\n    for (const target of targets) {\n      await fileManager.move(target[0], target[1]);\n    }\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Delete Files\nrouterApp.on(\"file/delete\", async (ctx, data) => {\n  try {\n    const targets = data.targets;\n    const fileManager = getFileManager(data.instanceUuid);\n    for (const target of targets) {\n      const path = fileManager.toAbsolutePath(target);\n      const uploadTask = uploadManager.getByPath(path);\n      if (uploadTask != undefined) {\n        uploadManager.delete(uploadTask.id);\n        uploadTask.writer.stop();\n      } else {\n        // async delete\n        fileManager.delete(target);\n      }\n    }\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// edit file\nrouterApp.on(\"file/edit\", async (ctx, data) => {\n  try {\n    const target = data.target;\n    const text = data.text;\n    const fileManager = getFileManager(data.instanceUuid);\n    const result = await fileManager.edit(target, text);\n    protocol.response(ctx, result ? result : true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// compress/decompress the file\nrouterApp.on(\"file/compress\", async (ctx, data) => {\n  const maxFileTask = globalConfiguration.config.maxFileTask;\n  try {\n    const source = data.source;\n    const targets = data.targets;\n    const type = data.type;\n    const code = data.code;\n    const fileManager = getFileManager(data.instanceUuid);\n    const instance = InstanceSubsystem.getInstance(data.instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    if (instance.info.fileLock >= maxFileTask) {\n      throw new Error(\n        $t(\"TXT_CODE_file_router.unzipLimit\", {\n          maxFileTask: maxFileTask,\n          fileLock: instance.info.fileLock\n        })\n      );\n    }\n\n    // Statistics of the number of tasks in a single instance file and the number of tasks in the entire daemon process\n    function fileTaskStart() {\n      if (instance) {\n        instance.info.fileLock++;\n        globalEnv.fileTaskCount++;\n      }\n    }\n\n    function fileTaskEnd() {\n      if (instance) {\n        instance.info.fileLock--;\n        globalEnv.fileTaskCount--;\n      }\n    }\n\n    // start decompressing or compressing the file\n    fileTaskStart();\n    try {\n      if (type === 1) {\n        await fileManager.zip(source, targets, code);\n      } else {\n        await fileManager.unzip(source, targets, code);\n      }\n      protocol.response(ctx, true);\n    } catch (error: any) {\n      throw error;\n    } finally {\n      fileTaskEnd();\n    }\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n","import Router from \"@koa/router\";\nimport formidable from \"formidable\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport FileWriter from \"../entity/file_writer\";\nimport { $t } from \"../i18n\";\nimport { missionPassport } from \"../service/mission_passport\";\nimport FileManager from \"../service/system_file\";\nimport InstanceSubsystem from \"../service/system_instance\";\nimport uploadManager from \"../service/upload_manager\";\nimport { clearUploadFiles } from \"../tools/filepath\";\nimport { sendFile } from \"../utils/speed_limit\";\n\nconst router = new Router();\n\n// Define the HTTP home page display route\nrouter.all(\"/\", async (ctx) => {\n  ctx.body = \"[MCSManager Daemon] Status: OK | reference: https://mcsmanager.com/\";\n  ctx.status = 200;\n});\n\n// File download route\nrouter.get(\"/download/:key/:fileName\", async (ctx) => {\n  const key = ctx.params.key;\n  const paramsFileName = ctx.params.fileName;\n  try {\n    // Get the task from the task center\n    const mission = missionPassport.getMission(key, \"download\");\n    if (!mission) throw new Error((ctx.body = \"Access denied: No task found\"));\n    const instance = InstanceSubsystem.getInstance(mission.parameter.instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_http_router.instanceNotExist\"));\n    if (!FileManager.checkFileName(paramsFileName))\n      throw new Error($t(\"TXT_CODE_http_router.fileNameNotSpec\"));\n\n    const cwd = instance.absoluteCwdPath();\n    const fileRelativePath = mission.parameter.fileName;\n\n    // Check for file cross-directory security risks\n    const fileManager = new FileManager(cwd);\n    if (!fileManager.check(fileRelativePath))\n      throw new Error((ctx.body = \"Access denied: Invalid destination\"));\n\n    const fileAbsPath = fileManager.toAbsolutePath(fileRelativePath);\n    await sendFile(ctx, fileAbsPath);\n  } catch (error: any) {\n    if (!ctx.res.headersSent) {\n      ctx.body = $t(\"TXT_CODE_http_router.downloadErr\", { error: error.message });\n      ctx.status = 500;\n    }\n  } finally {\n    missionPassport.deleteMission(key);\n  }\n});\n\n// Old version upload route\nrouter.post(\"/upload/:key\", async (ctx) => {\n  const key = String(ctx.params.key);\n  const unzip = Boolean(ctx.query.unzip);\n  const zipCode = String(ctx.query.code);\n  let tmpFiles: formidable.File | formidable.File[] | undefined;\n  try {\n    const mission = missionPassport.getMission(key, \"upload\");\n    if (!mission) throw new Error(\"Access denied: No task found\");\n    const instance = InstanceSubsystem.getInstance(mission.parameter.instanceUuid);\n    if (!instance) throw new Error(\"Access denied: No instance found\");\n    const uploadDir = mission.parameter.uploadDir;\n    const cwd = instance.absoluteCwdPath();\n    const tmpFiles = ctx.request.files?.file;\n    if (tmpFiles) {\n      let uploadedFile: formidable.File;\n      if (tmpFiles instanceof Array) {\n        uploadedFile = tmpFiles[0];\n      } else if (tmpFiles) {\n        uploadedFile = tmpFiles;\n      } else {\n        throw new Error(\"Empty File!\");\n      }\n\n      const originFileName = uploadedFile.originalFilename || \"\";\n      if (!FileManager.checkFileName(path.basename(originFileName)))\n        throw new Error(\"Access denied: Malformed file name\");\n      const fileManager = new FileManager(cwd);\n\n      const ext = path.extname(originFileName);\n      const basename = path.basename(originFileName, ext);\n\n      let tempFileSaveName = basename + ext;\n      let counter = 1;\n\n      while (\n        fs.existsSync(\n          fileManager.toAbsolutePath(path.normalize(path.join(uploadDir, tempFileSaveName)))\n        ) &&\n        ctx.query.overwrite === \"false\"\n      ) {\n        if (counter == 1) {\n          tempFileSaveName = `${basename}-copy${ext}`;\n        } else {\n          tempFileSaveName = `${basename}-copy-${counter}${ext}`;\n        }\n        counter++;\n      }\n\n      let fileSaveRelativePath = path.normalize(path.join(uploadDir, tempFileSaveName));\n\n      if (!fileManager.checkPath(fileSaveRelativePath))\n        throw new Error(\"Access denied: Invalid destination\");\n\n      const fileSaveAbsolutePath = fileManager.toAbsolutePath(fileSaveRelativePath);\n\n      await fs.move(uploadedFile.filepath, fileSaveAbsolutePath, {\n        overwrite: true\n      });\n\n      if (unzip) {\n        const instanceFiles = new FileManager(instance.absoluteCwdPath());\n        instanceFiles.unzip(fileSaveAbsolutePath, \".\", zipCode);\n      }\n      ctx.body = \"OK\";\n      return;\n    }\n    ctx.body = \"Access denied: No file found\";\n    ctx.status = 500;\n  } catch (error: any) {\n    ctx.body = error.message;\n    ctx.status = 500;\n  } finally {\n    missionPassport.deleteMission(key);\n    if (tmpFiles) clearUploadFiles(tmpFiles);\n  }\n});\n\nrouter.post(\"/upload-new/:key\", async (ctx) => {\n  const key = String(ctx.params.key);\n  const unzip = Boolean(ctx.query.unzip);\n  const zipCode = String(ctx.query.code);\n  const filename = String(ctx.query.filename);\n  const size = Number(ctx.query.size);\n  if (ctx.query.stop) {\n    const writer = uploadManager.get(key);\n    if (writer) {\n      await writer.stop();\n      uploadManager.delete(key);\n      ctx.body = \"OK\";\n      return;\n    } else {\n      ctx.body = \"Access denied: No task found\";\n      ctx.status = 500;\n      return;\n    }\n  }\n  try {\n    const mission = missionPassport.getMission(key, \"upload\");\n    if (!mission) throw new Error(\"Access denied: No task found\");\n    const instance = InstanceSubsystem.getInstance(mission.parameter.instanceUuid);\n    if (!instance) throw new Error(\"Access denied: No instance found\");\n    const uploadDir = mission.parameter.uploadDir;\n    const cwd = instance.absoluteCwdPath();\n    const overwrite = ctx.query.overwrite !== \"false\";\n    const filePath = await FileWriter.getPath(cwd, uploadDir, filename, overwrite);\n    let fr = uploadManager.getByPath(filePath);\n    if (fr && size != fr.writer.size) {\n      uploadManager.delete(fr.id);\n      await fr.writer.stop();\n      fr = undefined;\n    }\n    if (!fr) {\n      const fileWriter = new FileWriter(cwd, filename, size, unzip, zipCode, filePath);\n      await fileWriter.init();\n      const id = uploadManager.add(fileWriter);\n      fr = { id, writer: fileWriter };\n    }\n\n    ctx.body = {\n      data: {\n        id: fr.id,\n        received: fr.writer.received\n      },\n      status: 200\n    };\n    return;\n  } catch (error: any) {\n    ctx.body = error.message;\n    ctx.status = 500;\n  } finally {\n    missionPassport.deleteMission(key);\n  }\n});\n\nrouter.post(\"/upload-piece/:id\", async (ctx) => {\n  const id = String(ctx.params.id);\n  const offset = Number(ctx.query.offset);\n  const tmpFiles = ctx.request.files?.file;\n\n  try {\n    if (!tmpFiles) {\n      ctx.body = \"Access denied: No file found\";\n      ctx.status = 500;\n    }\n\n    let uploadedFile: formidable.File;\n    if (tmpFiles instanceof Array) {\n      uploadedFile = tmpFiles[0];\n    } else if (tmpFiles) {\n      uploadedFile = tmpFiles;\n    } else {\n      throw new Error(\"Empty File!\");\n    }\n    const writer = uploadManager.get(id);\n    if (!writer) throw new Error(\"Access denied: No task found\");\n\n    const chunk = await fs.readFile(uploadedFile.filepath);\n    await writer.write(offset, chunk);\n\n    if (tmpFiles) clearUploadFiles(tmpFiles);\n\n    ctx.body = \"OK\";\n    return;\n  } catch (error: any) {\n    ctx.body = error.message;\n    ctx.status = 500;\n  }\n});\n\nexport default router;\n","import Instance from \"../entity/instance/instance\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\nimport InstanceSubsystem from \"../service/system_instance\";\n\nimport fs from \"fs-extra\";\nimport i18next from \"i18next\";\nimport { systemInfo, toNumber, toText } from \"mcsmanager-common\";\nimport { LOCAL_PRESET_LANG_PATH } from \"../const\";\nimport { globalConfiguration } from \"../entity/config\";\nimport { $t } from \"../i18n\";\nimport logger from \"../service/log\";\nimport VisualDataSubsystem from \"../service/system_visual_data\";\nimport { getVersion } from \"../service/version\";\n\n// Get the basic information of the daemon system\nrouterApp.on(\"info/overview\", async (ctx) => {\n  const daemonVersion = getVersion();\n  let total = 0;\n  let running = 0;\n  InstanceSubsystem.getInstances().forEach((v) => {\n    total++;\n    if (v.status() == Instance.STATUS_RUNNING) running++;\n  });\n  const info = {\n    version: daemonVersion,\n    process: {\n      cpu: process.cpuUsage().system,\n      memory: process.memoryUsage().heapUsed,\n      cwd: process.cwd()\n    },\n    instance: {\n      running,\n      total\n    },\n    system: systemInfo(),\n    cpuMemChart: VisualDataSubsystem.getSystemChartArray(),\n    config: {\n      language: globalConfiguration.config.language,\n      uploadSpeedRate: globalConfiguration.config.uploadSpeedRate,\n      downloadSpeedRate: globalConfiguration.config.downloadSpeedRate,\n      portRangeStart: globalConfiguration.config.allocatablePortRange[0],\n      portRangeEnd: globalConfiguration.config.allocatablePortRange[1],\n      portAssignInterval: globalConfiguration.config.portAssignInterval,\n      port: globalConfiguration.config.port\n    }\n  };\n  protocol.response(ctx, info);\n});\n\nrouterApp.on(\"info/setting\", async (ctx, data) => {\n  const language = toText(data.language);\n  const uploadSpeedRate = toNumber(data.uploadSpeedRate);\n  const downloadSpeedRate = toNumber(data.downloadSpeedRate);\n  const portRangeStart = toNumber(data.portRangeStart);\n  const portRangeEnd = toNumber(data.portRangeEnd);\n  const portAssignInterval = toNumber(data.portAssignInterval);\n  const port = toNumber(data.port);\n  if (language) {\n    logger.warn($t(\"TXT_CODE_66e32091\"), language);\n    i18next.changeLanguage(language);\n    fs.remove(LOCAL_PRESET_LANG_PATH, () => {});\n    globalConfiguration.config.language = language;\n  }\n  if (uploadSpeedRate != null && uploadSpeedRate >= 0) {\n    globalConfiguration.config.uploadSpeedRate = uploadSpeedRate;\n  }\n  if (downloadSpeedRate != null && downloadSpeedRate >= 0) {\n    globalConfiguration.config.downloadSpeedRate = downloadSpeedRate;\n  }\n  if (portRangeStart != null && portRangeEnd != null && portRangeStart < portRangeEnd) {\n    globalConfiguration.config.allocatablePortRange = [portRangeStart, portRangeEnd];\n    globalConfiguration.config.currentAllocatablePort = portRangeStart;\n  }\n  if (portAssignInterval != null && portAssignInterval > 0) {\n    globalConfiguration.config.portAssignInterval = portAssignInterval;\n  }\n  if (port && port > 0 && port < 65535) {\n    globalConfiguration.config.port = port;\n  }\n  globalConfiguration.store();\n  protocol.response(ctx, true);\n});\n","import path from \"path\";\n\nimport RouterContext from \"../entity/ctx\";\nimport * as protocol from \"../service/protocol\";\nimport InstanceSubsystem from \"../service/system_instance\";\nimport fs from \"fs-extra\";\nconst MAX_LOG_SIZE = 512;\n\n// buffer\nconst buffer = new Map<string, string>();\nsetInterval(() => {\n  buffer.forEach((buf, instanceUuid) => {\n    if (!buf || !instanceUuid) return;\n    const logFilePath = path.join(InstanceSubsystem.LOG_DIR, `${instanceUuid}.log`);\n    if (!fs.existsSync(InstanceSubsystem.LOG_DIR)) fs.mkdirsSync(InstanceSubsystem.LOG_DIR);\n    try {\n      const fileInfo = fs.statSync(logFilePath);\n      if (fileInfo && fileInfo.size > 1024 * MAX_LOG_SIZE) fs.removeSync(logFilePath);\n    } catch (err: any) {}\n    fs.writeFile(logFilePath, buf, { encoding: \"utf-8\", flag: \"a\" }, () => {\n      buffer.set(instanceUuid, \"\");\n    });\n  });\n}, 500);\n\n// output stream record to buffer\nasync function outputLog(instanceUuid: string, text: string) {\n  const buf = (buffer.get(instanceUuid) ?? \"\") + text;\n  if (buf.length > 1024 * 1024) buffer.set(instanceUuid, \"\");\n  buffer.set(instanceUuid, buf ?? null);\n}\n\n// instance output stream event\n// By default, it is added to the data cache to control the sending rate to ensure its stability\nInstanceSubsystem.on(\"data\", (instanceUuid: string, text: string) => {\n  InstanceSubsystem.forEachForward(instanceUuid, (socket) => {\n    protocol.msg(new RouterContext(null, socket), \"instance/stdout\", {\n      instanceUuid: instanceUuid,\n      text: text\n    });\n  });\n  // Append the output to the log file\n  outputLog(instanceUuid, text)\n    .then(() => {})\n    .catch(() => {});\n});\n\n// instance exit event\nInstanceSubsystem.on(\"exit\", (obj: any) => {\n  InstanceSubsystem.forEachForward(obj.instanceUuid, (socket) => {\n    protocol.msg(new RouterContext(null, socket), \"instance/stopped\", {\n      instanceUuid: obj.instanceUuid,\n      instanceName: obj.instanceName\n    });\n  });\n});\n\n// instance start event\nInstanceSubsystem.on(\"open\", (obj: any) => {\n  InstanceSubsystem.forEachForward(obj.instanceUuid, (socket) => {\n    protocol.msg(new RouterContext(null, socket), \"instance/opened\", {\n      instanceUuid: obj.instanceUuid,\n      instanceName: obj.instanceName\n    });\n  });\n});\n\n// Instance failure event (usually used for startup failure, or other operation failures)\nInstanceSubsystem.on(\"failure\", (obj: any) => {\n  InstanceSubsystem.forEachForward(obj.instanceUuid, (socket) => {\n    protocol.msg(new RouterContext(null, socket), \"instance/failure\", {\n      instanceUuid: obj.instanceUuid,\n      instanceName: obj.instanceName\n    });\n  });\n});\n","import { $t } from \"../i18n\";\nimport { routerApp } from \"../service/router\";\nimport { missionPassport } from \"../service/mission_passport\";\nimport * as protocol from \"../service/protocol\";\n\nconst ONE_HOUR_TIME = 3600000;\nconst TASK_MAX_TIME = 1;\n\n// register temporary task passport\n// For example, file upload, file download, these operations that need to bypass the Web side,\n// all need to use this route\nrouterApp.on(\"passport/register\", (ctx, data) => {\n  const name = data.name;\n  const password = data.password;\n  const parameter = data.parameter;\n  const count = data.count;\n  const start = new Date().getTime();\n  const end = start + ONE_HOUR_TIME * TASK_MAX_TIME;\n  if (!name || !password) throw new Error($t(\"TXT_CODE_passport_router.registerErr\"));\n  missionPassport.registerMission(password, {\n    name,\n    parameter,\n    count,\n    start,\n    end\n  });\n  protocol.response(ctx, true);\n});\n","import { routerApp } from \"../service/router\";\nimport * as protocol from \"../service/protocol\";\nimport InstanceControlSubsystem from \"../service/system_instance_control\";\n\n// create a scheduled task\nrouterApp.on(\"schedule/register\", (ctx, data) => {\n  try {\n    InstanceControlSubsystem.registerScheduleJob(data);\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// get the task list\nrouterApp.on(\"schedule/list\", (ctx, data) => {\n  protocol.response(ctx, InstanceControlSubsystem.listScheduleJob(data.instanceUuid));\n});\n\n// delete the task plan\nrouterApp.on(\"schedule/delete\", (ctx, data) => {\n  InstanceControlSubsystem.deleteScheduleTask(data.instanceUuid, data.name);\n  protocol.response(ctx, true);\n});\n","import { $t } from \"../i18n\";\nimport * as protocol from \"../service/protocol\";\nimport { routerApp } from \"../service/router\";\nimport {\n  LOGIN_FROM_STREAM,\n  missionPassport,\n  streamLoginSuccessful\n} from \"../service/mission_passport\";\nimport InstanceSubsystem from \"../service/system_instance\";\nimport { IGNORE } from \"../const\";\n\n// Authorization authentication middleware\nrouterApp.use(async (event, ctx, data, next) => {\n  // release data flow authentication route\n  if (event === \"stream/auth\") return next();\n  // Check other routes for data flow\n  if (event.startsWith(\"stream\")) {\n    if (\n      ctx.session.stream &&\n      ctx.session?.stream?.check === true &&\n      ctx.session.type === LOGIN_FROM_STREAM\n    ) {\n      return await next();\n    }\n    return protocol.error(ctx, \"error\", IGNORE, {\n      disablePrint: true\n    });\n  }\n  return await next();\n});\n\n// Publicly accessible dataflow authentication route\nrouterApp.on(\"stream/auth\", (ctx, data) => {\n  try {\n    const password = data.password;\n    const mission = missionPassport.getMission(password, \"stream_channel\");\n    if (!mission) throw new Error($t(\"TXT_CODE_stream_router.taskNotExist\"));\n    const instance = InstanceSubsystem.getInstance(mission.parameter.instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_stream_router.instanceNotExist\"));\n    // Auth success!\n    streamLoginSuccessful(ctx, instance.instanceUuid);\n    // Start forwarding output stream data to this Socket\n    InstanceSubsystem.forward(instance.instanceUuid, ctx.socket);\n    // Cancel forwarding events when registration is disconnected\n    ctx.socket.on(\"disconnect\", () => {\n      InstanceSubsystem.stopForward(instance.instanceUuid, ctx.socket);\n    });\n    protocol.response(ctx, true);\n  } catch (error: any) {\n    protocol.responseError(ctx, error, {\n      disablePrint: true\n    });\n  }\n});\n\n// Get instance details\nrouterApp.on(\"stream/detail\", async (ctx) => {\n  try {\n    const instanceUuid = ctx.session?.stream?.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n    protocol.response(ctx, {\n      instanceUuid: instance.instanceUuid,\n      started: instance.startCount,\n      status: instance.status(),\n      config: instance.config,\n      info: instance.info,\n      watcher: instance.watchers.size\n    });\n  } catch (error: any) {\n    protocol.responseError(ctx, error);\n  }\n});\n\n// Execute commands, line-based interactive input and output streams for ordinary processes\nrouterApp.on(\"stream/input\", async (ctx, data) => {\n  try {\n    const command = data.command;\n    const instanceUuid = ctx.session?.stream?.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    await instance?.execPreset(\"command\", command);\n  } catch (error: any) {\n    // Ignore potential high frequency exceptions here\n  }\n});\n\n// Process terminal input, suitable for direct connection input and output streams of simulated terminals.\nrouterApp.on(\"stream/write\", async (ctx, data) => {\n  try {\n    const buf = data.input;\n    const instanceUuid = ctx.session?.stream?.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    // run without command execution\n    if (instance?.process) instance.process.write(buf);\n  } catch (error: any) {\n    // Ignore potential high frequency exceptions here\n  }\n});\n\n// Handle terminal resize\n// interface IResizeOptions {\n//   h: number;\n//   w: number;\n// }\nrouterApp.on(\"stream/resize\", async (ctx, data) => {\n  try {\n    const instanceUuid = ctx.session?.stream?.instanceUuid;\n    const instance = InstanceSubsystem.getInstance(instanceUuid);\n    instance?.watchers.set(ctx.socket.id, {\n      terminalSize: {\n        w: Number(data.w) || 0,\n        h: Number(data.h) || 0\n      }\n    });\n    if (instance) await instance.execPreset(\"resize\");\n  } catch (error: any) {\n    // Ignore potential high frequency exceptions here\n  }\n});\n","import EventEmitter from \"events\";\nimport logger from \"../log\";\nimport { IExecutable } from \"../../entity/instance/preset\";\nimport Instance from \"../../entity/instance/instance\";\n\nexport type IAsyncTaskJSON = any;\n\nexport interface IAsyncTask extends EventEmitter {\n  // The taskId must be complex enough to prevent other users from accessing the information\n  taskId: string;\n  type: string;\n  start(): Promise<void>;\n  stop(): Promise<void>;\n  status(): number;\n  toObject(): IAsyncTaskJSON;\n}\n\nexport abstract class AsyncTask extends EventEmitter implements IAsyncTask, IExecutable {\n  public static readonly STATUS_STOP = 0;\n  public static readonly STATUS_RUNNING = 1;\n  public static readonly STATUS_ERROR = -1;\n\n  public taskId: string = \"\";\n  public type: string = \"\";\n\n  public errorInfo?: Error;\n\n  protected _status = AsyncTask.STATUS_STOP;\n\n  constructor() {\n    super();\n  }\n\n  public async start() {\n    this._status = AsyncTask.STATUS_RUNNING;\n    try {\n      await this.onStart();\n      this.emit(\"started\");\n    } catch (error: any) {\n      this.error(error);\n      throw error;\n    }\n  }\n\n  public async exec(_: Instance, __: any) {\n    return this.start();\n  }\n\n  public async stop() {\n    if (this._status === AsyncTask.STATUS_STOP) return Promise.resolve();\n    try {\n      await this.onStop();\n    } finally {\n      if (this._status !== AsyncTask.STATUS_ERROR) this._status = AsyncTask.STATUS_STOP;\n      this.emit(\"stopped\");\n    }\n  }\n\n  public async error(err: Error) {\n    this._status = AsyncTask.STATUS_ERROR;\n    this.errorInfo = err;\n    logger.error(`AsyncTask - ID: ${this.taskId} TYPE: ${this.type} Error:`, err);\n    await this.onError(err);\n    this.emit(\"error\", err);\n    this.stop();\n  }\n\n  public wait() {\n    return new Promise<void>((resolve, reject) => {\n      if (this._status === AsyncTask.STATUS_STOP) {\n        return resolve();\n      }\n      if (this._status === AsyncTask.STATUS_ERROR) {\n        return reject(this.errorInfo);\n      }\n      this.once(\"stopped\", () => {\n        resolve();\n      });\n      this.once(\"error\", (err) => {\n        reject(err);\n      });\n    });\n  }\n\n  status(): number {\n    return this._status;\n  }\n\n  public abstract onStart(): Promise<void>;\n  public abstract onStop(): Promise<void>;\n  public abstract onError(err: Error): Promise<void>;\n  public abstract toObject(): IAsyncTaskJSON;\n}\n\nexport class TaskCenter {\n  public static tasks = new Array<IAsyncTask>();\n\n  public static addTask(t: IAsyncTask) {\n    TaskCenter.tasks.push(t);\n    t.start();\n    t.on(\"stopped\", () => TaskCenter.onTaskStopped(t));\n    t.on(\"error\", () => TaskCenter.onTaskError(t));\n  }\n\n  public static onTaskStopped(t: IAsyncTask) {\n    logger.info(\"Async Task:\", t.taskId, \"Stopped.\");\n  }\n\n  public static onTaskError(t: IAsyncTask) {\n    logger.info(\"Async Task:\", t.taskId, \"Failed.\");\n  }\n\n  public static getTask(taskId: string, type?: string) {\n    for (const iterator of TaskCenter.tasks) {\n      if (iterator.taskId === taskId && (type == null || iterator.type === type)) return iterator;\n    }\n  }\n\n  public static getTasks(type?: string) {\n    const result: IAsyncTask[] = [];\n    for (const iterator of TaskCenter.tasks) {\n      if (type == null || iterator.type === type) {\n        result.push(iterator);\n      }\n    }\n    return result;\n  }\n\n  public static deleteAllStoppedTask() {\n    TaskCenter.tasks.forEach((v, i, arr) => {\n      if (v.status() !== 1) {\n        arr.splice(i, 1);\n      }\n    });\n  }\n}\n","import axios from \"axios\";\nimport fs from \"fs-extra\";\nimport { t } from \"i18next\";\nimport path from \"path\";\nimport { pipeline, Readable } from \"stream\";\nimport { v4 } from \"uuid\";\nimport Instance from \"../../entity/instance/instance\";\nimport InstanceConfig from \"../../entity/instance/Instance_config\";\nimport { $t } from \"../../i18n\";\nimport { getFileManager } from \"../file_router_service\";\nimport { InstanceUpdateAction } from \"../instance_update_action\";\nimport logger from \"../log\";\nimport InstanceSubsystem from \"../system_instance\";\nimport { AsyncTask, IAsyncTaskJSON, TaskCenter } from \"./index\";\n\nexport class QuickInstallTask extends AsyncTask {\n  public static TYPE = \"QuickInstallTask\";\n\n  public instance: Instance;\n  public readonly TMP_ZIP_NAME = \"mcsm_install_package.zip\";\n  public readonly ZIP_CONFIG_JSON = \"mcsmanager-config.json\";\n  public filePath = \"\";\n  public extName = \"\";\n\n  public downloadProgress = {\n    percentage: 0,\n    downloadedBytes: 0,\n    totalBytes: 0,\n    speed: 0, // bytes per second\n    eta: 0 // estimated time remaining in seconds\n  };\n\n  private lastProgressOutput = 0; // Throttle progress output\n  private isInitInstance = false;\n\n  private abortController?: AbortController;\n  private downloadStream?: fs.WriteStream;\n  private writeStream?: fs.WriteStream;\n  private updateTask?: InstanceUpdateAction;\n\n  constructor(\n    public instanceName: string,\n    public targetLink?: string,\n    public buildParams?: Partial<InstanceConfig>,\n    curInstance?: Instance\n  ) {\n    super();\n    const config = new InstanceConfig();\n    config.nickname = instanceName;\n    config.stopCommand = \"^c\";\n    if (!curInstance) {\n      config.cwd = \"\";\n      this.instance = InstanceSubsystem.createInstance(config);\n      this.isInitInstance = true;\n    } else {\n      this.instance = curInstance;\n      this.isInitInstance = false;\n    }\n\n    this.taskId = `${QuickInstallTask.TYPE}-${this.instance.instanceUuid}-${v4()}`;\n    this.type = QuickInstallTask.TYPE;\n    this.extName = path.extname(this.targetLink ?? \"\") || \".zip\";\n  }\n\n  private async download() {\n    this.abortController = new AbortController();\n    if (!this.targetLink) throw new Error(\"No targetLink!\");\n    let downloadFileName = this.TMP_ZIP_NAME;\n    if (this.extName !== \".zip\") {\n      const url = new URL(this.targetLink);\n      downloadFileName = url.pathname.split(\"/\").pop() || `application${this.extName}`;\n    }\n    this.filePath = path.normalize(path.join(this.instance.absoluteCwdPath(), downloadFileName));\n    this.writeStream = fs.createWriteStream(this.filePath);\n    if (!this.writeStream) throw new Error(\"Not writeStream!\");\n\n    // Initialize download progress\n    this.downloadProgress = {\n      percentage: 0,\n      downloadedBytes: 0,\n      totalBytes: 0,\n      speed: 0,\n      eta: 0\n    };\n\n    const response = await axios<Readable>({\n      url: this.targetLink,\n      responseType: \"stream\",\n      signal: this.abortController.signal\n    });\n\n    // Get total file size\n    const contentLength = response.headers[\"content-length\"];\n    if (contentLength) {\n      this.downloadProgress.totalBytes = parseInt(contentLength);\n    }\n\n    let lastProgressUpdate = Date.now();\n    let lastDownloadedBytes = 0;\n\n    // listen download progress\n    response.data.on(\"data\", (chunk: Buffer) => {\n      this.downloadProgress.downloadedBytes += chunk.length;\n\n      // Calculate download speed (update every second)\n      const currentTime = Date.now();\n      if (currentTime - lastProgressUpdate >= 1000) {\n        const timeDiff = (currentTime - lastProgressUpdate) / 1000;\n        const bytesDiff = this.downloadProgress.downloadedBytes - lastDownloadedBytes;\n        this.downloadProgress.speed = bytesDiff / timeDiff;\n\n        // Calculate remaining time\n        if (this.downloadProgress.speed > 0 && this.downloadProgress.totalBytes > 0) {\n          const remainingBytes =\n            this.downloadProgress.totalBytes - this.downloadProgress.downloadedBytes;\n          this.downloadProgress.eta = remainingBytes / this.downloadProgress.speed;\n        }\n\n        lastProgressUpdate = currentTime;\n        lastDownloadedBytes = this.downloadProgress.downloadedBytes;\n      }\n\n      // Calculate download percentage\n      if (this.downloadProgress.totalBytes > 0) {\n        this.downloadProgress.percentage = Math.round(\n          (this.downloadProgress.downloadedBytes / this.downloadProgress.totalBytes) * 100\n        );\n      }\n\n      // Throttle progress output to once per second\n      const now = Date.now();\n      const PROGRESS_THROTTLE_MS = 1000;\n      if (now - this.lastProgressOutput >= PROGRESS_THROTTLE_MS) {\n        const downloadText = t(\"TXT_CODE_b135e9bd\");\n        const speed = `${(this.downloadProgress.speed / 1024 / 1024).toFixed(2)} MB/s`;\n        this.instance.println(\n          \"INFO\",\n          `${downloadText} ${this.downloadProgress.percentage}% ${speed}`\n        );\n        this.lastProgressOutput = now;\n      }\n    });\n\n    // await download\n    await new Promise<boolean>(async (resolve, reject) => {\n      this.downloadStream = pipeline(response.data, this.writeStream!, (err) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(true);\n        }\n      });\n    });\n\n    this.downloadProgress.percentage = 100;\n    this.downloadProgress.downloadedBytes = this.downloadProgress.totalBytes;\n    this.instance.println(\"INFO\", `Download \"${this.targetLink}\" success!!!`);\n  }\n\n  async onStart() {\n    this.instance.print(\"\\n\");\n    if (\n      this.instance.config.processType === \"docker\" &&\n      this.buildParams?.processType !== \"docker\"\n    ) {\n      this.instance.println(\"ERROR\", $t(\"TXT_CODE_f8145844\"));\n      this.stop();\n      return;\n    }\n\n    this.instance.println(\"INFO\", $t(\"TXT_CODE_e166bc2f\"));\n\n    const fileManager = getFileManager(this.instance.instanceUuid);\n    try {\n      this.instance.status(Instance.STATUS_BUSY);\n      if (this.isInitInstance) {\n        if (this.instance.asynchronousTask) {\n          throw new Error($t(\"TXT_CODE_5b0e93b5\"));\n        }\n        this.instance.asynchronousTask = this;\n      }\n\n      if (this.targetLink) {\n        await this.download();\n        this.instance.println(\"INFO\", $t(\"TXT_CODE_e4a926bf\"));\n        if (this.extName === \".zip\") {\n          const isOk = await fileManager.unzip(this.TMP_ZIP_NAME, \".\", \"UTF-8\");\n          if (!isOk) {\n            this.error(new Error($t(\"TXT_CODE_quick_install.unzipError\")));\n            return;\n          }\n        }\n      }\n\n      this.instance.println(\"INFO\", $t(\"TXT_CODE_9df98e2\"));\n      let config: Partial<InstanceConfig>;\n      if (this.buildParams?.startCommand || !fs.existsSync(this.ZIP_CONFIG_JSON)) {\n        config = this.buildParams || {};\n      } else {\n        config = JSON.parse(await fileManager.readFile(this.ZIP_CONFIG_JSON));\n      }\n\n      logger.info(\n        t(\"TXT_CODE_e5ba712d\"),\n        this.instance.config.nickname,\n        this.instance.instanceUuid,\n        \"URL:\",\n        this.targetLink\n      );\n      logger.info(t(\"TXT_CODE_ac225d07\") + JSON.stringify(config));\n\n      this.instance.resetConfigWithoutDocker();\n      this.instance.parameters(config, true);\n\n      this.instance.println(\"INFO\", $t(\"TXT_CODE_4eccdde8\"));\n\n      if (this.instance?.config?.updateCommand) {\n        try {\n          this.instance.println(\"INFO\", $t(\"TXT_CODE_e577c77c\"));\n          this.updateTask = new InstanceUpdateAction(this.instance);\n          await this.updateTask.start();\n          await this.updateTask.wait();\n          this.instance.println(\"INFO\", $t(\"TXT_CODE_9b4985d3\"));\n          this.instance.println(\"INFO\", $t(\"TXT_CODE_1562f6cf\"));\n        } catch (error: any) {\n          this.instance.println(\n            \"ERROR\",\n            `\\n========================================\n${$t(\"TXT_CODE_47d56d0d\")}\n${error?.message}\n========================================\\n`\n          );\n        }\n      } else {\n        this.instance.println(\"INFO\", $t(\"TXT_CODE_1562f6cf\"));\n      }\n\n      this.stop();\n    } catch (error: any) {\n      this.error(error);\n    } finally {\n      this.instance.status(Instance.STATUS_STOP);\n      if (this.isInitInstance && this.instance.asynchronousTask === this)\n        this.instance.asynchronousTask = undefined;\n      if (fs.existsSync(fileManager.toAbsolutePath(this.TMP_ZIP_NAME)))\n        fs.remove(fileManager.toAbsolutePath(this.TMP_ZIP_NAME), () => {});\n    }\n  }\n\n  async onStop() {\n    try {\n      this.abortController?.abort();\n      this.writeStream?.destroy();\n      this.downloadStream?.destroy();\n      this.writeStream = undefined;\n      this.downloadStream = undefined;\n      this.abortController = undefined;\n    } catch (error: any) {\n      this.instance.println(\n        \"ERROR\",\n        \"QuickInstallTask -> onStop(): destroy download stream error: \" + error?.message\n      );\n      logger.error(\"QuickInstallTask -> onStop(): destroy download stream error: \", error);\n    }\n\n    try {\n      await this.updateTask?.stop();\n      this.updateTask = undefined;\n    } catch (error: any) {\n      this.instance.println(\n        \"ERROR\",\n        \"QuickInstallTask -> onStop(): updateTask stop error: \" + error?.message\n      );\n      logger.error(\"QuickInstallTask -> onStop(): updateTask stop error: \", error);\n    } finally {\n      this.instance.print(\"\\n\");\n    }\n  }\n\n  toObject(): IAsyncTaskJSON {\n    return JSON.parse(\n      JSON.stringify({\n        taskId: this.taskId,\n        status: this.status(),\n        instanceUuid: this.instance.instanceUuid,\n        instanceStatus: this.instance.status(),\n        instanceConfig: this.instance.config,\n        downloadProgress: this.downloadProgress\n      })\n    );\n  }\n\n  async onError(err: Error) {\n    this.instance.println(\"ERROR\", err?.message);\n  }\n}\n\nexport function createQuickInstallTask(\n  targetLink?: string,\n  instanceName?: string,\n  buildParams?: any\n) {\n  if (!instanceName) throw new Error(\"Instance name is empty!\");\n  const task = new QuickInstallTask(instanceName, targetLink, buildParams);\n  TaskCenter.addTask(task);\n  return task;\n}\n","import fs from \"fs-extra\";\nimport { GOLANG_ZIP_PATH } from \"../const\";\nimport { initSteamCmd } from \"../tools/steam_cmd\";\n\nexport function checkDependencies() {\n  initSteamCmd();\n\n  const dependencies = [GOLANG_ZIP_PATH];\n  dependencies.forEach((path) => {\n    if (!fs.existsSync(path)) {\n      throw new Error(`MCSManager requires additional dependencies to run. Please download the files suitable for your system architecture from the following locations:\\n1. https://github.com/MCSManager/PTY/releases\\n2. https://github.com/MCSManager/Zip-Tools/releases`);\n    }\n  });\n}\n","import { t } from \"i18next\";\nimport { commandStringToArray } from \"../entity/commands/base/command_parser\";\nimport DockerPullCommand from \"../entity/commands/docker/docker_pull\";\nimport Instance from \"../entity/instance/instance\";\nimport { DefaultDocker } from \"./docker_service\";\n\nimport Docker from \"dockerode\";\nimport fs from \"fs-extra\";\nimport iconv from \"iconv-lite\";\nimport { toText } from \"mcsmanager-common\";\nimport path from \"path\";\nimport { EventEmitter } from \"stream\";\nimport { IInstanceProcess } from \"../entity/instance/interface\";\nimport { $t } from \"../i18n\";\nimport { AsyncTask } from \"./async_task_service\";\nimport logger from \"./log\";\n\ntype PublicPortArray = {\n  [key: string]: { HostPort: string }[];\n};\n\ntype ExposedPorts = {\n  [key: string]: {};\n};\n\n// Error exception at startup\nexport class StartupDockerProcessError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\nexport interface IDockerProcessAdapterStartParam {\n  isTty: boolean;\n  h: number;\n  w: number;\n}\n\nexport class SetupDockerContainer extends AsyncTask {\n  private container?: Docker.Container;\n\n  constructor(public readonly instance: Instance, public readonly startCommand?: string) {\n    super();\n  }\n\n  public async onStart() {\n    const instance = this.instance;\n    const customCommand = this.startCommand;\n\n    try {\n      await instance.forceExec(new DockerPullCommand());\n    } catch (error: any) {\n      throw error;\n    }\n\n    // Command text parsing\n    let commandList: string[];\n    if (instance.config?.startCommand?.trim() || customCommand?.trim()) {\n      const tmpCmd = customCommand ?? instance.config.startCommand;\n      commandList = commandStringToArray(instance.parseTextParams(tmpCmd));\n    } else {\n      commandList = [];\n    }\n    const dockerConfig = instance.config.docker;\n    if (!dockerConfig) {\n      throw new Error(\"Instance's Docker configuration is not found! \");\n    }\n\n    // Parsing port open\n    // 25565:25565/tcp 8080:8080/tcp\n    const portMap = dockerConfig.ports || [];\n\n    const logOpenedPorts: { host: number; container: number; protocol: string }[] = [];\n    const publicPortArray: PublicPortArray = {};\n    const exposedPorts: ExposedPorts = {};\n    for (const portConfigText of portMap) {\n      const elem = instance.parseTextParams(portConfigText).split(\"/\");\n      if (elem.length != 2) throw new Error($t(\"TXT_CODE_1cf6fc4b\"));\n      const ports = elem[0];\n      const protocol = elem[1];\n      //Host (host) port: container port\n      const publicAndPrivatePort = ports.split(\":\");\n      if (publicAndPrivatePort.length != 2) throw new Error(t(\"TXT_CODE_2029027e\"));\n      publicPortArray[`${publicAndPrivatePort[1]}/${protocol}`] = [\n        { HostPort: publicAndPrivatePort[0] }\n      ];\n      exposedPorts[`${publicAndPrivatePort[1]}/${protocol}`] = {};\n      logOpenedPorts.push({\n        host: Number(publicAndPrivatePort[0]),\n        container: Number(publicAndPrivatePort[1]),\n        protocol: protocol\n      });\n    }\n\n    // resolve extra path mounts\n    const extraVolumes = dockerConfig.extraVolumes || [];\n    const extraBinds: { hostPath: string; containerPath: string }[] = [];\n    for (const item of extraVolumes) {\n      if (!item) throw new Error($t(\"TXT_CODE_ae441ea3\"));\n      const paths = item.split(\"|\");\n      if (paths.length < 2) throw new Error($t(\"TXT_CODE_dca030b8\"));\n      const hostPath = path.normalize(paths[0]);\n      const containerPath = path.normalize(paths[1]);\n      extraBinds.push({ hostPath, containerPath });\n    }\n\n    // memory limit\n    let maxMemory: number | undefined = undefined;\n    if (typeof dockerConfig.memory === \"number\" && dockerConfig.memory > 0)\n      maxMemory = dockerConfig.memory * 1024 * 1024;\n\n    // CPU usage calculation\n    let cpuQuota: number | undefined = undefined;\n    let cpuPeriod: number | undefined = undefined;\n    if (typeof dockerConfig.cpuUsage === \"number\" && dockerConfig.cpuUsage > 0) {\n      cpuQuota = dockerConfig.cpuUsage * 10 * 1000;\n      cpuPeriod = 1000 * 1000;\n    }\n\n    // Check the number of CPU cores\n    let cpusetCpus: string | undefined = undefined;\n    if (dockerConfig.cpusetCpus) {\n      const arr = dockerConfig.cpusetCpus.split(\",\");\n      arr.forEach((v: string) => {\n        if (isNaN(Number(v))) throw new Error($t(\"TXT_CODE_instance.invalidCpu\", { v }));\n      });\n      cpusetCpus = dockerConfig.cpusetCpus;\n    }\n\n    // memory swap and swappiness\n    let memorySwap: number | undefined = undefined;\n    let memorySwappiness: number | undefined = undefined;\n    if (typeof dockerConfig.memorySwap === \"number\" && maxMemory)\n      memorySwap = dockerConfig.memorySwap * 1024 * 1024 + maxMemory;\n    if (\n      typeof dockerConfig.memorySwappiness === \"number\" &&\n      dockerConfig.memorySwappiness <= 100 &&\n      dockerConfig.memorySwappiness >= 0 &&\n      maxMemory\n    )\n      memorySwappiness = dockerConfig.memorySwappiness;\n\n    // container name check\n    let containerName = dockerConfig.containerName || `MCSM-${instance.instanceUuid.slice(0, 6)}`;\n    if (containerName && (containerName.length > 64 || containerName.length < 2)) {\n      throw new Error($t(\"TXT_CODE_instance.invalidContainerName\", { v: containerName }));\n    }\n\n    // Whether to use TTY mode\n    const isTty = instance.config.terminalOption.pty;\n\n    const workingDir = dockerConfig.workingDir || undefined;\n\n    let cwd = instance.absoluteCwdPath();\n    const hostRealPath = toText(process.env.MCSM_DOCKER_WORKSPACE_PATH);\n    if (hostRealPath) {\n      cwd = path.normalize(path.join(hostRealPath, instance.instanceUuid));\n    }\n\n    const mounts: Docker.MountConfig =\n      extraBinds.map((v) => {\n        const hostPath = instance.parseTextParams(v.hostPath);\n        if (!fs.existsSync(hostPath)) fs.mkdirsSync(hostPath);\n        return {\n          Type: \"bind\",\n          Source: hostPath,\n          Target: instance.parseTextParams(v.containerPath)\n        };\n      }) || [];\n    if (workingDir && cwd) {\n      mounts.push({\n        Type: \"bind\",\n        Source: cwd,\n        Target: instance.parseTextParams(workingDir)\n      });\n    }\n\n    logger.info(\"----------------\");\n    logger.info(`[SetupDockerContainer]`);\n    logger.info(`UUID: [${instance.instanceUuid}] [${instance.config.nickname}]`);\n    logger.info(`NAME: [${containerName}]`);\n    logger.info(`COMMAND: ${commandList.join(\" \")}`);\n    logger.info(`CWD: ${cwd}, WORKING_DIR: ${workingDir}`);\n    logger.info(`NET_MODE: ${dockerConfig.networkMode}`);\n    logger.info(`OPEN_PORT: ${JSON.stringify(publicPortArray)}`);\n    logger.info(`Volume Mounts: ${JSON.stringify(mounts)}`);\n    logger.info(`NET_ALIASES: ${JSON.stringify(dockerConfig.networkAliases)}`);\n    logger.info(\n      `MEM_LIMIT: ${maxMemory ? (maxMemory / 1024 / 1024).toFixed(2) : \"--\"} MB, Swap: ${\n        memorySwap ? (memorySwap / 1024 / 1024).toFixed(2) : \"--\"\n      } MB`\n    );\n    logger.info(`TYPE: Docker Container`);\n    logger.info(\"----------------\");\n\n    if (workingDir) {\n      instance.println(\"INFO\", $t(\"TXT_CODE_e76e49e9\") + cwd + \" --> \" + workingDir + \"\\n\");\n    }\n\n    if (logOpenedPorts.length) {\n      instance.info.allocatedPorts = logOpenedPorts;\n      instance.println(\"INFO\", $t(\"TXT_CODE_c1c548fb\"));\n      logOpenedPorts.forEach((v) => {\n        instance.println(\n          \"INFO\",\n          $t(\"TXT_CODE_1e03347e\", {\n            host: v.host,\n            container: v.container,\n            protocol: v.protocol\n          })\n        );\n      });\n    } else {\n      instance.info.allocatedPorts = [];\n    }\n\n    // Start Docker container creation and running\n    const docker = new DefaultDocker();\n    this.container = await docker.createContainer({\n      name: containerName,\n      Hostname: containerName,\n      Image: dockerConfig.image,\n      AttachStdin: true,\n      AttachStdout: true,\n      AttachStderr: true,\n      Tty: isTty,\n      WorkingDir: dockerConfig.changeWorkdir ? workingDir : undefined,\n      Entrypoint: commandList.length ? commandList[0] : void 0,\n      Cmd: commandList.length > 1 ? commandList.slice(1) : undefined,\n      OpenStdin: true,\n      StdinOnce: false,\n      ExposedPorts: exposedPorts,\n      Env: dockerConfig?.env || [],\n      User: instance.config.runAs || undefined,\n      Labels: {\n        \"mcsmanager.instance.uuid\": instance.instanceUuid\n      },\n      HostConfig: {\n        Memory: maxMemory,\n        MemorySwap: memorySwap,\n        MemorySwappiness: memorySwappiness,\n        AutoRemove: true,\n        CpusetCpus: cpusetCpus,\n        CpuPeriod: cpuPeriod,\n        CpuQuota: cpuQuota,\n        PortBindings: publicPortArray,\n        NetworkMode: dockerConfig.networkMode,\n        Mounts: mounts\n      },\n      NetworkingConfig: {\n        EndpointsConfig: {\n          [dockerConfig.networkMode || \"bridge\"]: {\n            Aliases: dockerConfig.networkAliases\n          }\n        }\n      }\n    });\n\n    await this.container.start();\n\n    // Listen to events\n    this.container.wait(() => this.stop());\n  }\n\n  public async onStop() {\n    try {\n      await this.container?.kill();\n    } catch (error) {}\n    try {\n      await this.container?.remove();\n    } catch (error) {}\n  }\n\n  public getContainer() {\n    if (!this.container) throw new Error(\"Function getContainer(): Failed, Container is Null!\");\n    return this.container;\n  }\n\n  public async attach(instance: Instance) {\n    const outputCode = instance.config.terminalOption.pty ? \"utf-8\" : instance.config.oe;\n    const container = this.container;\n    if (!container) throw new Error(\"Attach Failed, Container is Null!\");\n    try {\n      const stream = await container.attach({\n        stream: true,\n        stdout: true,\n        stderr: true,\n        stdin: true,\n        hijack: true\n      });\n      stream.on(\"data\", (text: any) => instance.print(iconv.decode(text, outputCode)));\n      stream.on(\"error\", (text: any) => instance.print(iconv.decode(text, outputCode)));\n    } catch (error: any) {\n      this.error(error);\n      throw error;\n    }\n  }\n\n  public async onError(err: Error) {}\n\n  public toObject() {}\n}\n\n// SubProcess adapter for Instance\nexport class DockerProcessAdapter extends EventEmitter implements IInstanceProcess {\n  pid?: number | string;\n\n  private stream?: NodeJS.ReadWriteStream;\n  public container?: Docker.Container;\n\n  constructor(public readonly containerWrapper: SetupDockerContainer) {\n    super();\n  }\n\n  // Once the program is actually started, no errors can block the next startup process\n  public async start(param: IDockerProcessAdapterStartParam, container?: Docker.Container) {\n    try {\n      if (container) {\n        this.container = container;\n      } else {\n        await this.containerWrapper.start();\n        this.container = this.containerWrapper.getContainer();\n      }\n\n      const { isTty, h, w } = param;\n      if (isTty) {\n        this.container.resize({ h, w });\n      }\n\n      this.pid = this.container.id;\n      this.stream = await this.container.attach({\n        stream: true,\n        stdout: true,\n        stderr: true,\n        stdin: true,\n        hijack: true\n      });\n      this.stream.on(\"data\", (data) => this.emit(\"data\", data));\n      this.stream.on(\"error\", (data) => this.emit(\"data\", data));\n      this.wait();\n    } catch (error: any) {\n      this.kill();\n      throw error;\n    }\n  }\n\n  public write(data?: string) {\n    if (this.stream && data) this.stream.write(data);\n  }\n\n  public async kill(s?: string) {\n    await this.container?.kill();\n    return true;\n  }\n\n  public async destroy() {\n    try {\n      await this.container?.remove();\n    } catch (error: any) {}\n  }\n\n  private wait() {\n    this.container?.wait(async (v) => {\n      await this.destroy();\n      this.emit(\"exit\", v);\n    });\n  }\n}\n","import Docker from \"dockerode\";\nimport { Readable } from \"node:stream\";\nimport os from \"os\";\n\nexport class DefaultDocker extends Docker {\n  public static readonly defaultConfig: Docker.DockerOptions = {\n    socketPath:\n      process.env.DOCKER_HOST ??\n      (os.platform() == \"win32\" ? \"//./pipe/docker_engine\" : \"/var/run/docker.sock\")\n  };\n\n  constructor(p?: Docker.DockerOptions) {\n    super(Object.assign(p ?? {}, DefaultDocker.defaultConfig));\n  }\n}\n\nexport class DockerManager {\n  // 1=creating 2=creating completed -1=creating error\n  public static readonly builderProgress = new Map<string, number>();\n\n  public docker: Docker;\n\n  constructor(p?: any) {\n    this.docker = new DefaultDocker(p);\n  }\n\n  public getDocker() {\n    return this.docker;\n  }\n\n  public static setBuilderProgress(imageName: string, status: number) {\n    DockerManager.builderProgress.set(imageName, status);\n  }\n\n  public static getBuilderProgress(imageName: string) {\n    return DockerManager.builderProgress.get(imageName);\n  }\n\n  async startBuildImage(dockerFileDir: string, dockerImageName: string) {\n    try {\n      // Set the current image creation progress\n      DockerManager.setBuilderProgress(dockerImageName, 1);\n      // Issue the create image command\n      const stream = await this.docker.buildImage(\n        {\n          context: dockerFileDir,\n          src: [\"Dockerfile\"]\n        },\n        { t: dockerImageName }\n      );\n      // wait for creation to complete\n      await new Promise((resolve, reject) => {\n        this.docker.modem.followProgress(Readable.from(stream), (err, res) =>\n          err ? reject(err) : resolve(res)\n        );\n      });\n      // Set the current image creation progress\n      DockerManager.setBuilderProgress(dockerImageName, 2);\n    } catch (error: any) {\n      // Set the current image creation progress\n      DockerManager.setBuilderProgress(dockerImageName, -1);\n    }\n  }\n}\n","import fs from \"fs-extra\";\nimport { $t } from \"../i18n\";\nimport InstanceSubsystem from \"../service/system_instance\";\nimport FileManager from \"./system_file\";\nimport os from \"os\";\n\nexport function getFileManager(instanceUuid: string) {\n  // Initialize a file manager for the instance, and assign codes, restrictions, etc.\n  const instance = InstanceSubsystem.getInstance(instanceUuid);\n  if (!instance)\n    throw new Error($t(\"TXT_CODE_file_router_service.instanceNotExit\", { uuid: instanceUuid }));\n  const fileCode = instance.config?.fileCode;\n  return new FileManager(instance.absoluteCwdPath(), fileCode);\n}\n\nlet cacheDisks: string[] = [];\n\nexport function getWindowsDisks() {\n  if (os.platform() !== \"win32\") return [];\n  if (cacheDisks.length > 0) return cacheDisks;\n  const res: string[] = [];\n  // A - Z\n  for (let i = 65; i <= 90; i++) {\n    const letter = String.fromCharCode(i);\n    try {\n      if (fs.existsSync(`${letter}:\\\\`)) res.push(letter);\n    } catch (error) {\n      // ignore error\n    }\n  }\n  cacheDisks = res;\n  return res;\n}\n","import Koa from \"koa\";\nimport koaBody from \"koa-body\";\nimport { removeTrail } from \"mcsmanager-common\";\nimport { globalConfiguration } from \"../entity/config\";\nimport { uploadFileCheckMiddleware, uploadSpeedLimitMiddleware } from \"../middlewares/precheck\";\nimport koaRouter from \"../routers/http_router\";\nimport logger from \"./log\";\n\nexport function initKoa() {\n  const koaApp = new Koa();\n  const config = globalConfiguration.config;\n  koaApp.use(uploadSpeedLimitMiddleware);\n  koaApp.use(uploadFileCheckMiddleware);\n  koaApp.use(\n    koaBody({\n      multipart: true,\n      formidable: {\n        maxFileSize: 1024 * 1024 * 100, // 100MB\n        maxFiles: 1\n      },\n      jsonLimit: \"10mb\",\n      onError(err, ctx) {\n        logger.error(\"koaBody Lib Error:\", err);\n      }\n    })\n  );\n  // Load Koa top-level middleware\n  koaApp.use(async (ctx, next) => {\n    await next();\n    // Because all HTTP requests can only be used by creating a task passport on the panel side, cross-domain requests are allowed, and security can also be guaranteed\n    ctx.response.set(\"Access-Control-Allow-Origin\", \"*\");\n    ctx.response.set(\"Access-Control-Allow-Methods\", \"POST, GET, PUT, DELETE, OPTIONS\");\n    ctx.response.set(\n      \"Access-Control-Allow-Headers\",\n      \"Content-Type, Cookie, Accept-Encoding, User-Agent, Host, Referer, \" +\n        \"X-Requested-With, Accept, Accept-Language, Cache-Control, Connection\"\n    );\n    ctx.response.set(\"X-Power-by\", \"MCSManager\");\n  });\n\n  if (config.prefix != \"\") {\n    const prefix = config.prefix;\n    koaApp.use(async (ctx, next) => {\n      if (ctx.url.startsWith(prefix)) {\n        const orig = ctx.url;\n        ctx.url = ctx.url.slice(prefix.length);\n        if (!ctx.url.startsWith(\"/\")) {\n          ctx.url = \"/\" + ctx.url;\n        }\n        await next();\n        ctx.url = orig;\n      } else {\n        ctx.redirect(removeTrail(prefix, \"/\") + ctx.url);\n      }\n    });\n  }\n  koaApp.use(koaRouter.routes()).use(koaRouter.allowedMethods());\n  return koaApp;\n}\n","import { ChildProcessWithoutNullStreams, spawn } from \"child_process\";\nimport iconv from \"iconv-lite\";\nimport { killProcess } from \"mcsmanager-common\";\nimport { commandStringToArray } from \"../entity/commands/base/command_parser\";\nimport Instance from \"../entity/instance/instance\";\nimport { $t } from \"../i18n\";\nimport { AsyncTask, IAsyncTaskJSON } from \"../service/async_task_service\";\nimport logger from \"../service/log\";\nimport { SetupDockerContainer } from \"./docker_process_service\";\n\nexport class InstanceUpdateAction extends AsyncTask {\n  public pid?: number;\n\n  private process?: ChildProcessWithoutNullStreams;\n  private containerWrapper?: SetupDockerContainer;\n\n  constructor(public readonly instance: Instance) {\n    super();\n  }\n\n  public async onStart() {\n    const updateCommand = this.instance.parseTextParams(this.instance.config.updateCommand);\n    logger.info(\n      $t(\"TXT_CODE_general_update.readyUpdate\", { instanceUuid: this.instance.instanceUuid })\n    );\n    logger.info(\n      $t(\"TXT_CODE_general_update.updateCmd\", { instanceUuid: this.instance.instanceUuid })\n    );\n    logger.info(updateCommand);\n\n    this.instance.print(\"\\n\");\n    this.instance.println(\n      $t(\"TXT_CODE_general_update.update\"),\n      $t(\"TXT_CODE_general_update.readyUpdate\", { instanceUuid: this.instance.instanceUuid })\n    );\n    this.instance.println($t(\"TXT_CODE_general_update.update\"), `${updateCommand}`);\n\n    // Docker Update Command Mode\n    if (this.instance.config.processType === \"docker\" && this.instance.config.docker?.image) {\n      this.containerWrapper = new SetupDockerContainer(this.instance, updateCommand);\n      await this.containerWrapper.start();\n      await this.containerWrapper.attach(this.instance);\n      await this.containerWrapper.wait();\n      this.stop();\n      return;\n    }\n\n    const commandList = commandStringToArray(updateCommand);\n    const commandExeFile = commandList[0];\n    const commandParameters = commandList.slice(1);\n    if (commandList.length === 0) {\n      throw new Error($t(\"TXT_CODE_general_update.cmdFormatErr\"));\n    }\n\n    // start the update command\n    const process = spawn(commandExeFile, commandParameters, {\n      cwd: this.instance.absoluteCwdPath(),\n      stdio: \"pipe\",\n      windowsHide: true\n    });\n    if (!process || !process.pid) {\n      throw new Error($t(\"TXT_CODE_general_update.updateFailed\"));\n    }\n\n    // process & pid\n    this.pid = process.pid;\n    this.process = process;\n\n    process.stdout.on(\"data\", (text) => {\n      this.instance.print(iconv.decode(text, this.instance.config.oe));\n    });\n    process.stderr.on(\"data\", (text) => {\n      this.instance.print(iconv.decode(text, this.instance.config.oe));\n    });\n\n    process.on(\"exit\", (code) => {\n      if (code === 0) {\n        this.stop();\n      } else {\n        this.error(new Error($t(\"TXT_CODE_general_update.updateErr\")));\n      }\n    });\n  }\n\n  public async onStop() {\n    if (this.containerWrapper) {\n      await this.containerWrapper.stop();\n    }\n    if (this.pid && this.process) {\n      killProcess(this.pid, this.process);\n    }\n  }\n\n  public async onError(err: Error) {}\n  public toObject(): IAsyncTaskJSON {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n","import fs from \"fs-extra\";\nimport * as log4js from \"log4js\";\nimport { systemInfo } from \"mcsmanager-common\";\nimport { $t } from \"../i18n\";\n\nconst LOG_FILE_PATH = \"logs/current.log\";\nconst LOG_SYS_INFO_FILE_PATH = \"logs/sysinfo.log\";\n\nconst time = new Date();\nconst timeString =\n  `${time.getFullYear()}-${time.getMonth() + 1}-${time.getDate()}` +\n  `_${time.getHours()}-${time.getMinutes()}-${time.getSeconds()}`;\n\nif (fs.existsSync(LOG_FILE_PATH)) {\n  fs.renameSync(LOG_FILE_PATH, `logs/${timeString}.log`);\n}\n\nif (fs.existsSync(LOG_SYS_INFO_FILE_PATH)) {\n  fs.renameSync(LOG_SYS_INFO_FILE_PATH, `logs/sysinfo_${timeString}.log`);\n}\n\nlog4js.configure({\n  appenders: {\n    out: {\n      type: \"stdout\",\n      layout: {\n        type: \"pattern\",\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%[%p%]] %m\"\n      }\n    },\n    app: {\n      type: \"file\",\n      filename: LOG_FILE_PATH,\n      layout: {\n        type: \"pattern\",\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%p] %m\"\n      }\n    },\n    sys: {\n      type: \"file\",\n      filename: LOG_SYS_INFO_FILE_PATH,\n      layout: {\n        type: \"pattern\",\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%p] %m\"\n      }\n    }\n  },\n  categories: {\n    default: {\n      appenders: [\"out\", \"app\"],\n      level: \"info\"\n    },\n    sysinfo: {\n      appenders: [\"sys\"],\n      level: \"info\"\n    }\n  }\n});\n\nconst logger = log4js.getLogger(\"default\");\nconst loggerSysInfo = log4js.getLogger(\"sysinfo\");\nfunction toInt(v: number) {\n  return parseInt(String(v));\n}\n\nfunction systemInfoReport() {\n  const MB_SIZE = 1024 * 1024;\n  const info = systemInfo();\n\n  const self = process.memoryUsage();\n  const sysInfo =\n    `MEM: ${toInt((info.totalmem - info.freemem) / MB_SIZE)}MB/${toInt(\n      info.totalmem / MB_SIZE\n    )}MB` + ` CPU: ${toInt(info.cpuUsage * 100)}%`;\n  const selfInfo = `Heap: ${toInt(self.heapUsed / MB_SIZE)}MB/${toInt(self.heapTotal / MB_SIZE)}MB`;\n  const selfInfo2 = `RSS: ${toInt(self.rss / MB_SIZE)}MB`;\n  const logTip = $t(\"TXT_CODE_app.sysinfo\");\n  loggerSysInfo.info([`[${logTip}]`, sysInfo, selfInfo, selfInfo2].join(\" \"));\n}\n\nsetInterval(systemInfoReport, 1000 * 5);\n\nexport default logger;\n","import RouterContext from \"../entity/ctx\";\n\ninterface IMission {\n  name: string;\n  parameter: any;\n  start: number;\n  end: number;\n  count?: number;\n  isDeleted?: boolean;\n}\n\n// Task passport manager\nclass MissionPassport {\n  // temporary task passport list\n  public readonly missions = new Map<string, IMission>();\n\n  constructor() {\n    // Set up to check the task expiration every hour\n    setInterval(() => {\n      const t = new Date().getTime();\n      this.missions.forEach((m, k) => {\n        if (t > m.end || m.isDeleted) this.missions.delete(k);\n      });\n    }, 1000 * 60);\n  }\n\n  // register task passport\n  public registerMission(password: string, mission: IMission) {\n    if (this.missions.has(password))\n      throw new Error(\"Duplicate primary key, failed to create task\");\n    this.missions.set(password, mission);\n  }\n\n  // Get the task based on the passport and task name\n  public getMission(password: string, missionName: string) {\n    if (!this.missions.has(password)) return null;\n    const m = this.missions.get(password);\n    if (m?.name === missionName) return m;\n    return null;\n  }\n\n  public deleteMission(password: string) {\n    const m = this.missions.get(password);\n    if (m) m.isDeleted = true;\n  }\n}\n\nconst LOGIN_BY_TOP_LEVEL = \"TOP_LEVEL\";\nconst LOGIN_FROM_STREAM = \"STREAM\";\n\n// This function must be executed after successful login\nfunction loginSuccessful(ctx: RouterContext, key: string) {\n  ctx.session.key = key;\n  ctx.session.login = true;\n  ctx.session.id = ctx.socket.id;\n  ctx.session.type = LOGIN_BY_TOP_LEVEL;\n  ctx.session.stream = {};\n  return ctx.session;\n}\n\nfunction streamLoginSuccessful(ctx: RouterContext, instanceUuid: string) {\n  ctx.session.id = ctx.socket.id;\n  ctx.session.login = true;\n  ctx.session.type = LOGIN_FROM_STREAM;\n  ctx.session.stream = {\n    check: true,\n    instanceUuid\n  };\n  return ctx.session;\n}\n\nconst missionPassport = new MissionPassport();\n\nexport {\n  missionPassport,\n  IMission,\n  LOGIN_BY_TOP_LEVEL,\n  LOGIN_FROM_STREAM,\n  loginSuccessful,\n  streamLoginSuccessful\n};\n","import { $t } from \"../i18n\";\nimport { Socket } from \"socket.io\";\nimport RouterContext from \"../entity/ctx\";\nimport logger from \"./log\";\nimport { IGNORE } from \"../const\";\n\n// Define network protocols and common send/broadcast/parse functions, the client should also have this file\n\nconst STATUS_OK = 200;\nconst STATUS_ERR = 500;\n\n// packet format definition\nexport interface IPacket {\n  uuid: string | null;\n  status: number;\n  event: string | null;\n  data: any;\n}\n\nexport interface IResponseErrorConfig {\n  disablePrint: boolean;\n}\n\n// global socket storage\nconst globalSocket = new Map<String, Socket>();\n\nexport class Packet implements IPacket {\n  constructor(\n    public uuid: string | null = null,\n    public status = 200,\n    public event: string | null = null,\n    public data: any = null\n  ) {}\n}\n\nexport function response(ctx: RouterContext, data: any) {\n  if (ctx.event) {\n    const packet = new Packet(ctx.uuid, STATUS_OK, ctx.event, data);\n    ctx.socket.emit(ctx.event, packet);\n  }\n}\n\nexport function responseError(\n  ctx: RouterContext,\n  err: Error | string,\n  config?: IResponseErrorConfig\n) {\n  let errinfo: any = \"\";\n  if (err) errinfo = err.toString();\n  else errinfo = err;\n  const packet = new Packet(ctx.uuid, STATUS_ERR, ctx.event, errinfo);\n  // Ignore\n  if (String(err).includes(IGNORE) && ctx.event) return ctx.socket.emit(ctx.event, packet);\n  if (!config?.disablePrint)\n    logger.warn(\n      $t(\"TXT_CODE_protocol.socketErr\", {\n        id: ctx.socket.id,\n        address: ctx.socket.handshake.address,\n        event: ctx.event\n      }),\n      err\n    );\n  if (ctx.event) ctx.socket.emit(ctx.event, packet);\n}\n\nexport function msg(ctx: RouterContext, event: string, data: any) {\n  const packet = new Packet(ctx.uuid, STATUS_OK, event, data);\n  ctx.socket.emit(event, packet);\n}\n\nexport function error(ctx: RouterContext, event: string, err: any, config?: IResponseErrorConfig) {\n  const packet = new Packet(ctx.uuid, STATUS_ERR, event, err);\n  // Ignore\n  if (String(err).includes(IGNORE) && ctx.event) return ctx.socket.emit(ctx.event, packet);\n  if (!config?.disablePrint)\n    logger.warn(\n      $t(\"TXT_CODE_protocol.socketErr\", {\n        id: ctx.socket.id,\n        address: ctx.socket.handshake.address,\n        event: ctx.event\n      }),\n      err\n    );\n\n  ctx.socket.emit(event, packet);\n}\n\nexport function parse(text: IPacket) {\n  if (typeof text == \"object\") {\n    return new Packet(text.uuid || null, text.status, text.event, text.data);\n  }\n  const obj = JSON.parse(text);\n  return new Packet(null, obj.status, obj.event, obj.data);\n}\n\nexport function stringify(obj: any) {\n  return JSON.stringify(obj);\n}\n\nexport function addGlobalSocket(socket: Socket) {\n  globalSocket.set(socket.id, socket);\n}\n\nexport function delGlobalSocket(socket: Socket) {\n  globalSocket.delete(socket.id);\n}\n\nexport function socketObjects() {\n  return globalSocket;\n}\n\n// global socket broadcast\nexport function broadcast(event: string, obj: any) {\n  globalSocket.forEach((socket) => {\n    msg(new RouterContext(null, socket), event, obj);\n  });\n}\n","import { $t } from \"../i18n\";\nimport { EventEmitter } from \"events\";\nimport { Socket } from \"socket.io\";\nimport logger from \"./log\";\nimport RouterContext from \"../entity/ctx\";\nimport { IPacket, response, responseError } from \"../service/protocol\";\n// Routing controller class (singleton class)\nclass RouterApp extends EventEmitter {\n  public readonly middlewares: Array<Function>;\n\n  constructor() {\n    super();\n    this.middlewares = [];\n  }\n\n  emitRouter(event: string, ctx: RouterContext, data: any) {\n    try {\n      // service logic routing trigger point\n      super.emit(event, ctx, data);\n    } catch (error: any) {\n      responseError(ctx, error);\n    }\n    return this;\n  }\n\n  on(event: string, fn: (ctx: RouterContext, data: any) => void) {\n    // logger.info(` Register event: ${event} `);\n    return super.on(event, fn);\n  }\n\n  use(fn: (event: string, ctx: RouterContext, data: any, next: Function) => void) {\n    this.middlewares.push(fn);\n  }\n\n  getMiddlewares() {\n    return this.middlewares;\n  }\n}\n\n// routing controller singleton class\nexport const routerApp = new RouterApp();\n\n/**\n * Based on Socket.io for routing decentralization and secondary forwarding\n * @param {Socket} socket\n */\nexport function navigation(socket: Socket) {\n  // Full-life session variables (Between connection and disconnection)\n  const session: any = {};\n  // Register all middleware with Socket\n  for (const fn of routerApp.getMiddlewares()) {\n    socket.use((packet, next) => {\n      const protocol = packet[1] as IPacket;\n      if (!protocol)\n        return logger.info(`session ${socket.id} request data protocol format is incorrect`);\n      const ctx = new RouterContext(protocol.uuid, socket, session);\n      fn(packet[0], ctx, protocol.data, next);\n    });\n  }\n  // Register all events with Socket\n  for (const event of routerApp.eventNames()) {\n    socket.on(event as string, (protocol: IPacket) => {\n      if (!protocol)\n        return logger.info(`session ${socket.id} request data protocol format is incorrect`);\n      const ctx = new RouterContext(protocol.uuid, socket, session, event.toString());\n      routerApp.emitRouter(event as string, ctx, protocol.data);\n    });\n  }\n  // The connected event route is triggered\n  const ctx = new RouterContext(null, socket, session);\n  routerApp.emitRouter(\"connection\", ctx, null);\n}\n\n// The authentication routing order must be the first load. These routing orders cannot be changed without authorization\nimport \"../routers/auth_router\";\nimport \"../routers/passport_router\";\nimport \"../routers/info_router\";\nimport \"../routers/Instance_router\";\nimport \"../routers/instance_event_router\";\nimport \"../routers/file_router\";\nimport \"../routers/stream_router\";\nimport \"../routers/environment_router\";\nimport \"../routers/schedule_router\";\n\nlogger.info($t(\"TXT_CODE_router.initComplete\"));\n","import { exec } from \"child_process\";\nimport { existsSync } from \"fs\";\nimport fs from \"fs/promises\";\nimport path from \"path\";\nimport { promisify } from \"util\";\nimport { SEVEN_ZIP_PATH } from \"../const\";\nimport { $t } from \"../i18n\";\nimport logger from \"./log\";\n\nconst execPromise = promisify(exec);\n\n/**\n * Check if the file is in zip format (only supports .zip extension)\n */\nexport function isZipFormat(filePath: string): boolean {\n  const ext = path.extname(filePath).toLowerCase();\n  return ext === \".zip\";\n}\n\n/**\n * Check if it's a multi-volume archive (supports ZIP, 7z, RAR formats)\n * ZIP multi-volume naming: archive.zip, archive.z01, archive.z02, etc.\n * 7z multi-volume naming: archive.7z.001, archive.7z.002, etc.\n * RAR multi-volume naming: archive.part1.rar, archive.part2.rar or archive.rar, archive.r00, archive.r01, etc.\n */\nexport function isMultiVolume(filePath: string): boolean {\n  const dir = path.dirname(filePath);\n  const fullName = path.basename(filePath);\n  const ext = path.extname(filePath).toLowerCase();\n\n  if (ext === \".zip\") {\n    const baseName = path.basename(filePath, \".zip\");\n    const firstVolumeFile = path.join(dir, baseName + \".z01\");\n    return existsSync(firstVolumeFile);\n  }\n\n  if (ext === \".7z\") {\n    const baseName = path.basename(filePath, \".7z\");\n    const firstVolumeFile = path.join(dir, baseName + \".7z.001\");\n    return existsSync(firstVolumeFile);\n  }\n\n  if (ext === \".rar\") {\n    const baseName = path.basename(filePath, \".rar\");\n\n    if (fullName.includes(\".part1.rar\")) {\n      const partBaseName = fullName.replace(\".part1.rar\", \"\");\n      const secondPartFile = path.join(dir, partBaseName + \".part2.rar\");\n      return existsSync(secondPartFile);\n    }\n\n    const firstVolumeFile = path.join(dir, baseName + \".r00\");\n    return existsSync(firstVolumeFile);\n  }\n\n  return false;\n}\n\n/**\n * Get file extension for error messages\n */\nexport function getFileExtension(filePath: string): string {\n  return path.extname(filePath).toLowerCase().substring(1) || \"unknown\";\n}\n\nlet isChecked7zip = false;\n/**\n * Check if 7zip is working properly\n */\nexport async function check7zipStatus(): Promise<boolean> {\n  try {\n    if (isChecked7zip) return true;\n    if (!existsSync(SEVEN_ZIP_PATH)) return false;\n    try {\n      await fs.chmod(SEVEN_ZIP_PATH, 0o755);\n    } catch (chmodError: any) {\n      logger.warn($t(\"TXT_CODE_9ade0fb8\", { message: chmodError.message }));\n    }\n    const { stdout } = await execPromise(`\"${SEVEN_ZIP_PATH}\" i`, {\n      timeout: 5 * 1000\n    });\n    if (stdout.includes(\"7-Zip\") && stdout.includes(\"Copyright\")) {\n      logger.info($t(\"TXT_CODE_a7c73a51\", { info: stdout.split(\"\\n\")[1].trim() }));\n      isChecked7zip = true;\n      return true;\n    }\n    return false;\n  } catch (error: any) {\n    // ignore error\n    return false;\n  }\n}\n","import { $t, i18next } from \"../i18n\";\nimport path from \"path\";\nimport fs from \"fs-extra\";\nimport { compress, decompress } from \"../common/compress\";\nimport iconv from \"iconv-lite\";\nimport { globalConfiguration } from \"../entity/config\";\nimport { ProcessWrapper } from \"mcsmanager-common\";\nimport os from \"os\";\nimport { normalizedJoin } from \"../tools/filepath\";\n\nconst ERROR_MSG_01 = $t(\"TXT_CODE_system_file.illegalAccess\");\nconst MAX_EDIT_SIZE = 1024 * 1024 * 5;\n\ninterface IFile {\n  name: string;\n  size: number;\n  time: string;\n  type: number;\n  mode: number;\n}\n\nexport default class FileManager {\n  public cwd: string = \".\";\n\n  constructor(\n    public topPath: string = \"\",\n    public fileCode?: string\n  ) {\n    if (!path.isAbsolute(topPath)) {\n      this.topPath = path.normalize(path.join(process.cwd(), topPath));\n    } else {\n      this.topPath = path.normalize(topPath);\n    }\n    if (!fileCode) {\n      this.fileCode = \"utf-8\";\n      if (i18next.language == \"zh_cn\") this.fileCode = \"gbk\";\n    }\n  }\n\n  isRootTopRath() {\n    return this.topPath === \"/\" || this.topPath === \"\\\\\";\n  }\n\n  toAbsolutePath(fileName: string = \"\") {\n    const topAbsolutePath = this.topPath;\n\n    if (path.normalize(fileName).indexOf(topAbsolutePath) === 0) return fileName;\n\n    let finalPath = \"\";\n    if (os.platform() === \"win32\") {\n      const reg = new RegExp(\"^[A-Za-z]{1}:[\\\\\\\\/]{1}\");\n      if (reg.test(this.cwd)) {\n        finalPath = path.normalize(path.join(this.cwd, fileName));\n      } else if (reg.test(fileName)) {\n        finalPath = path.normalize(fileName);\n      }\n    }\n\n    if (!finalPath) {\n      finalPath = path.normalize(path.join(this.topPath, this.cwd, fileName));\n    }\n\n    if (\n      finalPath.indexOf(topAbsolutePath) !== 0 &&\n      topAbsolutePath !== \"/\" &&\n      topAbsolutePath !== \"\\\\\"\n    )\n      throw new Error(ERROR_MSG_01);\n    return finalPath;\n  }\n\n  checkPath(fileNameOrPath: string) {\n    if (this.isRootTopRath()) return true;\n    const destAbsolutePath = this.toAbsolutePath(fileNameOrPath);\n    const topAbsolutePath = this.topPath;\n    return destAbsolutePath.indexOf(topAbsolutePath) === 0;\n  }\n\n  check(destPath: string) {\n    if (this.isRootTopRath()) return true;\n    return this.checkPath(destPath) && fs.existsSync(this.toAbsolutePath(destPath));\n  }\n\n  cd(dirName: string) {\n    if (!this.check(dirName)) throw new Error(ERROR_MSG_01);\n    this.cwd = normalizedJoin(this.cwd, dirName);\n  }\n\n  list(page: 0, pageSize = 40, searchFileName?: string) {\n    if (pageSize > 100 || pageSize <= 0 || page < 0) throw new Error(\"Beyond the value limit\");\n    let fileNames = fs.readdirSync(this.toAbsolutePath());\n    if (searchFileName)\n      fileNames = fileNames.filter((name) =>\n        name.toLowerCase().includes(searchFileName.toLowerCase())\n      );\n\n    const total = fileNames.length;\n    const sliceStart = page * pageSize;\n    const sliceEnd = sliceStart + pageSize;\n    const files: IFile[] = [];\n    const dirs: IFile[] = [];\n    fileNames.forEach((name) => {\n      try {\n        const info = fs.statSync(this.toAbsolutePath(name));\n        const mode = parseInt(String(parseInt(info.mode?.toString(8), 10)).slice(-3));\n        const commonInfo = {\n          name: name,\n          size: info.size,\n          time: info.atime.toString(),\n          mode,\n          type: info.isFile() ? 1 : 0\n        };\n        if (info.isFile()) {\n          files.push(commonInfo);\n        } else {\n          dirs.push(commonInfo);\n        }\n      } catch (error: any) {\n        // Ignore a file information retrieval error to prevent an overall error\n      }\n    });\n    files.sort((a, b) => (a.name > b.name ? 1 : -1));\n    dirs.sort((a, b) => (a.name > b.name ? 1 : -1));\n    let resultList = dirs.concat(files);\n    resultList = resultList.slice(sliceStart, sliceEnd);\n    return {\n      items: resultList,\n      page,\n      pageSize,\n      total,\n      absolutePath: this.toAbsolutePath()\n    };\n  }\n\n  async chmod(fileName: string, chmodValue: number, deep: boolean) {\n    if (!this.check(fileName) || isNaN(parseInt(chmodValue as any))) throw new Error(ERROR_MSG_01);\n    const absPath = this.toAbsolutePath(fileName);\n    const defaultPath = \"/bin/chmod\";\n    let file = \"chmod\";\n    if (fs.existsSync(defaultPath)) file = defaultPath;\n    const params: string[] = [];\n    if (deep) params.push(\"-R\");\n    params.push(String(chmodValue));\n    params.push(absPath);\n    return await new ProcessWrapper(file, params, \".\", 60 * 10).start();\n  }\n\n  async readFile(fileName: string) {\n    if (!this.check(fileName)) throw new Error(ERROR_MSG_01);\n    const absPath = this.toAbsolutePath(fileName);\n    const buf = await fs.readFile(absPath);\n    const text = iconv.decode(buf, this.fileCode || \"utf-8\");\n    return text;\n  }\n\n  async writeFile(fileName: string, data: string) {\n    if (!this.check(fileName)) throw new Error(ERROR_MSG_01);\n    const absPath = this.toAbsolutePath(fileName);\n    const buf = iconv.encode(data, this.fileCode || \"utf-8\");\n    return await fs.writeFile(absPath, buf);\n  }\n\n  async newFile(fileName: string) {\n    // if (!FileManager.checkFileName(fileName)) throw new Error(ERROR_MSG_01);\n    if (!this.checkPath(fileName)) throw new Error(ERROR_MSG_01);\n    const target = this.toAbsolutePath(fileName);\n    fs.createFile(target);\n  }\n\n  async copy(target1: string, target2: string) {\n    if (!this.checkPath(target2) || !this.check(target1)) throw new Error(ERROR_MSG_01);\n    const targetPath = this.toAbsolutePath(target1);\n    target2 = this.toAbsolutePath(target2);\n    return await fs.copy(targetPath, target2);\n  }\n\n  mkdir(target: string) {\n    if (!this.checkPath(target)) throw new Error(ERROR_MSG_01);\n    const targetPath = this.toAbsolutePath(target);\n    return fs.mkdirSync(targetPath);\n  }\n\n  async delete(target: string): Promise<boolean> {\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\n    const targetPath = this.toAbsolutePath(target);\n    return new Promise((r, j) => {\n      fs.remove(targetPath, (err) => {\n        if (!err) r(true);\n        else j(err);\n      });\n    });\n  }\n\n  async move(target: string, destPath: string) {\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\n    if (!this.checkPath(destPath)) throw new Error(ERROR_MSG_01);\n    const targetPath = this.toAbsolutePath(target);\n    destPath = this.toAbsolutePath(destPath);\n    await fs.move(targetPath, destPath);\n  }\n\n  private zipFileCheck(path: string) {\n    const fileInfo = fs.statSync(path);\n    const MAX_ZIP_GB = globalConfiguration.config.maxZipFileSize;\n    if (fileInfo.size > 1024 * 1024 * 1024 * MAX_ZIP_GB)\n      throw new Error($t(\"TXT_CODE_system_file.unzipLimit\", { max: MAX_ZIP_GB }));\n  }\n\n  async unzip(sourceZip: string, destDir: string, code?: string) {\n    if (!code) code = this.fileCode;\n    if (!this.check(sourceZip) || !this.checkPath(destDir)) throw new Error(ERROR_MSG_01);\n    this.zipFileCheck(this.toAbsolutePath(sourceZip));\n    return await decompress(this.toAbsolutePath(sourceZip), this.toAbsolutePath(destDir), code);\n  }\n\n  async zip(sourceZip: string, files: string[], code?: string) {\n    if (!code) code = this.fileCode;\n    if (!this.checkPath(sourceZip)) throw new Error(ERROR_MSG_01);\n    const MAX_ZIP_GB = globalConfiguration.config.maxZipFileSize;\n    const MAX_TOTAL_FIELS_SIZE = 1024 * 1024 * 1024 * MAX_ZIP_GB;\n    const sourceZipPath = this.toAbsolutePath(sourceZip);\n    const filesPath = [];\n    let totalSize = 0;\n    for (const iterator of files) {\n      if (this.check(iterator)) {\n        filesPath.push(this.toAbsolutePath(iterator));\n        try {\n          totalSize += fs.statSync(this.toAbsolutePath(iterator))?.size;\n        } catch (error: any) {}\n      }\n    }\n    if (totalSize > MAX_TOTAL_FIELS_SIZE)\n      throw new Error($t(\"TXT_CODE_system_file.unzipLimit\", { max: MAX_ZIP_GB }));\n    return await compress(sourceZipPath, filesPath, code);\n  }\n\n  async edit(target: string, data?: string) {\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\n    if (data || typeof data === \"string\") {\n      return await this.writeFile(target, data);\n    } else {\n      const absPath = this.toAbsolutePath(target);\n      const info = fs.statSync(absPath);\n      if (info.size > MAX_EDIT_SIZE) {\n        throw new Error($t(\"TXT_CODE_system_file.execLimit\"));\n      }\n      return await this.readFile(target);\n    }\n  }\n\n  rename(target: string, newName: string) {\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\n    if (!this.checkPath(newName)) throw new Error(ERROR_MSG_01);\n    const targetPath = this.toAbsolutePath(target);\n    const newPath = this.toAbsolutePath(newName);\n    fs.renameSync(targetPath, newPath);\n  }\n\n  public static checkFileName(fileName?: string): boolean {\n    if (!fileName) return false;\n    const blackKeys = [\"/\", \"\\\\\", \"|\", \"?\", \"*\", \">\", \"<\", \";\", '\"'];\n    for (const ch of blackKeys) {\n      if (fileName.includes(ch)) return false;\n    }\n    return true;\n  }\n}\n","import EventEmitter from \"events\";\nimport fs from \"fs-extra\";\nimport { InstanceStreamListener, QueryMapWrapper } from \"mcsmanager-common\";\nimport os from \"os\";\nimport path from \"path\";\nimport { Socket } from \"socket.io\";\nimport { v4 } from \"uuid\";\nimport StorageSubsystem from \"../common/system_storage\";\nimport FunctionDispatcher from \"../entity/commands/dispatcher\";\nimport { globalConfiguration } from \"../entity/config\";\nimport Instance from \"../entity/instance/instance\";\nimport InstanceConfig from \"../entity/instance/Instance_config\";\nimport { $t } from \"../i18n\";\nimport logger from \"./log\";\nimport InstanceControl from \"./system_instance_control\";\nimport takeoverContainer from \"./takeover_container\";\n\n// init instance default install path\nglobalConfiguration.load();\nlet INSTANCE_DATA_DIR = path.join(process.cwd(), \"data/InstanceData\");\nif (globalConfiguration.config.defaultInstancePath) {\n  INSTANCE_DATA_DIR = path.normalize(globalConfiguration.config.defaultInstancePath);\n}\n\nif (!fs.existsSync(INSTANCE_DATA_DIR)) {\n  fs.mkdirsSync(INSTANCE_DATA_DIR);\n}\n\nclass InstanceSubsystem extends EventEmitter {\n  public readonly GLOBAL_INSTANCE = \"__MCSM_GLOBAL_INSTANCE__\";\n  public readonly GLOBAL_INSTANCE_UUID = \"global0001\";\n\n  public readonly LOG_DIR = \"data/InstanceLog/\";\n\n  public readonly instances = new Map<string, Instance>();\n  public readonly instanceStream = new InstanceStreamListener();\n\n  constructor() {\n    super();\n  }\n\n  // start automatically at boot\n  private autoStart() {\n    this.instances.forEach((instance) => {\n      if (instance.config.eventTask.autoStart && instance.status() == Instance.STATUS_STOP) {\n        setTimeout(() => {\n          instance\n            .execPreset(\"start\")\n            .then(() => {\n              logger.info(\n                $t(\"TXT_CODE_system_instance.autoStart\", {\n                  name: instance.config.nickname,\n                  uuid: instance.instanceUuid\n                })\n              );\n            })\n            .catch((reason) => {\n              logger.error(\n                $t(\"TXT_CODE_system_instance.autoStartErr\", {\n                  name: instance.config.nickname,\n                  uuid: instance.instanceUuid,\n                  reason: reason\n                })\n              );\n            });\n        }, 1000 * 10);\n      }\n    });\n  }\n\n  // init all instances from local files\n  loadInstances() {\n    const instanceConfigs = StorageSubsystem.list(\"InstanceConfig\");\n    instanceConfigs.forEach((uuid) => {\n      if (uuid === this.GLOBAL_INSTANCE_UUID) return;\n      try {\n        const instanceConfig = StorageSubsystem.load(\"InstanceConfig\", InstanceConfig, uuid);\n        const instance = new Instance(uuid, instanceConfig);\n\n        instanceConfig.eventTask.ignore = false;\n\n        // All instances are all function schedulers\n        instance\n          .forceExec(new FunctionDispatcher())\n          .then((v) => {})\n          .catch((v) => {});\n        this.addInstance(instance);\n      } catch (error: any) {\n        logger.error(\n          $t(\"TXT_CODE_system_instance.readInstanceFailed\", { uuid: uuid, error: error.message })\n        );\n        logger.error($t(\"TXT_CODE_system_instance.checkConf\", { uuid: uuid }));\n      }\n    });\n\n    // handle global instance\n    let globalConfig: InstanceConfig;\n    try {\n      globalConfig = StorageSubsystem.load(\n        \"InstanceConfig\",\n        InstanceConfig,\n        this.GLOBAL_INSTANCE_UUID\n      );\n      if (globalConfig?.nickname !== this.GLOBAL_INSTANCE)\n        throw new Error(\"Global instance config is not valid\");\n    } catch (error: any) {\n      // if global instance config is not valid, create a new one\n      // create default global instance config if not exists\n      globalConfig = new InstanceConfig();\n      globalConfig.nickname = this.GLOBAL_INSTANCE;\n      globalConfig.cwd = \"/\";\n      globalConfig.startCommand = os.platform() === \"win32\" ? \"cmd.exe\" : \"bash\";\n      globalConfig.stopCommand = \"^c\";\n      globalConfig.ie = \"utf-8\";\n      globalConfig.oe = \"utf-8\";\n      globalConfig.type = Instance.TYPE_UNIVERSAL;\n      globalConfig.processType = \"general\";\n\n      // save config to file\n      StorageSubsystem.store(\"InstanceConfig\", this.GLOBAL_INSTANCE_UUID, globalConfig);\n    }\n\n    // create global instance\n    this.createInstance(\n      {\n        nickname: globalConfig.nickname,\n        cwd: globalConfig.cwd,\n        startCommand: globalConfig.startCommand,\n        stopCommand: globalConfig.stopCommand,\n        ie: globalConfig.ie,\n        oe: globalConfig.oe,\n        type: globalConfig.type,\n        processType: globalConfig.processType\n      },\n      true, // allow persistence\n      this.GLOBAL_INSTANCE_UUID\n    );\n\n    takeoverContainer()\n      .catch((error) => {\n        const reason = error.message || error;\n        if (typeof reason == \"string\" && reason.includes(\"connect ENOENT\")) {\n          return;\n        }\n        logger.error(`${$t(\"TXT_CODE_8d4c8f7e\")}: ${reason}`);\n      })\n      .finally(() => this.autoStart());\n  }\n\n  createInstance(cfg: any, persistence = true, uuid?: string) {\n    const newUuid = uuid || v4().replace(/-/gim, \"\");\n    const instance = new Instance(newUuid, new InstanceConfig());\n    // Instance working directory verification and automatic creation\n    if (!cfg.cwd || cfg.cwd === \".\") {\n      cfg.cwd = path.normalize(`${INSTANCE_DATA_DIR}/${instance.instanceUuid}`);\n    }\n    if (!fs.existsSync(cfg.cwd)) fs.mkdirsSync(cfg.cwd);\n    // Set the default input and output encoding\n    cfg.ie = cfg.oe = cfg.fileCode = \"utf8\";\n    // Build and initialize the type from the parameters\n\n    instance.parameters(cfg, persistence);\n    instance.forceExec(new FunctionDispatcher());\n    this.addInstance(instance);\n    return instance;\n  }\n\n  addInstance(instance: Instance) {\n    if (instance.instanceUuid == null) throw new Error($t(\"TXT_CODE_system_instance.uuidEmpty\"));\n    if (this.instances.has(instance.instanceUuid)) {\n      throw new Error(`The application instance ${instance.instanceUuid} already exists.`);\n    }\n    this.instances.set(instance.instanceUuid, instance);\n    // Dynamically monitor the newly added instance output stream and pass it to its own event stream\n    instance.on(\"data\", (...arr) => {\n      this.emit(\"data\", instance.instanceUuid, ...arr);\n    });\n    instance.on(\"exit\", (...arr) => {\n      this.emit(\n        \"exit\",\n        {\n          instanceUuid: instance.instanceUuid,\n          instanceName: instance.config.nickname\n        },\n        ...arr\n      );\n    });\n    instance.on(\"open\", (...arr) => {\n      this.emit(\n        \"open\",\n        {\n          instanceUuid: instance.instanceUuid,\n          instanceName: instance.config.nickname\n        },\n        ...arr\n      );\n    });\n    instance.on(\"failure\", (...arr) => {\n      this.emit(\n        \"failure\",\n        {\n          instanceUuid: instance.instanceUuid,\n          instanceName: instance.config.nickname\n        },\n        ...arr\n      );\n    });\n  }\n\n  removeInstance(instanceUuid: string, deleteFile: boolean) {\n    const instance = this.getInstance(instanceUuid);\n    if (instance) {\n      if (instance.status() !== Instance.STATUS_STOP) throw new Error($t(\"TXT_CODE_fb547313\"));\n      instance.destroy();\n      this.instances.delete(instanceUuid);\n      StorageSubsystem.delete(\"InstanceConfig\", instanceUuid);\n      InstanceControl.deleteInstanceAllTask(instanceUuid);\n      if (deleteFile) fs.remove(instance.absoluteCwdPath(), (err) => {});\n      return true;\n    }\n    throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n  }\n\n  forward(targetInstanceUuid: string, socket: Socket) {\n    try {\n      this.instanceStream.requestForward(socket, targetInstanceUuid);\n    } catch (err) {}\n  }\n\n  stopForward(targetInstanceUuid: string, socket: Socket) {\n    try {\n      const instance = this.getInstance(targetInstanceUuid);\n      if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\n      instance.watchers.delete(socket.id);\n      this.instanceStream.cannelForward(socket, targetInstanceUuid);\n    } catch (err) {}\n  }\n\n  forEachForward(instanceUuid: string, callback: (socket: Socket) => void) {\n    this.instanceStream.forwardViaCallback(instanceUuid, (_socket: Socket) => {\n      callback(_socket);\n    });\n  }\n\n  getInstance(instanceUuid: string) {\n    return this.instances.get(instanceUuid);\n  }\n\n  getQueryMapWrapper() {\n    return new QueryMapWrapper(this.instances);\n  }\n\n  exists(instanceUuid: string) {\n    return this.instances.has(instanceUuid);\n  }\n\n  async exitInstance(instance: Instance, force = true) {\n    if (!this.isGlobalInstance(instance))\n      StorageSubsystem.store(\"InstanceConfig\", instance.instanceUuid, instance.config);\n    if (instance.status() === Instance.STATUS_BUSY) {\n      logger.info(`Killing ${instance.config.nickname} (${instance.instanceUuid})...`);\n      await instance.execPreset(\"kill\");\n    } else if (instance.status() !== Instance.STATUS_STOP) {\n      if (force) {\n        logger.info(`Force stopping ${instance.config.nickname} (${instance.instanceUuid})...`);\n        await instance.execPreset(\"kill\");\n      } else {\n        logger.info(`Stopping ${instance.config.nickname} (${instance.instanceUuid})...`);\n        // BUG: Error: write EPIPE\n        await instance.execPreset(\"stop\");\n      }\n    }\n  }\n\n  exit(force = false) {\n    const promises: Promise<void>[] = [];\n    for (const iterator of this.instances) {\n      const instance = iterator[1];\n      if (instance.status() !== Instance.STATUS_STOP) {\n        promises.push(this.exitInstance(instance, force));\n      }\n    }\n    Promise.all(promises);\n\n    return new Promise<void>((resolve) => {\n      let checkCount = 0;\n      const checkTask = setInterval(() => {\n        let count = 0;\n        checkCount++;\n        for (const [_, instance] of this.instances) {\n          if (instance.status() !== Instance.STATUS_STOP) {\n            count++;\n            if (checkCount > 10) {\n              logger.info(\n                $t(\"TXT_CODE_eadac3c2\", {\n                  instance: instance.config.nickname\n                })\n              );\n              this.exitInstance(instance, true);\n            }\n          }\n        }\n        if (count === 0) {\n          logger.info($t(\"TXT_CODE_187bb567\"));\n          clearInterval(checkTask);\n          resolve();\n        } else {\n          logger.info($t(\"TXT_CODE_6f23ce93\", { count }));\n        }\n      }, 1000);\n    });\n  }\n\n  getInstances() {\n    let newArr = new Array<Instance>();\n    this.instances.forEach((instance) => {\n      if (!this.isGlobalInstance(instance)) newArr.push(instance);\n    });\n    newArr = newArr.sort((a, b) => (a.config.nickname > a.config.nickname ? 1 : -1));\n    return newArr;\n  }\n\n  isGlobalInstance(instance: Instance) {\n    return (\n      instance.instanceUuid === this.GLOBAL_INSTANCE_UUID ||\n      instance.config.nickname === this.GLOBAL_INSTANCE\n    );\n  }\n}\n\nexport default new InstanceSubsystem();\n","import { $t } from \"../i18n\";\nimport schedule from \"node-schedule\";\nimport InstanceSubsystem from \"./system_instance\";\nimport StorageSubsystem from \"../common/system_storage\";\nimport logger from \"./log\";\nimport FileManager from \"./system_file\";\n\n// Scheduled task configuration item interface\ninterface IScheduleTask {\n  instanceUuid: string;\n  name: string;\n  count: number;\n  time: string;\n  action: string;\n  payload: string;\n  type: number;\n}\n\n// Scheduled task timer/periodic task interface\ninterface IScheduleJob {\n  cancel: Function;\n}\n\n// @Entity\n// Schedule task configuration data entity class\nclass TaskConfig implements IScheduleTask {\n  instanceUuid = \"\";\n  name: string = \"\";\n  count: number = 1;\n  time: string = \"\";\n  action: string = \"\";\n  payload: string = \"\";\n  type: number = 1;\n}\n\nclass IntervalJob implements IScheduleJob {\n  public job: number = 0;\n\n  constructor(private callback: Function, public time: number) {\n    this.job = setInterval(callback, time * 1000);\n  }\n\n  cancel() {\n    clearInterval(this.job);\n  }\n}\n\n// Scheduled task instance class\nclass Task {\n  constructor(public config: TaskConfig, public job?: IScheduleJob) {}\n}\n\nclass InstanceControlSubsystem {\n  public readonly taskMap = new Map<string, Array<Task>>();\n  public readonly taskJobMap = new Map<string, schedule.Job>();\n\n  constructor() {\n    // Initialize all persistent data and load into memory one by one\n    StorageSubsystem.list(\"TaskConfig\").forEach((uuid) => {\n      const config = StorageSubsystem.load(\"TaskConfig\", TaskConfig, uuid) as TaskConfig;\n      try {\n        this.registerScheduleJob(config, false);\n      } catch (error: any) {\n        // Some scheduled tasks may be left, but the upper limit will not change\n        // Ignore the scheduled task registration at startup\n      }\n    });\n  }\n\n  public registerScheduleJob(task: IScheduleTask, needStore = true) {\n    const key = `${task.instanceUuid}`;\n    if (!this.taskMap.has(key)) {\n      this.taskMap.set(key, []);\n    }\n    const registeredTask = this.taskMap.get(key);\n    if (registeredTask && registeredTask?.length >= 8)\n      throw new Error($t(\"TXT_CODE_system_instance_control.execLimit\"));\n    if (!this.checkTask(key, task.name))\n      throw new Error($t(\"TXT_CODE_system_instance_control.existRepeatTask\"));\n    if (!FileManager.checkFileName(task.name))\n      throw new Error($t(\"TXT_CODE_system_instance_control.illegalName\"));\n    if (needStore)\n      logger.info(\n        $t(\"TXT_CODE_system_instance_control.crateTask\", {\n          name: task.name,\n          task: JSON.stringify(task)\n        })\n      );\n\n    let job: IScheduleJob;\n\n    // min interval check\n    if (task.type === 1) {\n      let internalTime = Number(task.time);\n      if (isNaN(internalTime) || internalTime < 1) internalTime = 1;\n\n      // task.type=1: Time interval scheduled task, implemented with built-in timer\n      job = new IntervalJob(() => {\n        this.action(task);\n        if (task.count === -1) return;\n        if (task.count === 1) {\n          job.cancel();\n          this.deleteTask(key, task.name);\n        } else {\n          task.count--;\n          this.updateTaskConfig(key, task.name, task);\n        }\n      }, internalTime);\n    } else {\n      // Expression validity check: 8 19 14 * * 1,2,3,4\n      const timeArray = task.time.split(\" \");\n      const checkIndex = [0, 1, 2];\n      checkIndex.forEach((item) => {\n        if (isNaN(Number(timeArray[item])) && Number(timeArray[item]) >= 0) {\n          throw new Error(\n            $t(\"TXT_CODE_system_instance_control.crateTaskErr\", {\n              name: task.name,\n              timeArray: timeArray\n            })\n          );\n        }\n      });\n      // task.type=2: Specify time-based scheduled tasks, implemented by node-schedule library\n      job = schedule.scheduleJob(task.time, () => {\n        this.action(task);\n        if (task.count === -1) return;\n        if (task.count === 1) {\n          job.cancel();\n          this.deleteTask(key, task.name);\n        } else {\n          task.count--;\n          this.updateTaskConfig(key, task.name, task);\n        }\n      });\n    }\n    const newTask = new Task(task, job);\n    this.taskMap.get(key)?.push(newTask);\n    if (needStore) {\n      StorageSubsystem.store(\"TaskConfig\", `${key}_${newTask.config.name}`, newTask.config);\n    }\n    if (needStore)\n      logger.info($t(\"TXT_CODE_system_instance_control.crateSuccess\", { name: task.name }));\n  }\n\n  public listScheduleJob(instanceUuid: string) {\n    const key = `${instanceUuid}`;\n    const arr = this.taskMap.get(key) || [];\n    const res: IScheduleTask[] = [];\n    arr.forEach((v) => {\n      res.push(v.config);\n    });\n    return res;\n  }\n\n  public async action(task: IScheduleTask) {\n    try {\n      const payload = task.payload;\n      const instanceUuid = task.instanceUuid;\n      const instance = InstanceSubsystem.getInstance(instanceUuid);\n      // If the instance has been deleted, it needs to be automatically destroyed\n      if (!instance) {\n        return this.deleteScheduleTask(task.instanceUuid, task.name);\n      }\n      const instanceStatus = instance.status();\n      // logger.info(`Execute scheduled task: ${task.name} ${task.action} ${task.time} ${task.count} `);\n      if (task.action === \"start\") {\n        if (instanceStatus === 0) {\n          return await instance.execPreset(\"start\");\n        }\n      }\n      if (task.action === \"stop\") {\n        if (instanceStatus === 3) {\n          return await instance.execPreset(\"stop\");\n        }\n      }\n      if (task.action === \"restart\") {\n        if (instanceStatus === 3) {\n          return await instance.execPreset(\"restart\");\n        }\n      }\n      if (task.action === \"command\") {\n        if (instanceStatus === 3) {\n          return await instance.execPreset(\"command\", payload);\n        }\n      }\n      if (task.action === \"kill\") {\n        return await instance.execPreset(\"kill\");\n      }\n    } catch (error: any) {\n      logger.error(\n        $t(\"TXT_CODE_system_instance_control.execCmdErr\", {\n          uuid: task.instanceUuid,\n          name: task.name,\n          error: error\n        })\n      );\n    }\n  }\n\n  public deleteInstanceAllTask(instanceUuid: string) {\n    const tasks = this.listScheduleJob(instanceUuid);\n    if (tasks)\n      tasks.forEach((v) => {\n        this.deleteScheduleTask(instanceUuid, v.name);\n      });\n  }\n\n  public deleteScheduleTask(instanceUuid: string, name: string) {\n    const key = `${instanceUuid}`;\n    this.deleteTask(key, name);\n  }\n\n  private deleteTask(key: string, name: string) {\n    this.taskMap.get(key)?.forEach((v, index, arr) => {\n      if (v?.config?.name === name) {\n        v?.job?.cancel();\n        arr.splice(index, 1);\n      }\n    });\n    StorageSubsystem.delete(\"TaskConfig\", `${key}_${name}`);\n  }\n\n  private checkTask(key: string, name: string) {\n    let f = true;\n    this.taskMap?.get(key)?.forEach((v, index, arr) => {\n      if (v.config.name === name) f = false;\n    });\n    return f;\n  }\n\n  private updateTaskConfig(key: string, name: string, data: IScheduleTask) {\n    const list = this.taskMap.get(key);\n    for (const index in list) {\n      const t = list[index as any];\n      if (t.config.name === name) {\n        list[index as any].config = data;\n        break;\n      }\n    }\n  }\n\n  private checkScheduledTaskLimit(instanceUuid: string) {\n    for (const iterator of this.taskMap) {\n    }\n  }\n}\n\nexport default new InstanceControlSubsystem();\n","import { systemInfo } from \"mcsmanager-common\";\n\n// Visual data subsystem: responsible for collecting system data and event data, and providing some methods to display them\nclass LineQueue<T> {\n  private readonly arr = new Array<T>();\n\n  constructor(public readonly maxSize: number, defaultValue: T) {\n    for (let index = 0; index < maxSize; index++) {\n      this.arr.push(defaultValue);\n    }\n  }\n\n  push(data: T) {\n    if (this.arr.length < this.maxSize) {\n      this.arr.push(data);\n    } else {\n      this.arr.shift();\n      this.arr.push(data);\n    }\n  }\n\n  getArray() {\n    return this.arr;\n  }\n}\n\ninterface ISystemChartInfo {\n  cpu: number;\n  mem: number;\n}\n\nclass VisualDataSubsystem {\n  public readonly countMap: Map<string, number> = new Map<string, number>();\n\n  public readonly systemChart = new LineQueue<ISystemChartInfo>(200, { cpu: 0, mem: 0 });\n\n  private requestCount = 0;\n\n  constructor() {\n    setInterval(() => {\n      const info = systemInfo();\n      if (info) {\n        this.systemChart.push({\n          cpu: Number((info.cpuUsage * 100).toFixed(0)),\n          mem: Number((info.memUsage * 100).toFixed(0))\n        });\n      } else {\n        this.systemChart.push({\n          cpu: 0,\n          mem: 0\n        });\n      }\n    }, 1000 * 3);\n  }\n\n  addRequestCount() {\n    this.requestCount++;\n  }\n\n  getSystemChartArray() {\n    return this.systemChart.getArray();\n  }\n\n  // Trigger counting event\n  emitCountEvent(eventName: string) {\n    const v = this.countMap.get(eventName);\n    if (v) {\n      this.countMap.set(eventName, v + 1);\n    } else {\n      this.countMap.set(eventName, 1);\n    }\n  }\n\n  // Trigger counting event\n  eventCount(eventName: string) {\n    return this.countMap.get(eventName);\n  }\n\n  // Trigger log event\n  emitLogEvent(eventName: string, source: any) {\n    const time = new Date().toLocaleString();\n  }\n}\n\nexport default new VisualDataSubsystem();\n","import { DefaultDocker } from \"./docker_service\";\nimport InstanceSubsystem from \"./system_instance\";\nimport DockerTakeoverCommand from \"../entity/commands/docker/docker_takeover\";\nimport { ContainerInfo } from \"dockerode\";\n\nexport default async function takeoverContainer() {\n  const docker = new DefaultDocker();\n  const containers = new Map<string, ContainerInfo>();\n  (await docker.listContainers()).forEach((container) => {\n    const label = container.Labels[\"mcsmanager.instance.uuid\"];\n    if (label == null) {\n      return;\n    }\n    if (containers.has(label)) {\n      return; // Skip if already exists\n    }\n    containers.set(label, container);\n  });\n\n  for (const c of containers) {\n    const [uuid, container] = c;\n    const instance = InstanceSubsystem.getInstance(uuid);\n    if (instance && instance.config.processType == \"docker\") {\n      await instance.forceExec(new DockerTakeoverCommand(container));\n    }\n  }\n}\n","import FileWriter from \"../entity/file_writer\";\nimport { v4 } from \"uuid\";\n\nclass UploadManager {\n  private readonly uploads: Map<string, FileWriter> = new Map();\n  static timeout = 60 * 60 * 1000; // 1 hour\n\n  constructor() {\n    setInterval(\n      async () => {\n        await this.clearExpired();\n      },\n      5 * 60 * 1000 // 5 min\n    );\n  }\n\n  add(file: FileWriter): string {\n    const key = v4();\n    file.id = key;\n    this.uploads.set(key, file);\n    return key;\n  }\n\n  get(key: string): FileWriter | undefined {\n    return this.uploads.get(key);\n  }\n\n  delete(key: string): boolean {\n    return this.uploads.delete(key);\n  }\n\n  getByPath(path: string): { id: string; writer: FileWriter } | undefined {\n    for (const [id, writer] of this.uploads.entries()) {\n      if (writer.path == path) {\n        return { id, writer };\n      }\n    }\n    return undefined;\n  }\n\n  async clearExpired(): Promise<void> {\n    const now = Date.now();\n    for (const [key, writer] of this.uploads.entries()) {\n      if (now - writer.lastUpdate > UploadManager.timeout) {\n        try {\n          await writer.stop();\n          this.uploads.delete(key);\n        } catch (e) {\n          console.error(`Failed to stop upload writer for key ${key}:`, e);\n        }\n      }\n    }\n  }\n\n  async exit() {\n    for (const [key, writer] of this.uploads.entries()) {\n      try {\n        await writer.stop();\n        this.uploads.delete(key);\n      } catch (e) {\n        console.error(`Failed to stop upload writer for key ${key}:`, e);\n      }\n    }\n  }\n}\n\nconst uploadManager = new UploadManager();\n\nexport default uploadManager;\n","import { $t } from \"../i18n\";\nimport * as fs from \"fs-extra\";\nimport { GlobalVariable } from \"mcsmanager-common\";\nimport logger from \"./log\";\n\nconst PACKAGE_JSON = \"package.json\";\n\nexport function initVersionManager() {\n  try {\n    GlobalVariable.set(\"version\", \"Unknown\");\n    if (fs.existsSync(PACKAGE_JSON)) {\n      const data: any = JSON.parse(fs.readFileSync(PACKAGE_JSON, { encoding: \"utf-8\" }));\n      if (data.version) {\n        GlobalVariable.set(\"version\", data.version);\n      }\n    }\n  } catch (error: any) {\n    logger.error($t(\"TXT_CODE_version.versionDetectErr\"), error);\n  }\n}\n\nexport function getVersion() {\n  return GlobalVariable.get(\"version\", \"Unknown\");\n}\n","import StorageSubsystem from \"../common/system_storage\";\nimport logger from \"./log\";\nimport { t } from \"i18next\";\n\nfunction readCategoryConfig(configCategory: string, callback: (config: any) => boolean) {\n  const configPaths = StorageSubsystem.readDir(configCategory);\n  for (const configPath of configPaths) {\n    try {\n      const config = JSON.parse(StorageSubsystem.readFile(configPath));\n      if (callback(config)) {\n        logger.info(t(\"TXT_CODE_6b2a9cab\"), configPath);\n        StorageSubsystem.writeFile(configPath, JSON.stringify(config, null, 4));\n      }\n    } catch (error: any) {\n      logger.error(t(\"TXT_CODE_fb75aba9\"), error);\n    }\n  }\n}\n\nfunction refactorInstanceConfig(config: any) {\n  if (isNaN(config.passWordType)) config.passWordType = 0;\n  if (typeof config.endTime === \"string\") {\n    config.endTime = new Date(config.endTime).getTime();\n    return true;\n  }\n  return false;\n}\n\nfunction detectConfig() {\n  readCategoryConfig(\"InstanceConfig\", refactorInstanceConfig);\n}\n\nexport default { detectConfig };\n","import formidable from \"formidable\";\nimport fs from \"fs-extra\";\nimport os from \"os\";\nimport path from \"path\";\n\nexport function checkFileName(fileName: string) {\n  const blackKeys = [\"/\", \"\\\\\", \"|\", \"?\", \"*\", \">\", \"<\", \";\", '\"'];\n  for (const ch of blackKeys) {\n    if (fileName.includes(ch)) return false;\n  }\n  return true;\n}\n\nexport function clearUploadFiles(file?: formidable.File | formidable.File[]) {\n  if (!file) return;\n  if (file instanceof Array) {\n    file.forEach((v) => {\n      fs.remove(v.filepath, () => {});\n    });\n  } else {\n    fs.remove(file.filepath, () => {});\n  }\n}\n\nexport function normalizedJoin(...paths: string[]) {\n  if (os.platform() === \"win32\") {\n    return joinWin32(...paths);\n  }\n  return path.normalize(path.join(...paths));\n}\n\nfunction joinWin32(...paths: string[]): string {\n  if (!paths.length) return \".\";\n  if (paths.length == 1) return paths[0];\n  const parts = path.win32.parse(paths[1]);\n  let p: string;\n  if (parts.root) {\n    p = paths[1];\n  } else {\n    p = path.normalize(path.join(paths[0], paths[1]));\n  }\n  if (paths.length <= 2) return p;\n\n  return joinWin32(p, ...paths.slice(2));\n}\n","import axios from \"axios\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport { pipeline, Readable } from \"stream\";\nimport { STEAM_CMD_PATH, SYSTEM_TYPE, WINDOWS_STEAM_CMD_URL } from \"../const\";\nimport logger from \"../service/log\";\nimport FileManager from \"../service/system_file\";\n\nexport async function initSteamCmd() {\n  try {\n    if (!fs.existsSync(STEAM_CMD_PATH) && SYSTEM_TYPE === \"win32\") {\n      const zipPath = await downloadSteam(WINDOWS_STEAM_CMD_URL);\n      await new FileManager().unzip(zipPath, \"lib\", \"utf-8\");\n      await fs.remove(zipPath);\n    }\n  } catch (error) {\n    logger.error(`Steam command line tool download failed: ${error}`);\n  }\n}\n\nexport async function downloadSteam(url: string): Promise<string> {\n  const tmpPath = path.normalize(path.join(process.cwd(), \"lib\", \"tmp_steamcmd.zip\"));\n  logger.info(`Starting Steam command line tool download: ${url} --> ${tmpPath}`);\n\n  return new Promise(async (resolve, reject) => {\n    try {\n      // Ensure target directory exists\n      const targetDir = path.dirname(tmpPath);\n      if (!fs.existsSync(targetDir)) {\n        fs.mkdirsSync(targetDir);\n      }\n\n      // Remove existing file if it exists\n      if (fs.existsSync(tmpPath)) {\n        fs.removeSync(tmpPath);\n      }\n\n      // Download file\n      const response = await axios<Readable>({\n        url: url,\n        responseType: \"stream\",\n        timeout: 1000 * 60 * 10, // 10 minutes timeout\n        headers: {\n          \"User-Agent\":\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 MCSManager/10.0.0\"\n        }\n      });\n\n      // Create write stream\n      const writeStream = fs.createWriteStream(path.normalize(tmpPath));\n\n      // Use pipeline to handle streams\n      pipeline(response.data, writeStream, async (err) => {\n        if (err) {\n          fs.remove(tmpPath, () => {});\n          reject(err);\n        } else {\n          fs.chmod(tmpPath, 0o755, () => {});\n          resolve(tmpPath);\n        }\n      });\n    } catch (error: any) {\n      reject(error.message || error);\n    }\n  });\n}\n","import { promisify } from \"util\";\nimport { exec } from \"child_process\";\nimport Instance from \"../entity/instance/instance\";\nimport { chown } from \"fs/promises\";\nimport { $t } from \"../i18n\";\n\n// Promisify the exec function to use async/await\nconst execAsync = promisify(exec);\n\n/**\n * Retrieves the Linux system UID and GID for a given username\n */\nexport async function getLinuxSystemId(username: string): Promise<{ uid: number; gid: number }> {\n  // Validate input: ensure username is a non-empty string\n  if (!username || typeof username !== \"string\" || username.trim() === \"\") {\n    throw new Error('\"Run As User\" Error: Username must be a non-empty string');\n  }\n\n  // Sanitize username to prevent command injection (allow only alphanumeric, underscore, and hyphen)\n  const sanitizedUsername = username.replace(/[^a-zA-Z0-9_-]/g, \"\");\n  if (sanitizedUsername !== username) {\n    throw new Error('\"Run As User\" Error: Username contains unsafe characters');\n  }\n\n  try {\n    // Execute `id -u` and `id -g` commands in parallel with a 5-second timeout\n    const [uidResult, gidResult] = await Promise.all([\n      execAsync(`id -u ${sanitizedUsername}`, { timeout: 5000 }),\n      execAsync(`id -g ${sanitizedUsername}`, { timeout: 5000 })\n    ]);\n\n    // Check for errors in stderr\n    if (uidResult.stderr || gidResult.stderr) {\n      throw new Error(`Command error: ${uidResult.stderr || gidResult.stderr}`);\n    }\n\n    // Parse UID and GID from command output\n    const uid = parseInt(uidResult.stdout.trim());\n    const gid = parseInt(gidResult.stdout.trim());\n\n    // Validate parsed UID and GID\n    if (isNaN(uid) || isNaN(gid)) {\n      throw new Error(\"Failed to parse UID or GID: Invalid output from id command\");\n    }\n\n    return { uid, gid };\n  } catch (error: any) {\n    throw new Error(`Unable to retrieve UID/GID for user \"${sanitizedUsername}\": ${error.message}`);\n  }\n}\n\nexport async function getRunAsUserParams(instance: Instance) {\n  // Get user info for the target user (Linux/macOS only)\n  let uid: number | undefined = undefined;\n  let gid: number | undefined = undefined;\n  let isEnableRunAs = false;\n  const name = instance.config.runAs;\n  if (name && String(name).trim() && process.platform !== \"win32\") {\n    const result = await getLinuxSystemId(name);\n    uid = result.uid;\n    gid = result.gid;\n    // Do not consider forcibly changing the ownership of instance files,\n    // as this may cause unexpected situations for users.\n    // try {\n    //   await execAsync(`chown -R ${uid}:${gid} \"${instance.absoluteCwdPath()}\"`);\n    // } catch (error) {\n    //   instance.println(\"WARN\", $t(\"TXT_CODE_fcdc758\"));\n    //   instance.println(\"WARN\", String(error));\n    // }\n    isEnableRunAs = true;\n  }\n  return { uid, gid, isEnableRunAs, runAsName: name };\n}\n","export const formatTime = (seconds: number) => {\n  if (seconds < 60) return Math.round(seconds) + \"s\";\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = Math.round(seconds % 60);\n  return minutes + \"m \" + remainingSeconds + \"s\";\n};\n\nexport const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n","import { createReadStream, promises as fsPromises } from \"fs\";\nimport { IncomingMessage } from \"http\";\nimport { ParameterizedContext } from \"koa\";\nimport send from \"koa-send\";\nimport path from \"path\";\nimport { Transform, TransformCallback } from \"stream\";\nimport { globalConfiguration } from \"../entity/config\";\n\n/**\n * Maintains backpressure by slowly calling callbacks to prevent large chunks of data\n * from accumulating infinitely in the JS layer.\n */\nexport class ThrottleTransform extends Transform {\n  private resolve: (() => void) | null = null;\n  private consumerTasks: NodeJS.Timeout;\n\n  constructor(rate: number) {\n    super();\n    if (rate >= 1000 || rate <= 0 || isNaN(rate)) rate = 1000;\n    this.consumerTasks = setInterval(() => {\n      this.resolve?.();\n      this.resolve = null;\n    }, 1000 / rate);\n  }\n\n  private pending(): Promise<void> {\n    if (this.resolve) {\n      throw new Error(\"ThrottleTransform is already pending, cannot call pending() again.\");\n    }\n    return new Promise<void>((resolve) => {\n      this.resolve = resolve;\n    });\n  }\n\n  async _transform(\n    chunk: any,\n    encoding: BufferEncoding,\n    callback: TransformCallback\n  ): Promise<void> {\n    await this.pending();\n    this.push(chunk);\n    callback();\n  }\n\n  _flush(callback: TransformCallback): void {\n    clearInterval(this.consumerTasks);\n    this.resolve = null;\n    callback();\n  }\n\n  _destroy(error: Error | null, callback: (error?: Error | null) => void): void {\n    clearInterval(this.consumerTasks);\n    this.resolve = null;\n    callback(error);\n  }\n}\n\n// Proxy the IncomingMessage object, only proxy specific methods and properties, keep other behaviors original\nexport function proxyIncomingMessage(incomingMessage: IncomingMessage, rate: number) {\n  let throttled: ThrottleTransform | null = null;\n\n  const ensureThrottled = () => {\n    if (!rate || rate <= 0) return null;\n    if (!throttled) {\n      throttled = new ThrottleTransform(rate);\n      incomingMessage.pipe(throttled);\n    }\n    return throttled;\n  };\n\n  const proxy = new Proxy(incomingMessage, {\n    get(target, property: string) {\n      if (property === \"on\" || property === \"addListener\" || property === \"once\") {\n        return function (eventName: string, listener: (...args: any[]) => void) {\n          if ([\"end\", \"close\", \"error\", \"data\", \"readable\"].includes(eventName)) {\n            const stream = ensureThrottled();\n            if (stream) {\n              stream[property](eventName, listener);\n              return proxy;\n            }\n          }\n          target[property](eventName, listener);\n          return proxy;\n        };\n      }\n\n      if (property === \"pipe\") {\n        return function (destination: any, options?: any) {\n          const stream = ensureThrottled();\n          if (stream) return stream.pipe(destination, options);\n          return target.pipe(destination, options);\n        };\n      }\n\n      if (property === \"unpipe\") {\n        return function (destination?: any) {\n          const stream = ensureThrottled();\n          if (stream) return stream.unpipe(destination);\n          return target.unpipe(destination);\n        };\n      }\n\n      // @ts-ignore\n      const value = target[property];\n      if (typeof value === \"function\") return value.bind(target);\n      return value;\n    },\n\n    set(t: any, property: string, value: any) {\n      t[property] = value;\n      return true;\n    }\n  });\n\n  return proxy;\n}\n\nexport async function sendFile(ctx: ParameterizedContext, fileAbsPath: string) {\n  const rate = Number(globalConfiguration.config.downloadSpeedRate) || 0;\n  if (rate <= 0) {\n    const fileDir = path.dirname(fileAbsPath);\n    const fileName = path.basename(fileAbsPath);\n    ctx.set(\"Content-Type\", \"application/octet-stream\");\n    await send(ctx, fileName, { root: fileDir + \"/\", hidden: true });\n    return;\n  }\n\n  const fileName = path.basename(fileAbsPath);\n  const stats = await fsPromises.stat(fileAbsPath);\n\n  ctx.set(\"Content-Type\", \"application/octet-stream\");\n  ctx.set(\"Content-Disposition\", `attachment; filename=\"${encodeURIComponent(fileName)}\"`);\n  ctx.set(\"Content-Length\", stats.size.toString());\n\n  const fileStream = createReadStream(fileAbsPath);\n  ctx.body = fileStream.pipe(new ThrottleTransform(rate));\n}\n","module.exports = require(\"@iarna/toml\");","module.exports = require(\"@koa/router\");","module.exports = require(\"axios\");","module.exports = require(\"dockerode\");","module.exports = require(\"events\");","module.exports = require(\"fs-extra\");","module.exports = require(\"i18next\");","module.exports = require(\"iconv-lite\");","module.exports = require(\"koa\");","module.exports = require(\"koa-body\");","module.exports = require(\"koa-send\");","module.exports = require(\"log4js\");","module.exports = require(\"mcsmanager-common\");","module.exports = require(\"node-schedule\");","module.exports = require(\"pidusage\");","module.exports = require(\"proper-lockfile\");","module.exports = require(\"properties\");","module.exports = require(\"rcon-srcds\");","module.exports = require(\"socket.io\");","module.exports = require(\"uuid\");","module.exports = require(\"yaml\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"fs/promises\");","module.exports = require(\"http\");","module.exports = require(\"node:crypto\");","module.exports = require(\"node:stream\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"readline\");","module.exports = require(\"stream\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/app.ts\");\n",""],"names":[],"sourceRoot":""}